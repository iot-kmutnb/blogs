<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="RSP">
        <link rel="canonical" href="https://iot-kmutnb.github.io/blogs/arduino/arduino_cli/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>การใช้งาน Arduino CLI - IoT Engineering Education</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../../css/extra.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/c.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/cpp.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/arduino.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/typescript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/vhdl.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/verilog.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/text.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/matlab.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/julia.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-966FQ6RN6W"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-966FQ6RN6W');
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">IoT Engineering Education</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#arduino-cli" class="nav-link">การใช้งาน Arduino CLI</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#arduino-cli_1" class="nav-link">&#9655; Arduino CLI</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#arduino-cli_2" class="nav-link">&#9655; การติดตั้งและใช้งาน Arduino CLI</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_1" class="nav-link">&#9655; ไฟล์สำหรับการตั้งค่าเพื่อใช้งาน</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#arduino-cores" class="nav-link">&#9655; การค้นหาและติดตั้ง Arduino Cores</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#arduino-libraries" class="nav-link">&#9655; การค้นหาและติดตั้ง Arduino Libraries</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#arduino-sketch" class="nav-link">&#9655; การสร้างและคอมไพล์ Arduino Sketch</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_2" class="nav-link">&#9655; กล่าวสรุป</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="arduino-cli">การใช้งาน Arduino CLI<a class="headerlink" href="#arduino-cli" title="Permanent link">#</a></h1>
<p><strong>Keywords</strong>: <em>Arduino</em>, <em>Arduino CLI</em></p>
<hr />
<h2 id="arduino-cli_1">&#9655; <strong>Arduino CLI</strong><a class="headerlink" href="#arduino-cli_1" title="Permanent link">#</a></h2>
<p>บทความนี้นำเสนอตัวอย่างการใช้โปรแกรม <strong>Arduino CLI (Command-Line Interface)</strong>
โดยปรกติแล้ว การเขียนโปรแกรม <strong>Arduino Sketch</strong> ผู้ใช้ส่วนใหญ่ ก็จะเลือกใช้ซอฟต์แวร์
<strong>Arduino IDE</strong> ทั้งแบบ <strong>Desktop (offline)</strong> และ <strong>Cloud-based (online)</strong>
หรือ <strong>VS Code IDE + PlatformIO extension</strong> เป็นต้น</p>
<p><strong>Arduino CLI</strong> เป็นโปรแกรมอีกตัวเลือกหนึ่ง ที่มีลักษณะการใช้งานแบบ <strong>Command-Line Tool</strong>
สามารถนำมาใช้เพื่อสร้างโปรเจกต์ใหม่ คอมไพล์โค้ดและอัปโหลดไฟล์ไบนารีไปยังบอร์ดไมโครคอนโทรลเลอร์ได้
สามารถค้นหาหรือติดตั้ง <strong>Arduino Cores</strong> และโปรแกรมต่าง ๆ ที่เกี่ยวข้อง 
รวมถึงค้นหาและติดตั้งไลบรารีสำหรับ <strong>Arduino</strong> เป็นต้น</p>
<p>โปรแกรมนี้ใช้ได้กับระบบปฏิบัติการ เช่น <strong>Windows</strong>, <strong>Linux</strong> และ <strong>Mac OSX</strong> เป็นต้น
การใช้งานโปรแกรมนี้ ไม่มี <strong>GUI</strong> และเหมาะสำหรับการเรียกใช้งานใน <strong>Terminal</strong> หรือ <strong>Console</strong>
หรือแบบรีโมท เช่น ผ่าน <strong>Secure Shell</strong> 
หรือเรียกใช้งานแบบ <strong>Scripting</strong> เพื่อให้ทำงานแบบอัตโนมัติ เมื่อเรียกใช้ไฟล์สคริปต์ที่เกี่ยวข้อง</p>
<hr />
<h2 id="arduino-cli_2">&#9655; <strong>การติดตั้งและใช้งาน Arduino CLI</strong><a class="headerlink" href="#arduino-cli_2" title="Permanent link">#</a></h2>
<p>ขั้นตอนการติดตั้งและใช้งาน <strong>Arduino CLI</strong> สามารถศึกษาได้จาก
<a href="https://arduino.github.io/arduino-cli/latest/installation/"><code>https://arduino.github.io/arduino-cli/latest/installation/</code></a></p>
<p>สำหรับผู้ใช้ <strong>Linux / Ubuntu</strong> มีขั้นตอนดังนี้ (ทดลองใช้ <strong>Arduino CLI</strong> เวอร์ชัน <strong>v0.30</strong>)</p>
<pre><code class="language-bash"># Install from github
$ curl -fsSL https://raw.githubusercontent.com/arduino/arduino-cli/master/install.sh | sh

# Update the $PATH variable
$ export PATH=&quot;$PATH:`pwd`/bin&quot;

# Show the version of Arduino CLI
$ arduino-cli version
arduino-cli  Version: 0.30.0 Commit: 83700ca2
</code></pre>
<p><img alt="" src="arduino_cli_ubuntu-1.png" /></p>
<p>ถ้าต้องการดู <strong>Help Messages</strong> หรือข้อความแสดงรูปแบบการใช้คำสั่งและตัวเลือกของโปรแแกรม ก็มีตัวอย่างดังนี้</p>
<pre><code class="language-text"># Show help messages
$ arduino-cli help core
</code></pre>
<p><img alt="" src="arduino_cli_ubuntu-2.png" /></p>
<p>ถ้าใช้ <strong>Windows</strong> ก็สามารถดาวน์โหลดไฟล์ไบนารี (<strong>.exe</strong>) มาใช้งานได้ง่าย โดยดาวน์โหลดมาจากไฟล์ <strong>.zip</strong>
เช่น <a href="https://downloads.arduino.cc/arduino-cli/arduino-cli_latest_Windows_64bit.zip"><code>arduino-cli_latest_Windows_64bit.zip</code></a></p>
<p>เมื่อดาวน์โหลดไฟล์ <strong>.zip</strong> มาแล้วแตกไฟล์ เช่น สร้างเป็นไดเรกทอรีใหม่ชื่อ <code>C:\Tools\arduino_cli-0.30.0</code>
ซึ่งภายในมีไฟล์ <code>arduino_cli.exe</code>
จากนั้นก็ให้ทำคำสั่งใน <strong>Windows PowerShell</strong> เพื่อเพิ่มรายการไดเรกทอรีสำหรับไฟล์ไบนารี <code>arduino_cli.exe</code> ตามตัวอย่างดังนี้</p>
<pre><code class="language-text">$env:Path += &quot;;C:\Tools\arduino-cli_0.30.0&quot;
$env:Path -split ';'
</code></pre>
<p>แล้วทำคำสั่งเพื่อเรียกใช้โปรแกรม</p>
<p><img alt="" src="arduino_cli_win-1.png" /></p>
<p>&nbsp;</p>
<hr />
<h2 id="_1">&#9655; <strong>ไฟล์สำหรับการตั้งค่าเพื่อใช้งาน</strong><a class="headerlink" href="#_1" title="Permanent link">#</a></h2>
<p>ก่อนเริ่มต้นใช้งาน แนะนำให้สร้างไฟล์สำหรับตั้งค่าใช้งาน (<strong>Configuration File</strong>)
ซึ่งเป็นไฟล์แบบ <strong>YAML</strong> ( "YAML Ain't Markup Language") 
ถ้าเป็น <strong>Ubuntu Linux</strong> ไฟล์นี้จะถูกสร้างขึ้นและเก็บไว้ในไดเรกทอรี <code>$HOME/.arduino15/</code>
ภายใต้ไดเรกทอรีของผู้ใช้ (<strong>User's Home Directory</strong>)</p>
<pre><code class="language-text"># Create a config file written to $HOME/.arduino15/arduino-cli.yaml
$ arduino-cli config init
</code></pre>
<p>แต่ถ้าเป็น <strong>Windows</strong> จะได้ไฟล์  <code>"$($env:UserProfile)\AppData\Local\Arduino15\arduino-cli.yaml"</code></p>
<p>เมื่อทำคำสั่งแล้ว จะได้ไฟล์ใหม่ที่มีชื่อว่า <code>arduino-cli.yaml</code> และลองแสดงตัวอย่างข้อความในไฟล์ดังกล่าว
(แสดงเฉพาะสองบรรทัดแรก)</p>
<pre><code class="language-text"># Show the first two lines of $HOME/.arduino15/arduino-cli.yaml
$ cat $HOME/.arduino15/arduino-cli.yaml | head -n 2
board_manager:
  additional_urls: []
</code></pre>
<p>ถ้าต้องการจะเพิ่มรายการ <strong>Arduino Cores</strong> เช่น สำหรับบอร์ดไมโครคอนโทรลเลอร์
<strong>ESP8266</strong> และ <strong>ESP32</strong> มีดังนี้ โดยเพิ่มในส่วนที่มีชื่อว่า
<code>board_manager:</code> ในห้วข้อย่อย <code>additional_urls:</code></p>
<pre><code class="language-text"># Add 3rd party cores
$ nano $HOME/.arduino15/arduino-cli.yaml 

board_manager:
  additional_urls:
    - https://arduino.esp8266.com/stable/package_esp8266com_index.json
    - https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
    - https://github.com/earlephilhower/arduino-pico/releases/download/global/package_rp2040_index.json
</code></pre>
<p>บันทึกการเปลี่ยนแปลงลงไฟล์ โดยกด <code>Ctrl+o</code> กด <code>Enter</code> แล้วกด <code>Ctrl+x</code> เพื่อจบการทำงานของ <code>nano</code></p>
<p>จากนั้นให้ทำคำสั่งต่อไปนี้ เพื่ออัปเดตไฟล์ <code>package_xxx_index.json</code> สำหรับ <strong>Ardino Cores</strong>
(ไฟล์ที่เกี่ยวข้องจะถูกดาวน์โหลดมาจากอินเทอร์เน็ต ซึ่งดูได้จากข้อความเอาต์พุตเมื่อทำคำสั่ง)</p>
<pre><code class="language-text"># Update the index files of Arduino cores
$ arduino-cli core update-index

Downloading index: package_index.tar.bz2 downloaded
Downloading index: package_esp8266com_index.json downloaded
Downloading index: package_esp32_index.json downloaded
Downloading index: package_rp2040_index.json downloaded
...
</code></pre>
<p>&nbsp;</p>
<hr />
<h2 id="arduino-cores">&#9655; <strong>การค้นหาและติดตั้ง Arduino Cores</strong><a class="headerlink" href="#arduino-cores" title="Permanent link">#</a></h2>
<p>ถ้าต้องการดูรายชื่อของ <strong>Arduino Cores</strong> (พร้อมเวอร์ชันล่าสุด) ที่สามารถเลือกติดตั้งและใช้งานได้ ก็ทำคำสั่งดังนี้</p>
<pre><code class="language-text"># Search Arduino cores in Boards Managers
$ arduino-cli core search 

ID                    Version   Name                                                             
arduino:avr           1.8.6     Arduino AVR Boards                                               
arduino:mbed_edge     3.5.4     Arduino Mbed OS Edge Boards                                      
arduino:mbed_nano     3.5.4     Arduino Mbed OS Nano Boards                                      
arduino:mbed_nicla    3.5.5     Arduino Mbed OS Nicla Boards                                     
arduino:mbed_opta     3.5.4     Arduino Mbed OS Opta Boards                                      
arduino:mbed_portenta 3.5.4     Arduino Mbed OS Portenta Boards                                  
arduino:mbed_rp2040   3.5.4     Arduino Mbed OS RP2040 Boards                                    
arduino:megaavr       1.8.8     Arduino megaAVR Boards                                           
arduino:nrf52         1.0.2     Arduino nRF52 Boards                                             
arduino:sam           1.6.12    Arduino SAM Boards (32-bits ARM Cortex-M3)                       
arduino:samd          1.8.13    Arduino SAMD Boards (32-bits ARM Cortex-M0+)                     
emoro:avr             3.2.2     EMORO 2560                                                       
esp32:esp32           2.0.6     esp32                                                            
esp8266:esp8266       3.1.1     esp8266                                                          
....
</code></pre>
<p><img alt="" src="arduino_cli_ubuntu-3.png" /></p>
<p>หรือจะใช้คำสั่งเพื่อค้นหาและแสดงรายการตามชื่อของ <strong>Arduino Core</strong> แบบเจาะจง เช่น </p>
<pre><code class="language-text"># Search Arduino core for AVR
$ arduino-cli core search arduino:avr
ID          Version Name
arduino:avr 1.8.6   Arduino AVR Boards

$ arduino-cli core search arduino:megaavr
ID              Version Name
arduino:megaavr 1.8.8   Arduino megaAVR Boards

# Search Arduino core for ESP8266
$ arduino-cli core search esp8266
ID              Version Name
esp8266:esp8266 3.1.1   esp8266

# Search Arduino core for ESP32
$ arduino-cli core search esp32
ID          Version Name
esp32:esp32 2.0.6   esp32
</code></pre>
<p>ถ้าต้องการติดตั้ง <strong>Arduino Core</strong> และโปรแกรมต่าง ๆ ที่เกี่ยวข้อง
ก็ให้ทำคำสั่ง <code>arduino-cli core install &lt;core&gt;</code>
โดยที่ <code>&lt;core&gt;</code> หมายถึง ชื่อของ <strong>Arduino Core</strong></p>
<p>ตัวอย่างการติดตั้งสำหรับบอร์ด  <strong>AVR</strong> มีดังนี้ (และตัวอย่างข้อความเอาต์พุตเมื่อทำคำสั่ง)</p>
<pre><code class="language-text"># Install Arduino cores for AVR and corresponding tool dependencies.
$ arduino-cli core install arduino:avr

Downloading packages...
arduino:avr-gcc@7.3.0-atmel3.6.1-arduino7 downloaded
arduino:avrdude@6.3.0-arduino17 downloaded
arduino:arduinoOTA@1.3.0 downloaded
arduino:avr@1.8.6 downloaded
Installing arduino:avr-gcc@7.3.0-atmel3.6.1-arduino7...
arduino:avr-gcc@7.3.0-atmel3.6.1-arduino7 installed
Installing arduino:avrdude@6.3.0-arduino17...
arduino:avrdude@6.3.0-arduino17 installed
Installing arduino:arduinoOTA@1.3.0...
arduino:arduinoOTA@1.3.0 installed
Installing platform arduino:avr@1.8.6...
Configuring platform....
Platform arduino:avr@1.8.6 installed
</code></pre>
<p><img alt="" src="arduino_cli_ubuntu-4.png" /></p>
<p>สำหรับบอร์ด <strong>ESP8266</strong> และ <strong>ESP32</strong></p>
<pre><code class="language-text"># Install Arduino cores for ESP32 and ESP8266
$ arduino-cli core install esp32:esp32
$ arduino-cli core install esp8266:esp8266
</code></pre>
<p>สำหรับบอร์ด <strong>RP2040</strong> (<a href="https://github.com/earlephilhower/arduino-pico"><strong>Arduino-Pico core</strong></a>)</p>
<pre><code>$ arduino-cli core install rp2040:rp2040
</code></pre>
<p>ถ้าต้องการอัปเดต <strong>Arduino Cores</strong> ที่ได้ติดตั้งไว้แล้ว ให้เป็นเวอร์ชันล่าสุด ให้ทำคำสั่งต่อไปนี้</p>
<pre><code class="language-text"># Upgrade one or all installed Arduino cores to the latest version.
$ arduino-cli core upgrade
</code></pre>
<p>หรือจะอัปเดตเฉพาะบางรายการ เช่น สำหรับ <strong>Arduino Core for ESP32</strong></p>
<pre><code class="language-text">$ arduino-cli core upgrade esp32:esp32
</code></pre>
<p>เมื่อได้ติดตั้ง <strong>Arduino Cores</strong> ที่ได้เลือกใช้งานแล้ว ถัดไปก็เป็นคำสั่งเพื่อดูรายการบอร์ดไมโครคอนโทรลเลอร์
ที่สามารถเลือกใช้ได้  โดยใช้คำสั่ง 
<code>arduino-cli board listall &lt;board&gt;</code> โดยที่ <code>&lt;board&gt;</code> หมายถึง ชื่อบอร์ด
และ <strong>Arduino</strong> จะใช้ชื่อในรูปแบบที่เรียกว่า  <strong>FQBN</strong> (<strong>Fully Qualified Board Name</strong>)</p>
<pre><code class="language-bash"># List supported Arduino boards and their FQBN strings 
$ arduino-cli board listall arduino
</code></pre>
<p>หรือเจาะจงเฉพาะบอร์ด <code>arduino:avr</code></p>
<pre><code class="language-text"># List only Arduino-AVR boards
$ arduino-cli board listall arduino:avr

Board Name                       FQBN
Arduino Leonardo                 arduino:avr:leonardo
Arduino Mega or Mega 2560        arduino:avr:mega
Arduino Micro                    arduino:avr:micro
Arduino Mini                     arduino:avr:mini
Arduino Nano                     arduino:avr:nano
Arduino Pro or Pro Mini          arduino:avr:pro
Arduino Uno                      arduino:avr:uno
Arduino Uno Mini                 arduino:avr:unomini
Arduino Uno WiFi                 arduino:avr:unowifi
...
</code></pre>
<pre><code class="language-text">$ arduino-cli board listall arduino:megaavr

Board Name            FQBN
Arduino Nano Every    arduino:megaavr:nona4809
Arduino Uno WiFi Rev2 arduino:megaavr:uno2018
</code></pre>
<p><img alt="" src="arduino_cli_ubuntu-5.png" /></p>
<p>แสดงรายการบอร์ดไมโครคอนโทรลเลอร์ที่ใช้ชิป <strong>ESP32</strong> ของ <strong>WeMos Lolin</strong></p>
<pre><code class="language-text">$ arduino-cli board listall esp32:esp32:lolin
</code></pre>
<p><img alt="" src="arduino_cli_ubuntu-6.png" /></p>
<p>&nbsp;</p>
<hr />
<h2 id="arduino-libraries">&#9655; <strong>การค้นหาและติดตั้ง Arduino Libraries</strong><a class="headerlink" href="#arduino-libraries" title="Permanent link">#</a></h2>
<p>คำสั่งสำหรับค้นหาไลบรารี ตามชื่อที่ระบุ  สามารถทำได้ตามตัวอย่างดังนี้ เช่น ค้นหาและแสดงรายการที่มีชื่อเริ่มต้นด้วย
<code>Adafruit</code></p>
<pre><code class="language-text">$ arduino-cli lib search --names | grep -P &quot;^Name: \&quot;Adafruit.+\&quot;&quot;

Name: &quot;Adafruit 10DOF&quot;
Name: &quot;Adafruit 9DOF&quot;
Name: &quot;Adafruit ADS1X15&quot;
Name: &quot;Adafruit ADT7410 Library&quot;
Name: &quot;Adafruit ADXL343&quot;
Name: &quot;Adafruit ADXL345&quot;
Name: &quot;Adafruit ADXL375&quot;
...
</code></pre>
<p>ถ้าจะติดตั้งไลบรารี ก็ให้ทำคำสั่งในลักษณะนี้
<code>arduino-cli lib install &lt;lib&gt;</code>
โดยที่ <code>&lt;lib&gt;</code> เป็นชื่อไลบรารี</p>
<p>เช่น ติดตั้งไลบรารี <code>Adafruit NeoPixel</code> </p>
<p><img alt="" src="arduino_cli_ubuntu-7.png" /></p>
<hr />
<h2 id="arduino-sketch">&#9655; <strong>การสร้างและคอมไพล์ Arduino Sketch</strong><a class="headerlink" href="#arduino-sketch" title="Permanent link">#</a></h2>
<p>เริ่มต้นด้วยการสร้างโปรเจกต์สำหรับ <strong>Arduino Sketch</strong> เช่น ใช้ชื่อว่า <code>esp32_blink</code>
ซึ่งจะได้ไฟล์ชื่อ <code>./esp32_blink/esp32_blink.ino</code></p>
<pre><code class="language-text"># Set Arduino sketch name
$ SKETCH_NAME=esp32_blink

# Create a new Arduino sketch with the specified name
$ arduino-cli sketch new $SKETCH_NAME
</code></pre>
<p>จากนั้นเขียนโค้ดลงในไฟล์ <code>./esp32_blink/esp32_blink.ino</code> เช่น</p>
<pre><code class="language-c++">#include &lt;Arduino.h&gt;

void setup() {
  Serial.begin( 115200 );
  pinMode( LED_BUILTIN, OUTPUT );
}

void loop() {
  static uint32_t state = 0;
  digitalWrite( LED_BUILTIN, state ^= 1 );
  Serial.printf( &quot;LED state: %d&quot;, state );
  delay(500);
}
</code></pre>
<p>แล้วคอมไพล์โค้ด โดยเลือกบอร์ดไมโครคอนโทรลเลอร์เป็น <code>esp32:esp32:lolin32</code>
และให้ไดเรกทอรี <code>build</code> สำหรับเก็บไฟล์เอาต์พุตที่ได้จากการคอมไพล์โค้ด</p>
<pre><code>$ arduino-cli compile --fqbn esp32:esp32:lolin32 \
  --build-path $SKETCH_NAME/build $SKETCH_NAME
</code></pre>
<p>เมื่อคอมไพล์ได้สำเร็จแล้ว ลองดูไฟล์เอาต์พุตที่ได้</p>
<pre><code class="language-text">$ tree -L 2 $SKETCH_NAME/

esp32_blink/
├── build
│   ├── build_opt.h
│   ├── build.options.json
│   ├── compile_commands.json
│   ├── core
│   ├── esp32_blink.ino.bin
│   ├── esp32_blink.ino.bootloader.bin
│   ├── esp32_blink.ino.elf
│   ├── esp32_blink.ino.map
│   ├── esp32_blink.ino.partitions.bin
│   ├── includes.cache
│   ├── libraries
│   ├── libraries.cache
│   ├── partitions.csv
│   ├── preproc
│   └── sketch
├── debug.cfg
├── debug_custom.json
├── esp32_blink.ino
└── esp32.svd

5 directories, 15 files
</code></pre>
<p>&nbsp;</p>
<p>ถ้าจะอัปโหลดไฟล์เฟิร์มแวร์ไปยังบอร์ด ก็ทำคำสั่งในลักษณะนี้
(ในตัวอย่างได้เลือกใช้พอร์ตหมายเลข <code>/dev/ttyUSB0</code> ที่เชื่อมต่อกับบอร์ด <strong>ESP32</strong>)</p>
<pre><code class="language-text">$ arduino-cli upload -p /dev/ttyUSB0 \
  --fqbn esp32:esp32:lolin32 \
  --input-dir $SKETCH_NAME/build $SKETCH_NAME
</code></pre>
<p>&nbsp;</p>
<p>ถ้าใช้ <strong>Window PowerShell</strong> ก็มีรูปแบบการทำคำสั่งดังนี้ 
(ในตัวอย่างได้เลือกใช้พอร์ตหมายเลข <code>COM6</code> ที่เชื่อมต่อกับบอร์ด <strong>ESP32</strong>)</p>
<pre><code class="language-text"># Set a variable for the Sketch name
$SKETCH_NAME = &quot;esp32_blink&quot;

# Create a new sketch (but not overwrite)
arduino-cli sketch new $SKETCH_NAME

# Edit the Sketch file (.ino) with notepad.exe
notepad.exe &quot;$SKETCH_NAME/$SKETCH_NAME.ino&quot;

# Compile the sketch
arduino-cli compile --fqbn esp32:esp32:lolin32 `
  --build-path $SKETCH_NAME/build $SKETCH_NAME

# Upload the firmware file to the target board
arduino-cli upload -p COM6 `
  --fqbn esp32:esp32:lolin32 `
  --input-dir $SKETCH_NAME/build $SKETCH_NAME
</code></pre>
<hr />
<h2 id="_2">&#9655; <strong>กล่าวสรุป</strong><a class="headerlink" href="#_2" title="Permanent link">#</a></h2>
<p>บทความนี้นำเสนอ ตัวอย่างการใช้คำสั่งของ <strong>Arduino CLI</strong> ในเบื้องต้น สำหรับ <strong>Ubuntu Linux</strong>
และ <strong>Windows PowerShell</strong> </p>
<p>&nbsp;</p>
<hr />
<p><em>This work is licensed under a</em> <strong><em>Creative Commons Attribution-ShareAlike 4.0 International License</em></strong>.</p>
<p>Created: 2023-02-15 | Last Updated: 2023-02-20</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2021-2023 IoT Engineering Education, Bangkok/Thailand</a></p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
