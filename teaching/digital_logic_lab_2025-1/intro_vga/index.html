<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="RSP">
        <link rel="canonical" href="https://iot-kmutnb.github.io/blogs/teaching/digital_logic_lab_2025-1/intro_vga/">
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Tutorial: VGA Display Output Testing on the DE10 Lite FPGA Board - IoT Engineering Education</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../../css/brands.min.css" rel="stylesheet">
        <link href="../../../css/solid.min.css" rel="stylesheet">
        <link href="../../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../../css/extra.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/c.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/cpp.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/arduino.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/typescript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/vhdl.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/verilog.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/text.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/plaintext.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/matlab.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/julia.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script>
        <script>hljs.highlightAll();</script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-966FQ6RN6W"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', "G-966FQ6RN6W");
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">IoT Engineering Education</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#tutorial-vga-display-output-testing-on-the-de10-lite-fpga-board" class="nav-link">Tutorial: VGA Display Output Testing on the DE10 Lite FPGA Board</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#vga-display" class="nav-link">VGA Display</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="3"><a href="#vga-signals" class="nav-link">VGA Signals</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#signal-timing-specifications" class="nav-link">Signal Timing Specifications</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#examples-of-vga-timing-specs" class="nav-link">Examples of VGA Timing Specs</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#vga-interface-on-de10-lite-fpga-board" class="nav-link">VGA Interface on DE10 Lite FPGA Board</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#vga-controller-implementation" class="nav-link">VGA Controller Implementation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#vhdl-code-example-for-vga-display-testing" class="nav-link">VHDL Code Example for VGA Display Testing</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#fpga-pong-game" class="nav-link">FPGA Pong Game</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="tutorial-vga-display-output-testing-on-the-de10-lite-fpga-board"><strong>Tutorial: VGA Display Output Testing on the DE10 Lite FPGA Board</strong><a class="headerlink" href="#tutorial-vga-display-output-testing-on-the-de10-lite-fpga-board" title="Permanent link">#</a></h1>
<ul>
<li><a href="#vga-display"><strong>VGA Display</strong></a></li>
<li><a href="#signal-timing-specifications"><strong>Signal Timing Specifications</strong></a></li>
<li><a href="#examples-of-vga-timing-specs"><strong>Examples of VGA Timing Specs</strong></a></li>
<li><a href="#vga-interface-on-de10-lite-fpga-board"><strong>VGA Interface on DE10 Lite FPGA Board</strong></a></li>
<li><a href="#vga-controller-implementation"><strong>VGA Controller Implementation</strong></a></li>
<li><a href="#vhdl-code-example-for-vga-display-testing"><strong>VHDL Code Example for VGA Display Testing</strong></a></li>
<li><a href="#fpga-pong-game"><strong>FPGA Pong Game</strong></a></li>
</ul>
<hr />
<h2 id="vga-display"><strong>VGA Display</strong><a class="headerlink" href="#vga-display" title="Permanent link">#</a></h2>
<p><strong>VGA</strong> (<em>Video Graphics Array</em>) is a graphics transmission standard originally designed 
for <strong>CRT monitors</strong> and later used with <strong>LCD displays</strong>. 
Today, the use of VGA has declined and it has largely been replaced by newer standards
such as <strong>DVI-D</strong> and <strong>HDMI</strong>.</p>
<p>VGA works by scanning the display line by line from left to right (horizontal scan)
and from top to bottom (vertical scan), using a combination of RGB signals together 
with <code>HSYNC</code> and <code>VSYNC</code> synchronization pulses.</p>
<h3 id="vga-signals"><strong>VGA Signals</strong><a class="headerlink" href="#vga-signals" title="Permanent link">#</a></h3>
<ul>
<li><strong>Horizontal Sync</strong> (<code>HSYNC</code>, digital, active-low):
A synchronization pulse that defines the timing for each horizontal line on the display.</li>
<li><strong>Vertical Sync</strong> (<code>VSYNC</code>, digital, active-low):
A synchronization pulse that defines the timing for a new frame, starting from the top of the screen.</li>
<li><strong>RGB values</strong> (analog signals for red, green, and blue):
These signals define the color value of each pixel.
For example: With 4 bits per channel (R, G, B), the display can produce 
<script type="math/tex">16^3 = 4,096</script> colors. With 8 bits per channel, it can produce 
<script type="math/tex">256^3 = 16,777,216</script> colors.</li>
</ul>
<p>&nbsp;</p>
<hr />
<h2 id="signal-timing-specifications"><strong>Signal Timing Specifications</strong><a class="headerlink" href="#signal-timing-specifications" title="Permanent link">#</a></h2>
<p>The VGA timing specification is critical for proper image display. 
It is divided into horizontal and vertical timing requirements:</p>
<ol>
<li><strong>Horizontal Timing</strong> (per line, left to right):<ul>
<li><strong>Horizontal Visible Area (Active Video)</strong>: The period when actual pixel data is displayed.</li>
<li><strong>Front Porch</strong>: A short interval after the visible pixels and before the <code>HSYNC</code> pulse.</li>
<li><strong>HSYNC Pulse (active-low)</strong>: The synchronization period that signals the start of the next line.</li>
<li><strong>Back Porch</strong>: The interval after <code>HSYNC</code>, not visible, allowing the display to prepare new pixel data.</li>
</ul>
</li>
<li><strong>Vertical Timing</strong> (per frame, top to bottom):<ul>
<li><strong>Vertical Visible Area (Active Video)</strong>: The period when the full frame of pixels is displayed.</li>
<li><strong>Front Porch</strong>: The interval after all lines of a frame have been displayed and before the <code>VSYNC</code> pulse.</li>
<li><strong>VSYNC Pulse (active-low)</strong>: The synchronization signal that marks the start of a new frame at the top of the screen.</li>
<li><strong>Back Porch</strong>: The interval after <code>VSYNC</code>, not visible, allowing the display to prepare for the next frame.</li>
</ul>
</li>
</ol>
<p><img alt="" src="vga_timing.jpg" /></p>
<p><strong>Figure:</strong> <strong>VGA Signal Timing</strong></p>
<p>&nbsp;</p>
<hr />
<h2 id="examples-of-vga-timing-specs"><strong>Examples of VGA Timing Specs</strong><a class="headerlink" href="#examples-of-vga-timing-specs" title="Permanent link">#</a></h2>
<p>The tables below present the VGA timing specifications for the 640×480 and 800×600 resolutions.</p>
<p>1) <strong>VGA Timing Spec for 640x480, Frame Refresh Rate = 60Hz (Pixel Clock = ~25.2MHz)</strong></p>
<table>
<thead>
<tr>
<th>Timing Parameter</th>
<th>Horizontal (Pixels)</th>
<th>Vertical (Lines)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Active Video</strong></td>
<td>640</td>
<td>480</td>
</tr>
<tr>
<td><strong>Front Porch</strong></td>
<td>16</td>
<td>10</td>
</tr>
<tr>
<td><strong>Sync Pulse</strong></td>
<td>96</td>
<td>2</td>
</tr>
<tr>
<td><strong>Back Porch</strong></td>
<td>48</td>
<td>33</td>
</tr>
<tr>
<td><strong>Total Period</strong></td>
<td>800</td>
<td>525</td>
</tr>
</tbody>
</table>
<p>2) <strong>VGA Timing Spec for 800x600, Frame Refresh Rate = 72Hz (Pixel Clock = ~50 MHz</strong>)</p>
<table>
<thead>
<tr>
<th>Timing Parameter</th>
<th>Horizontal (Pixels)</th>
<th>Vertical (Lines)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Active Video</strong></td>
<td>800</td>
<td>600</td>
</tr>
<tr>
<td><strong>Front Porch</strong></td>
<td>56</td>
<td>37</td>
</tr>
<tr>
<td><strong>Sync Pulse</strong></td>
<td>120</td>
<td>6</td>
</tr>
<tr>
<td><strong>Back Porch</strong></td>
<td>64</td>
<td>23</td>
</tr>
<tr>
<td><strong>Total Period</strong></td>
<td>1040</td>
<td>666</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<hr />
<h2 id="vga-interface-on-de10-lite-fpga-board"><strong>VGA Interface on DE10 Lite FPGA Board</strong><a class="headerlink" href="#vga-interface-on-de10-lite-fpga-board" title="Permanent link">#</a></h2>
<p>From the circuit diagram, it can be seen that there is a <strong>D-Sub (15-pin) connector</strong> for VGA. 
In addition, an <strong>R-2R resistor ladder DAC</strong> is used to convert a 4-bit digital signal into an analog signal for each color channel (R, G, B).</p>
<p><img alt="" src="vga_de10lite.jpg" /></p>
<p><strong>Figure:</strong> Resistor Network and D-Sub (15-pin) Connector for VGA</p>
<hr />
<h2 id="vga-controller-implementation"><strong>VGA Controller Implementation</strong><a class="headerlink" href="#vga-controller-implementation" title="Permanent link">#</a></h2>
<p>The main function of a VGA controller is to generate the horizontal and vertical synchronization signals (<code>HSYNC</code> and <code>VSYNC</code>). In addition, it maintains counters that define the pixel coordinates (x and y) on the display and provides a signal indicating whether the current position is within the active display area or during the blanking period.</p>
<p>Typically, the VGD controller has the inputs and outputs:</p>
<ul>
<li><strong>Clock</strong> (input): <ul>
<li>This is the pixel clock. It defines how fast pixels are output to the display.</li>
<li>Every rising edge of this clock advances the x counter (horizontal pixel position).</li>
</ul>
</li>
<li><strong>Reset</strong> (input):<ul>
<li>This signal resets the counters and sync generator back to the initial state.</li>
</ul>
</li>
<li><strong>HSYNC</strong> (output):<ul>
<li>It is a pulse that signals the end of each horizontal line.
  The monitor uses this to know when to return the pixel index (in LCDs) to the start of the next line.</li>
</ul>
</li>
<li><strong>VSYNC</strong> (output):<ul>
<li>A pulse that signals the end of a frame (all lines displayed).
 The monitor uses this to know when to start the next frame from the top-left corner.</li>
</ul>
</li>
<li><strong>Active Area</strong> (output):<ul>
<li>A logical signal that is high when the current (x, y) is inside the visible display area.</li>
</ul>
</li>
<li><strong>Pixel Counter</strong> for x and y direction (output):<ul>
<li>The horizontal pixel counter (x) runs from 0 up to total pixels per line.</li>
<li>The vertical line counter (y) runs from 0 up to total lines per frame.</li>
<li>The (x,y) pixel counter gives the current pixel position in the raster scan.</li>
</ul>
</li>
</ul>
<hr />
<h2 id="vhdl-code-example-for-vga-display-testing"><strong>VHDL Code Example for VGA Display Testing</strong><a class="headerlink" href="#vhdl-code-example-for-vga-display-testing" title="Permanent link">#</a></h2>
<p>This VHDL code implements a VGA test signal generator, which will be tested on 
the DE10 Lite FPGA board.</p>
<p>The VHDL process <code>rgb_gen_proc</code> generates the pixel color values 
(4-bit each for R, G, and B) based on the current pixel position (<code>h_count</code>, <code>v_count</code>).</p>
<p>This creates a test pattern image on the VGA display.
The screen is divided vertically into three main regions:</p>
<ul>
<li>Top 2/3: Seven vertical color bars (white, yellow, cyan, green, magenta, red, blue).</li>
<li>Middle stripe: A black background with small colored patches.</li>
<li>Bottom row: Alternating dark blue and white rectangles</li>
</ul>
<pre><code class="language-VHDL">LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.NUMERIC_STD.ALL;

ENTITY de10lite_vga_demo IS
    PORT (
       clk     : IN  STD_LOGIC; -- 50 MHz
       reset_n : IN  STD_LOGIC; -- async. reset (active-low)
       vga_hs  : OUT STD_LOGIC; -- VGA HSYNC output
       vga_vs  : OUT STD_LOGIC; -- VGA VSYNC output
       vga_r, vga_g, vga_b : OUT STD_LOGIC_VECTOR(3 DOWNTO 0) -- RGB
    );
END de10lite_vga_demo;

ARCHITECTURE behavioral OF de10lite_vga_demo IS
    -- VGA timing constants (800x600@72Hz)
    CONSTANT H_ACTIVE_AREA  : INTEGER := 800;
    CONSTANT V_ACTIVE_AREA  : INTEGER := 600;

    CONSTANT H_FRONT_PORCH  : INTEGER := 56;
    CONSTANT H_SYNC_PULSE   : INTEGER := 120;
    CONSTANT H_BACK_PORCH   : INTEGER := 64;
    CONSTANT H_TOTAL        : INTEGER := H_ACTIVE_AREA + H_FRONT_PORCH
                                       + H_SYNC_PULSE  + H_BACK_PORCH;

    CONSTANT V_FRONT_PORCH  : INTEGER := 37;
    CONSTANT V_SYNC_PULSE   : INTEGER := 6;
    CONSTANT V_BACK_PORCH   : INTEGER := 23;
    CONSTANT V_TOTAL        : INTEGER := V_ACTIVE_AREA + V_FRONT_PORCH 
                                       + V_SYNC_PULSE  + V_BACK_PORCH;

    SIGNAL h_count, v_count : INTEGER := 0;
    SIGNAL visible_area     : STD_LOGIC := '0';

    SIGNAL vga_clk          : STD_LOGIC := '0';
    SIGNAL hsync, vsync     : STD_LOGIC := '1';

BEGIN

    vga_clk &lt;= clk; -- use 50MHz for VGA clock

    -- Horizontal / vertical (x,y) counters
    vga_sync_proc : PROCESS (vga_clk, reset_n)
    BEGIN
        IF reset_n = '0' THEN
            h_count &lt;= 0;
            v_count &lt;= 0;
        ELSIF rising_edge(vga_clk) THEN
            IF h_count = H_TOTAL - 1 THEN
                h_count &lt;= 0;
                IF v_count = V_TOTAL - 1 THEN
                    v_count &lt;= 0;
                ELSE
                    v_count &lt;= v_count + 1;
                END IF;
            ELSE
                h_count &lt;= h_count + 1;
            END IF;
        END IF;
    END PROCESS;

    visible_area &lt;= '1' WHEN (h_count &lt; H_ACTIVE_AREA AND v_count &lt; V_ACTIVE_AREA)
                    ELSE '0';

    -- Generate syncs
    hsync &lt;= '0' WHEN (h_count &gt;= H_ACTIVE_AREA + H_FRONT_PORCH AND 
                       h_count &lt; H_ACTIVE_AREA + H_FRONT_PORCH + H_SYNC_PULSE)
             ELSE '1';

    vsync &lt;= '0' WHEN (v_count &gt;= V_ACTIVE_AREA + V_FRONT_PORCH AND 
                       v_count &lt; V_ACTIVE_AREA + V_FRONT_PORCH + V_SYNC_PULSE)
             ELSE '1';

    -- Create registered HSYNC and VSYNC signal for output
    PROCESS (vga_clk)
    BEGIN
        IF rising_edge(vga_clk) THEN
            vga_hs &lt;= hsync;
            vga_vs &lt;= vsync;
        END IF;
    END PROCESS;

    --------------------------------------------------------------------------
    -- Test pattern: defines the R,G,B values based on v_count and h_count
    --------------------------------------------------------------------------
    rgb_gen_proc: PROCESS (vga_clk)
        VARIABLE r_value, g_value, b_value : STD_LOGIC_VECTOR(3 DOWNTO 0);
        CONSTANT bar_w : INTEGER := H_ACTIVE_AREA / 7;  -- 7 color bars
    BEGIN
        IF rising_edge(vga_clk) THEN
            r_value := &quot;0000&quot;; g_value := &quot;0000&quot;; b_value := &quot;0000&quot;; --default

            IF visible_area = '1' THEN
                -- Divide vertically: top 2/3, middle stripe, bottom rectangles
                IF v_count &lt; (V_ACTIVE_AREA * 2 / 3) THEN
                    -- Top 2/3 of screen: 7 color bars
                    CASE (h_count / bar_w) IS
                        WHEN 0 =&gt;  r_value := &quot;1111&quot;; 
                                   g_value := &quot;1111&quot;; 
                                   b_value := &quot;1111&quot;;  -- White
                        WHEN 1 =&gt;  r_value := &quot;1111&quot;; 
                                   g_value := &quot;1111&quot;; 
                                   b_value := &quot;0000&quot;;  -- Yellow
                        WHEN 2 =&gt;  r_value := &quot;0000&quot;; 
                                   g_value := &quot;1111&quot;; 
                                   b_value := &quot;1111&quot;;  -- Cyan
                        WHEN 3 =&gt;  r_value := &quot;0000&quot;; 
                                   g_value := &quot;1111&quot;; 
                                   b_value := &quot;0000&quot;;  -- Green
                        WHEN 4 =&gt;  r_value := &quot;1111&quot;; 
                                   g_value := &quot;0000&quot;; 
                                   b_value := &quot;1111&quot;;  -- Magenta
                        WHEN 5 =&gt;  r_value := &quot;1111&quot;; 
                                   g_value := &quot;0000&quot;; 
                                   b_value := &quot;0000&quot;;  -- Red
                        WHEN OTHERS =&gt; 
                                   r_value := &quot;0000&quot;; 
                                   g_value := &quot;0000&quot;; 
                                   b_value := &quot;1111&quot;; -- Blue
                    END CASE;

                ELSIF v_count &lt; (V_ACTIVE_AREA * 5 / 6) THEN
                    -- Middle stripe: black background with small colored patches
                    r_value := &quot;0000&quot;; 
                    g_value := &quot;0000&quot;; 
                    b_value := &quot;0000&quot;; -- default black
                    CASE (h_count / bar_w) IS
                        WHEN 0 =&gt; r_value := &quot;0000&quot;; 
                                  g_value := &quot;0000&quot;; 
                                  b_value := &quot;1111&quot;; -- small blue
                        WHEN 1 =&gt; r_value := &quot;1111&quot;; 
                                  g_value := &quot;0000&quot;;
                                  b_value := &quot;1111&quot;; -- magenta
                        WHEN 2 =&gt; r_value := &quot;1111&quot;; 
                                  g_value := &quot;1111&quot;; 
                                  b_value := &quot;1111&quot;; -- white patch
                        WHEN 3 =&gt; r_value := &quot;0000&quot;; 
                                  g_value := &quot;1111&quot;; 
                                  b_value := &quot;1111&quot;; -- cyan patch
                        WHEN OTHERS =&gt; null;
                    END CASE;

                ELSE
                    -- Bottom row: alternating dark blue / white rectangles
                    IF ( (h_count / (H_ACTIVE_AREA/4)) MOD 2 = 0 ) THEN
                        r_value := &quot;0000&quot;;
                        g_value := &quot;0000&quot;; 
                        b_value := &quot;0111&quot;; -- dark blue
                    ELSE
                        r_value := &quot;1111&quot;; 
                        g_value := &quot;1111&quot;; 
                        b_value := &quot;1111&quot;; -- white
                    END IF;
                END IF;
            END IF;

            -- Create registered R,G,B signals for output
            vga_r &lt;= r_value;
            vga_g &lt;= g_value;
            vga_b &lt;= b_value;
        END IF;
    END PROCESS;
    --------------------------------------------------------------------------

END behavioral
</code></pre>
<p>A Tcl script is provided to handle FPGA pin assignments on the DE10 Lite FPGA board.</p>
<pre><code class="language-Tcl">#set_global_assignment -name DEVICE 10M50DAF484C7G
#set_global_assignment -name FAMILY &quot;MAX 10&quot;

set_instance_assignment -name IO_STANDARD &quot;3.3-V LVTTL&quot; -to *
set_instance_assignment -name IO_STANDARD &quot;3.3 V Schmitt Trigger&quot; -to reset_n

set_location_assignment PIN_P11  -to clk
set_location_assignment PIN_B8   -to reset_n
set_location_assignment PIN_P1   -to vga_b[0]
set_location_assignment PIN_T1   -to vga_b[1]
set_location_assignment PIN_P4   -to vga_b[2]
set_location_assignment PIN_N2   -to vga_b[3]
set_location_assignment PIN_W1   -to vga_g[0]
set_location_assignment PIN_T2   -to vga_g[1]
set_location_assignment PIN_R2   -to vga_g[2]
set_location_assignment PIN_R1   -to vga_g[3]
set_location_assignment PIN_AA1  -to vga_r[0]
set_location_assignment PIN_V1   -to vga_r[1]
set_location_assignment PIN_Y2   -to vga_r[2]
set_location_assignment PIN_Y1   -to vga_r[3]
set_location_assignment PIN_N3   -to vga_hs
set_location_assignment PIN_N1   -to vga_vs
</code></pre>
<p><img alt="" src="lcd_test-1.jpg" /></p>
<p><strong>Figure:</strong> Test pattern shown on a LCD monitor</p>
<p>When testing the VGA signal with an LCD monitor, make sure to use the original (1:1) mode setting, not the widescreen mode.</p>
<p><img alt="" src="vga_adj-1.jpg" /></p>
<p><img alt="" src="vga_adj-2.jpg" /></p>
<p><strong>Figure:</strong> Changing from Widescreen to Original (1:1) Setting</p>
<p>&nbsp;</p>
<hr />
<h2 id="fpga-pong-game"><strong>FPGA Pong Game</strong><a class="headerlink" href="#fpga-pong-game" title="Permanent link">#</a></h2>
<p>This VHDL code implements a simple <strong>Pong-style game</strong> featuring a single horizontal paddle 
and a circular ball. Each time the ball hits the paddle, a hit counter is incremented, 
and its value is displayed on a three-digit, seven-segment display.</p>
<p><strong>Timing considerations:</strong></p>
<ul>
<li>The VHDL process <code>rgb_gen_proc</code> generates the R, G, and B values for the VGA output.
All calculations (such as the circle equation, comparisons, and other operations) are performed within the same clock cycle as the register update.</li>
<li>As a result, the critical path begins at the <code>h_count</code> and v_count<code>registers, 
passes through the combinational logic (including comparators, adders, and multipliers),
and ends at the input of the</code>pixel_r<code>,</code>pixel_g<code>, and</code>pixel_b` registers.</li>
<li>This long combinational path can significantly affect timing closure and may make it difficult to meet the 50 MHz clock requirement unless the logic is simplified or pipelined.</li>
</ul>
<pre><code class="language-VHDL">LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.NUMERIC_STD.ALL;

ENTITY de10lite_vga_demo IS
    PORT (
        clk        : IN STD_LOGIC; -- 50MHz for VGA
        reset_n    : IN STD_LOGIC;
        move_left  : IN STD_LOGIC;
        move_right : IN STD_LOGIC;
        vga_hs     : OUT STD_LOGIC;
        vga_vs     : OUT STD_LOGIC;
        vga_r, vga_g, vga_b : OUT STD_LOGIC_VECTOR(3 DOWNTO 0);
        hex0      : OUT STD_LOGIC_VECTOR(7 DOWNTO 0);
        hex1      : OUT STD_LOGIC_VECTOR(7 DOWNTO 0);
        hex2      : OUT STD_LOGIC_VECTOR(7 DOWNTO 0)
    );
END de10lite_vga_demo;

ARCHITECTURE behavioral OF de10lite_vga_demo IS

    -- VGA timing constants
    CONSTANT H_ACTIVE : INTEGER := 800;
    CONSTANT V_ACTIVE : INTEGER := 600;
    CONSTANT H_FP     : INTEGER := 56;
    CONSTANT H_SYNC   : INTEGER := 120;
    CONSTANT H_BP     : INTEGER := 64;
    CONSTANT H_TOTAL  : INTEGER := H_ACTIVE + H_FP + H_SYNC + H_BP;

    CONSTANT V_FP     : INTEGER := 37;
    CONSTANT V_SYNC   : INTEGER := 6;
    CONSTANT V_BP     : INTEGER := 23;
    CONSTANT V_TOTAL  : INTEGER := V_ACTIVE + V_FP + V_SYNC + V_BP;

    SIGNAL h_count, v_count : INTEGER := 0;
    SIGNAL visible_area : STD_LOGIC := '0';
    SIGNAL hsync, vsync : STD_LOGIC := '1';

    -- Paddle
    CONSTANT PADDLE_WIDTH  : INTEGER := 100;
    CONSTANT PADDLE_HEIGHT : INTEGER := 12;
    CONSTANT PADDLE_STEP   : INTEGER := 5;
    CONSTANT PADDLE_Y : INTEGER := V_ACTIVE - PADDLE_HEIGHT - 10;
    -- The paddle’s x position changes when a move L/R button is pressed.
    SIGNAL paddle_x   : INTEGER := (H_ACTIVE - PADDLE_WIDTH)/2;

    CONSTANT CLK_FREQ : INTEGER := 50000000; -- 50 MHz
    CONSTANT PADDLE_CNT_MAX : INTEGER := CLK_FREQ / 50;
    SIGNAL paddle_timer     : INTEGER := 0;

    -- Ball
    SIGNAL ball_timer       : INTEGER := 0;
    SIGNAL ball_x, ball_y   : INTEGER := 400;
    SIGNAL ball_dx, ball_dy : INTEGER := 1;
    CONSTANT BALL_SIZE      : INTEGER := 16;
    CONSTANT BALL_RADIUS    : INTEGER := BALL_SIZE/2;
    CONSTANT BALL_CNT_MAX   : INTEGER := CLK_FREQ / 200;

    -- Hit counter
    SIGNAL hit_cnt : INTEGER RANGE 0 TO 999 := 0;

    -- VGA RGB output
    SIGNAL pixel_r, pixel_g, pixel_b : STD_LOGIC_VECTOR(3 DOWNTO 0) 
                                       := (OTHERS =&gt; '0');

    -- 7-segment BCD encoding
    FUNCTION bcd_to_7seg(digit : IN INTEGER) RETURN STD_LOGIC_VECTOR IS
    BEGIN
        CASE digit IS -- Common anode
            WHEN 0 =&gt; RETURN &quot;11000000&quot;; 
            WHEN 1 =&gt; RETURN &quot;11111001&quot;;
            WHEN 2 =&gt; RETURN &quot;10100100&quot;;
            WHEN 3 =&gt; RETURN &quot;10110000&quot;;
            WHEN 4 =&gt; RETURN &quot;10011001&quot;;
            WHEN 5 =&gt; RETURN &quot;10010010&quot;;
            WHEN 6 =&gt; RETURN &quot;10000010&quot;;
            WHEN 7 =&gt; RETURN &quot;11111000&quot;;
            WHEN 8 =&gt; RETURN &quot;10000000&quot;;
            WHEN 9 =&gt; RETURN &quot;10010000&quot;;
            WHEN OTHERS =&gt; RETURN &quot;11111111&quot;;
        END CASE;
    END FUNCTION;

BEGIN

    -- VGA counters
    PROCESS (clk, reset_n)
    BEGIN
        IF reset_n = '0' THEN
            h_count &lt;= 0;
            v_count &lt;= 0;
        ELSIF rising_edge(clk) THEN
            IF h_count = H_TOTAL - 1 THEN
                h_count &lt;= 0;
                IF v_count = V_TOTAL - 1 THEN
                    v_count &lt;= 0;
                ELSE
                    v_count &lt;= v_count + 1;
                END IF;
            ELSE
                h_count &lt;= h_count + 1;
            END IF;
        END IF;
    END PROCESS;

    visible_area &lt;= '1' WHEN (h_count &lt; H_ACTIVE AND v_count &lt; V_ACTIVE) 
             ELSE '0';

    hsync &lt;= '0' WHEN (h_count &gt;= H_ACTIVE + H_FP AND 
                       h_count &lt; H_ACTIVE + H_FP + H_SYNC) 
             ELSE '1';
    vsync &lt;= '0' WHEN (v_count &gt;= V_ACTIVE + V_FP AND
                       v_count &lt; V_ACTIVE + V_FP + V_SYNC) 
             ELSE '1';

    PROCESS (clk)
    BEGIN
        IF rising_edge(clk) THEN
            vga_hs &lt;= hsync;
            vga_vs &lt;= vsync;
        END IF;
    END PROCESS;

    -- Paddle control
    PROCESS (clk, reset_n)
    BEGIN
        IF reset_n = '0' THEN
            paddle_x &lt;= (H_ACTIVE - PADDLE_WIDTH)/2;
            paddle_timer &lt;= 0;
        ELSIF rising_edge(clk) THEN
            IF paddle_timer &lt; PADDLE_CNT_MAX - 1 THEN
                paddle_timer &lt;= paddle_timer + 1;
            ELSE
                paddle_timer &lt;= 0;
                IF move_left = '1' AND paddle_x &gt; 0 THEN
                    paddle_x &lt;= paddle_x - PADDLE_STEP;
                ELSIF move_right = '1' AND paddle_x &lt; H_ACTIVE-PADDLE_WIDTH THEN
                    paddle_x &lt;= paddle_x + PADDLE_STEP;
                END IF;
            END IF;
        END IF;
    END PROCESS;

    -- Ball movement
    PROCESS (clk, reset_n)
        VARIABLE next_x, next_y : INTEGER;
    BEGIN
        IF reset_n = '0' THEN
            ball_timer &lt;= 0;
            ball_x  &lt;= H_ACTIVE/2;
            ball_y  &lt;= V_ACTIVE/2;
            ball_dx &lt;= 1;
            ball_dy &lt;= 1;
            hit_cnt &lt;= 0;

        ELSIF rising_edge(clk) THEN
            IF ball_timer &lt; BALL_CNT_MAX - 1 THEN
                ball_timer &lt;= ball_timer + 1;
            ELSE
                ball_timer &lt;= 0;

                -- next position
                next_x := ball_x + ball_dx;
                next_y := ball_y + ball_dy;

                -- wall collision
                IF next_x - BALL_RADIUS &lt;= 0 OR 
                   next_x + BALL_RADIUS &gt;= H_ACTIVE 
                THEN
                    ball_dx &lt;= - ball_dx;
                    next_x := ball_x + ball_dx;
                END IF;

                IF next_y - BALL_RADIUS &lt;= 0 THEN
                    ball_dy &lt;= - ball_dy;
                    next_y := ball_y + ball_dy;
                END IF;

                -- paddle collision
                IF next_x + BALL_RADIUS &gt; paddle_x AND 
                   next_x - BALL_RADIUS &lt; paddle_x + PADDLE_WIDTH AND
                   next_y + BALL_RADIUS &gt; PADDLE_Y AND 
                   next_y - BALL_RADIUS &lt; PADDLE_Y + PADDLE_HEIGHT 
                THEN
                    ball_dy &lt;= - ABS(ball_dy);
                    next_y := PADDLE_Y - BALL_RADIUS;
                    hit_cnt &lt;= hit_cnt + 1;
                END IF;

                -- update ball
                ball_x &lt;= next_x;
                ball_y &lt;= next_y;

                -- reset if miss
                IF next_y - BALL_RADIUS &gt; V_ACTIVE THEN
                    ball_x &lt;= H_ACTIVE/2;
                    ball_y &lt;= V_ACTIVE/2;
                    ball_dx &lt;= 1;
                    ball_dy &lt;= 1;
                    hit_cnt &lt;= 0;
                END IF;
            END IF;
        END IF;
    END PROCESS;

    -- VGA pixel generator
    rgb_gen_proc: PROCESS (clk)
        VARIABLE dx, dy : INTEGER;
    BEGIN
        IF rising_edge(clk) THEN
            pixel_r &lt;= &quot;0000&quot;; pixel_g &lt;= &quot;0000&quot;; pixel_b &lt;= &quot;0000&quot;; --default

            IF visible_area = '1' THEN
                -- paddle
                IF h_count &gt;= paddle_x AND 
                   h_count &lt; paddle_x + PADDLE_WIDTH AND
                   v_count &gt;= PADDLE_Y AND 
                   v_count &lt; PADDLE_Y + PADDLE_HEIGHT 
                THEN
                    pixel_r &lt;= &quot;1111&quot;;
                    pixel_g &lt;= &quot;1111&quot;;
                    pixel_b &lt;= &quot;1111&quot;;
                END IF;

                -- ball (circle)
                dx := h_count - ball_x;
                dy := v_count - ball_y;
                IF dx * dx + dy * dy &lt;= BALL_RADIUS * BALL_RADIUS THEN
                    pixel_r &lt;= &quot;1111&quot;;
                    pixel_g &lt;= &quot;0000&quot;;
                    pixel_b &lt;= &quot;0000&quot;;
                END IF;

                -- frame
                IF h_count = 0 OR h_count = H_ACTIVE - 1 OR 
                   v_count = 0 OR v_count = V_ACTIVE - 1 
                THEN
                    pixel_r &lt;= &quot;1111&quot;;
                    pixel_g &lt;= &quot;1111&quot;;
                    pixel_b &lt;= &quot;0000&quot;;
                END IF;
            END IF;
        END IF;
    END PROCESS;

    vga_r &lt;= pixel_r;
    vga_g &lt;= pixel_g;
    vga_b &lt;= pixel_b;

    -- HEX display (hit_cnt)
    PROCESS (hit_cnt)
        VARIABLE h0, h1, h2 : INTEGER;
    BEGIN
        h0 := hit_cnt MOD 10;
        h1 := (hit_cnt/10) MOD 10;
        h2 := (hit_cnt/100) MOD 10;

        hex0 &lt;= bcd_to_7seg(h0);
        hex1 &lt;= bcd_to_7seg(h1);
        hex2 &lt;= bcd_to_7seg(h2);
    END PROCESS;

END behavioral;
</code></pre>
<p><img alt="" src="pong_game_vga_demo.jpg" /></p>
<p><strong>Figure:</strong> FPGA Pong game demo</p>
<p>&nbsp;</p>
<hr />
<p><em>This work is licensed under a</em> <strong><em>Creative Commons Attribution-ShareAlike 4.0 International License</em></strong>.</p>
<p>Created: 2025-09-25 | Last Updated: 2025-09-25</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2021-2025 IoT Engineering Education, Bangkok/Thailand</a></p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
