<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="RSP">
        <link rel="canonical" href="https://iot-kmutnb.github.io/blogs/wokwi/wokwi-vscode/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>แนะนำการใช้งาน VS Code IDE + Wokwi - IoT Engineering Education</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../css/extra.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/c.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/cpp.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/arduino.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/typescript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/vhdl.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/verilog.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/text.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/plaintext.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/matlab.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/julia.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script>
        <script>hljs.highlightAll();</script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-966FQ6RN6W"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', "G-966FQ6RN6W");
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">IoT Engineering Education</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#vs-code-ide-wokwi" class="nav-link">แนะนำการใช้งาน VS Code IDE + Wokwi</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#wokwi" class="nav-link">&#9655; Wokwi</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#wokwi-extension-vs-code-ide" class="nav-link">&#9655; การติดตั้ง Wokwi Extension สำหรับ VS Code IDE</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#arduino-cli" class="nav-link">&#9655; การติดตั้งและใช้งาน Arduino CLI</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#platformio-pio-cli" class="nav-link">&#9655; การติดตั้งและใช้งาน PlatformIO (PIO) CLI</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#avr-libc-arduino-uno" class="nav-link">&#9655; ตัวอย่างการใช้งานและเขียนโค้ด AVR LibC สำหรับบอร์ด Arduino Uno</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#arduino-esp32" class="nav-link">&#9655; ตัวอย่างการใช้งานและเขียนโค้ด Arduino สำหรับบอร์ด ESP32</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_1" class="nav-link">&#9655; กล่าวสรุป</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="vs-code-ide-wokwi">แนะนำการใช้งาน VS Code IDE + Wokwi<a class="headerlink" href="#vs-code-ide-wokwi" title="Permanent link">#</a></h1>
<hr />
<h2 id="wokwi">&#9655; <strong>Wokwi</strong><a class="headerlink" href="#wokwi" title="Permanent link">#</a></h2>
<p><strong>Wokwi</strong> คืออะไร?</p>
<ul>
<li>เป็นซอฟต์แวร์ประเภท <strong>Web Application</strong> สำหรับการเขียนโค้ดและจำลองการทำงานของไมโครคอนโทรลเลอร์</li>
<li>ทำงานแบบออนไลน์ (<strong>Online Simulator</strong>) ทำงานผ่าน เว็บเบราว์เซอร์โดยตรง 
ผู้ใช้ไม่จำเป็นต้องติดตั้งโปรแกรม ลงในเครื่อง</li>
<li>พัฒนาเพื่อช่วยให้ผู้ใช้สามารถ ทดสอบและพัฒนาโค้ดได้โดยไม่ต้องมีฮาร์ดแวร์จริง
เหมาะสำหรับการเรียนรู้และฝึกเขียนโปรแกรมไมโครคอนโทรลเลอร์ในเบื้องต้น</li>
<li>เริ่มต้นพัฒนาในปี ค.ศ. 2019</li>
<li>ผู้พัฒนาหลักคือ <strong>Uri Shaked</strong> นักพัฒนาซอฟต์แวร์ชาวอิสราเอล</li>
<li>รองรับการเขียนโปรแกรมหลายภาษาและแพลตฟอร์ม เช่น<ul>
<li><strong>Arduino (C/C++)</strong></li>
<li><strong>MicroPython</strong></li>
<li><strong>Rust</strong></li>
<li><strong>C/C++</strong></li>
<li><strong>Verilog</strong> (Digital Logic Design)</li>
</ul>
</li>
<li>รองรับบอร์ดไมโครคอนโทรลเลอร์ยอดนิยม เช่น<ul>
<li><strong>Arduino</strong> เช่น <a href="https://docs.wokwi.com/parts/wokwi-arduino-uno"><strong>Arduino Uno</strong></a>,
   <a href="https://docs.wokwi.com/parts/wokwi-arduino-nano"><strong>Arduino Nano</strong></a>,
   และ <a href="https://docs.wokwi.com/parts/wokwi-arduino-mega"><strong>Arduino Mega 2560</strong></a></li>
<li><a href="https://docs.wokwi.com/guides/esp32"><strong>ESP32 / ESP32-S3 / ESP32-C3</strong></a></li>
<li><a href="https://docs.wokwi.com/parts/wokwi-pi-pico"><strong>Raspberry Pi Pico</strong></a></li>
<li><a href="https://docs.wokwi.com/parts/board-st-nucleo-c031c6"><strong>STM32 Nucleo C031</strong></a>,
  <a href="https://docs.wokwi.com/parts/board-st-nucleo-l031k6"><strong>STM32 Nucleo32 L031K6</strong></a></li>
<li>ดูรายการฮาร์ดแวร์ได้จาก <a href="https://docs.wokwi.com/getting-started/supported-hardware"><code>docs.wokwi.com/getting-started/supported-hardware</code></a></li>
</ul>
</li>
<li>จำลองการทำงานของไมโครคอนโทรลเลอร์ ร่วมกับอุปกรณ์รอบข้าง (<strong>Peripherals</strong>) เช่น<ul>
<li><strong>LED</strong>, <strong>Button</strong>, <strong>LCD 16x2 I2C</strong>, <strong>OLED I2C</strong></li>
<li>ดูรายการ <strong>Wokwi Element</strong> ได้จาก <a href="https://elements.wokwi.com/"><code>elements.wokwi.com/</code></a></li>
</ul>
</li>
<li>มี <strong>Serial Monitor</strong> สำหรับตรวจสอบผลลัพธ์การทำงานของโปรแกรม</li>
<li>มี <a href="https://github.com/wokwi/wokwi-cli"><code>wokwi-cli</code></a> สำหรับใช้งานในรูปแบบ <strong>Command Line</strong></li>
<li>มี <a href="https://docs.wokwi.com/vscode/getting-started"><strong>Wokwi for VS Code</strong></a> ให้ใช้งานแบบ <strong>Offline</strong> ได้</li>
</ul>
<p><strong>คำเตือน</strong>: Wokwi Simulator สามารถใช้สำหรับทดสอบโค้ดด้วยการจำลองการทำงานของไมโครคอนโทรลเลอร์ได้
อย่างไรก็ตาม ฟังก์ชันการทำงานของฮาร์ดแวร์บางส่วนอาจยังไม่รองรับหรือไม่ครอบคลุมทั้งหมด</p>
<p><strong>Wokwi</strong> เปิดบริการให้ใช้งาน มีทั้งแบบฟรี และแบบมีค่าใช้จ่ายรายเดือน จำแนกได้ดังนี้
โดยอ้างอิงจากเว็บ <a href="https://wokwi.com/pricing"><code>wokwi.com/pricing</code></a> </p>
<ul>
<li><strong>Community plan</strong> (ฟรี)<ul>
<li>ฟรีสำหรับ งานส่วนตัว / โครงการเปิดเผย (open-source)</li>
<li>สามารถสร้างโปรเจกต์สาธารณะไม่จำกัด</li>
</ul>
</li>
<li><strong>Hobby &amp; Hobby+ plan</strong><ul>
<li>เหมาะสำหรับผู้ใช้งาน งานส่วนตัวขั้นสูงขึ้น แต่มีค่าใช้จ่ายรายเดือน</li>
</ul>
</li>
<li><strong>Pro</strong><ul>
<li>สำหรับโปรเจกต์เชิงพาณิชย์หรือผู้ใช้ที่ต้องการสมรรถนะสูงขึ้น</li>
</ul>
</li>
<li><strong>University Classroom</strong> (สำหรับการศึกษา / สถาบัน)</li>
</ul>
<p><img alt="" src="wokwi_pricing_2025.jpg" /></p>
<p>รูป: <strong>Wokwi Pricing (2025)</strong></p>
<hr />
<h2 id="wokwi-extension-vs-code-ide">&#9655; <strong>การติดตั้ง Wokwi Extension</strong> สำหรับ <strong>VS Code IDE</strong><a class="headerlink" href="#wokwi-extension-vs-code-ide" title="Permanent link">#</a></h2>
<p>ขั้นตอนมีดังนี้</p>
<ol>
<li>ในการติดตั้ง <strong>VS Code IDE</strong> หากยังไม่เคยใช้งาน ให้ดาวน์โหลดและติดตั้ง <strong>Visual Studio Code</strong> ให้เรียบร้อยก่อน
โดยสามารถดาวน์โหลดได้จากเว็บไซต์ทางการของ <strong>Microsoft</strong></li>
<li>เปิดใช้งาน <strong>VS Code IDE</strong> หลังจากติดตั้งเสร็จ ให้เปิดโปรแกรม <strong>Visual Studio Code (VS Code IDE)</strong><ul>
<li>กรณีใช้งานบน <strong>Ubuntu</strong> โดยตรง เปิด <strong>VS Code</strong> จากเมนูแอปพลิเคชันของระบบ หรือพิมพ์คำสั่ง <code>code</code> ใน <strong>Terminal</strong></li>
</ul>
</li>
<li>ในกรณีที่ใช้ <strong>WSL2 Ubuntu</strong> สำหรับ <strong>Windows</strong> จะมีการเปิดใข้งาน <strong>VS Code</strong> ในโหมด <strong>Remote - WSL</strong> และเชื่อมต่อกับสภาพแวดล้อม <strong>Ubuntu</strong></li>
<li>ค้นหาและติดตั้ง <strong>Wokwi Extension</strong></li>
<li>ไปยังหน้าเว็บ <a href="https://wokwi.com/license?v=3.1.0&amp;r=LicenseMissing&amp;s=v"><strong>Wokwi License</strong></a>
สมัครเข้าใช้งาน และขอ <strong>Wokwi License Key</strong> (one-year license) ได้ฟรี
เพื่อนำมาใช้กับ <strong>Wokwi Simulator</strong> ใน <strong>VS Code IDE</strong></li>
</ol>
<p><img alt="" src="vscode-1.jpg" /></p>
<p>รูป: การค้นหาและติดตั้ง <strong>Wokwi Extension</strong></p>
<p><img alt="" src="vscode-2.jpg" /></p>
<p>รูป: การขอ <strong>Wokwi License Key</strong></p>
<p><img alt="" src="vscode-3.jpg" /></p>
<p>รูป: การนำ <strong>Wokwi License Key</strong> มาใช้กับ <strong>Wokwi Simulator</strong></p>
<p>ข้อสังเกต:  <strong>Wokwi Simulator + VS Code IDE</strong> สามารถใช้กับระบบปฏิบัติการอื่นได้ เช่น <strong>Windows</strong>  และ <strong>MacOS X</strong></p>
<p>&nbsp;</p>
<hr />
<h2 id="arduino-cli">&#9655; <strong>การติดตั้งและใช้งาน Arduino CLI</strong><a class="headerlink" href="#arduino-cli" title="Permanent link">#</a></h2>
<p>การใช้งาน <strong>Wokwi Simulator</strong> ร่วมกับ <strong>VS Code</strong> จำเป็นต้องมีเครื่องมือสำหรับคอมไพล์โค้ด
เช่น <a href="https://github.com/arduino/arduino-cli"><strong>Arduino CLI</strong></a>
และ <a href="https://platformio.org/"><strong>PlatformIO (PIO) CLI</strong></a>  เป็นต้น
สำหรับ <strong>Arduino Project</strong> แนะนำให้ติดตั้ง <code>arduino-cli</code> โดยมีขั้นตอนดังนี้</p>
<p><strong>Arduino CLI</strong> เป็นเครื่องมือแบบ <strong>Command Line</strong> (ใช้ได้กับหลายระบบปฏิบัติการ)
และใช้ในการคอมไพล์โค้ด <strong>Arduino Sketch</strong>
ถัดไปเป็นขั้นตอนการติดตั้ง <code>arduino-cli</code> สำหรับ <strong>Ubuntu / WSL2 Ubuntu</strong>  </p>
<pre><code>## Arduino CLI Installation on Ubuntu / WSL2 Ubuntu

# Step 1) Install Arduino CLI 

# Download and install Arduino CLI using the official install script
# The script downloads the latest arduino-cli binary into ./bin
$ curl -fsSL \
  https://raw.githubusercontent.com/arduino/arduino-cli/master/install.sh | sh

$ mkdir -p $HOME/bin/
$ mv bin/arduino-cli $HOME/bin/

# Add $HOME/bin to PATH so the shell can find arduino-cli
$ echo 'export PATH=&quot;$PATH:$HOME/bin&quot;' &gt;&gt; $HOME/.bashrc
$ source $HOME/.bashrc

# Verify Arduino CLI installation and display version information
$ arduino-cli version
# Output: arduino-cli Version: 1.4.0: b7000970f Date: 2025-12-09T15:55:00Z

# Generate a config file (if not existing): $HOME/.arduino15/arduino-cli.yaml
$ arduino-cli config init

# Download and update the list of available Arduino cores (board packages)
$ arduino-cli core update-index

# Install the Arduino AVR core (for boards like Arduino Uno, Nano, Mega)
$ arduino-cli core install arduino:avr

# List all installed Arduino cores 
$ arduino-cli core list
</code></pre>
<p>หากต้องการใช้งาน <strong>Arduino Library</strong> ซึ่งมีให้เลือกใช้จำนวนมาก
ก็มีคำสั่งของ <code>arduino-cli</code> เพื่อติดตั้งไลบรารีที่ต้องการใช้งาน เช่น</p>
<pre><code># Update Arduino library index
$ arduino-cli lib update-index

# Add some Arduino libraries as examples
$ arduino-cli lib install &quot;LiquidCrystal I2C&quot;
$ arduino-cli lib install &quot;Adafruit SSD1306&quot;
$ arduino-cli lib install &quot;Adafruit GFX Library&quot;
$ arduino-cli lib install &quot;Adafruit SH110X&quot;
</code></pre>
<p>&nbsp;</p>
<p>ดาวน์โหลดโปรเจกต์ตัวอย่างของ <strong>Wokwi</strong> สำหรับ <strong>Arduino</strong> จาก <strong>GitHub</strong> ดังต่อไปนี้
แล้วเปิด<strong>Folder</strong> <code>/arduino-lcd-helloworld</code> ใน <strong>VS Code IDE</strong></p>
<pre><code># Clone an example Arduino project (LCD Hello World) from Wokwi
$ git clone https://github.com/wokwi/arduino-lcd-helloworld
</code></pre>
<p><img alt="" src="wokwi-arduino-1.jpg" /></p>
<p>รูป: ตัวอย่างโปรเจกต์ <code>arduino-lcd-helloworld</code>  และเปิดดูไฟล์ <code>diagram.json</code></p>
<p><img alt="" src="wokwi-arduino-2.jpg" /></p>
<p>รูป: ไฟล์ <code>.ino</code> ในโปรเจกต์ <code>arduino-lcd-helloworld</code>  </p>
<p>ไฟล์ <code>wokwi.yaml</code> ใช้สำหรับการตั้งค่าเพื่อใช้งานร่วมกับ <strong>Wokwi Simulator</strong>
เช่น การระบุชื่อไฟล์สำหรับ <code>.hex</code> และ <code>.bin</code> ที่ได้จากการคอมไพล์โค้ด <strong>Arduino Sketch</strong></p>
<pre><code class="language-yaml">[wokwi]
version=1
firmware='build/arduino.avr.uno/arduino-lcd-helloworld.ino.hex'
elf='build/arduino.avr.uno/arduino-lcd-helloworld.ino.elf'
</code></pre>
<p>เปิดใช้งาน <strong>Terminal</strong> แล้วคอมไพล์โค้ดในโปรเจกต์ โดยใช้ <code>arduino-cli</code>
สำหรับบอร์ด <strong>Arduino Uno</strong> ตามตัวอย่าง และจะได้ไฟล์เอาต์พุตภายใต้  <code>./build/arduino.avr.uno/</code></p>
<pre><code>$ arduino-cli compile \
  --fqbn arduino:avr:uno \
  --output-dir ./build/arduino.avr.uno/ .
</code></pre>
<p><img alt="" src="wokwi-arduino-3.jpg" /></p>
<p>รูป: การทำคำสั่ง <code>arduino-cli</code> เพื่อคอมไพล์โค้ด</p>
<p><img alt="" src="wokwi-arduino-4.jpg" /></p>
<p>รูป: การจำลองการทำงานของโค้ดตัวอย่าง</p>
<p>ลองแก้ไขโค้ด เพื่อให้ส่งข้อความผ่านทาง <strong>Serial</strong> และคอมไพล์โค้ดใหม่อีกครั้งด้วย <code>arduino-cli</code></p>
<pre><code class="language-c++">#include &quot;LiquidCrystal_I2C.h&quot;

LiquidCrystal_I2C lcd(0x27, 16, 2); // I2C address = 0x27, 16x2 LCD I2C Module

uint32_t ts = 0; // timestamp (in msec)

void setup() {
  Serial.begin(115200);
  lcd.init();
  lcd.backlight();
  lcd.setCursor(1, 0);
  lcd.print(&quot;Hello, Wokwi!&quot;);
}

void loop() {
  static int ticks = 0;
  uint32_t now = millis();
  if ( now - ts &gt;= 1000 ) {
    ts = now;
    Serial.println( String(&quot;Ticks: &quot;) + (++ticks) );
    lcd.setCursor(7, 1);
    lcd.print(millis() / 1000);
  }
  delay(10);
}
</code></pre>
<p><img alt="" src="wokwi-arduino-5.jpg" /></p>
<p>รูป: การจำลองการทำงานหลักจากแก้ไขโค้ด เพื่อให้ส่งข้อความออกทางพอร์ต <strong>Serial</strong></p>
<p>การเพิ่มไฟล์ <code>.vscode/tasks.json</code> สำหรับโปรเจกต์ ตามตัวอย่างต่อไปนี้ จะช่วยให้ทำคำสั่ง <code>arduino-cli</code> ได้สะดวกขึ้น
โดยกดคีย์ <code>Ctrl+Shift+B</code> ใน <strong>VS Code IDE</strong> เพื่อทำคำสั่ง</p>
<pre><code class="language-json">{
  &quot;version&quot;: &quot;2.0.0&quot;,
  &quot;tasks&quot;: [
    {
      &quot;label&quot;: &quot;Arduino: Compile (Uno)&quot;,
      &quot;type&quot;: &quot;shell&quot;,
      &quot;command&quot;: &quot;arduino-cli&quot;,
      &quot;args&quot;: [
        &quot;compile&quot;,
        &quot;--verbose&quot;,
        &quot;--fqbn&quot;,
        &quot;arduino:avr:uno&quot;,
        &quot;--output-dir&quot;,
        &quot;${workspaceFolder}/build/arduino.avr.uno&quot;,
        &quot;.&quot;
      ],
      &quot;group&quot;: {
        &quot;kind&quot;: &quot;build&quot;,
        &quot;isDefault&quot;: true
      },
      &quot;problemMatcher&quot;: [
      ]
    }
  ]
}
</code></pre>
<p><img alt="" src="vscode_tasks.jpg" /></p>
<p>รูป: ตัวอย่างไฟล์ <code>.vscode/tasks.json</code></p>
<p>&nbsp;</p>
<hr />
<h2 id="platformio-pio-cli">&#9655; <strong>การติดตั้งและใช้งาน PlatformIO (PIO) CLI</strong><a class="headerlink" href="#platformio-pio-cli" title="Permanent link">#</a></h2>
<p>นอกเหนือจาก <code>arduino-cli</code> อีกตัวเลือกหนึ่งคือ <code>pio</code> ซึ่งเป็นคำสั่งที่ทำงานแบบ <strong>CLI</strong> ของโครงการ <strong>PlatformIO</strong></p>
<ul>
<li><strong>PlatformIO</strong> เป็นเครื่องมือสำหรับการพัฒนาซอฟต์แวร์ฝังตัว  ที่ช่วยในการเขียนโปรแกรมสำหรับไมโครคอนโทรลเลอร์ได้ง่ายขึ้น โดยรองรับบอร์ดหลายรุ่น และรูปแบบการเขียนโค้ด (<strong>Framework</strong>) เช่น <strong>Arduino, ESP-IDF, STM32Cube</strong></li>
<li><strong>PlatformIO Core</strong> คือ ส่วนประกอบหลักที่ทำงานในรูปแบบ <strong>Command Line Interface (CLI)</strong> ของ <strong>PlatformIO</strong></li>
</ul>
<p>ขั้นตอนการติดตั้ง <code>platformio-core</code> สำหรับ <strong>Ubuntu / WSL2 Ubuntu</strong> มีดังนี้</p>
<pre><code>$ sudo apt update
$ sudo apt install -y python3 python3-venv python3-pip curl
$ PIO_URL=&quot;https://raw.githubusercontent.com/platformio/platformio-core-installer&quot;
$ curl -fsSL -o get-platformio.py ${PIO_URL}/master/get-platformio.py
$ python3 get-platformio.py

$ echo 'export PATH=&quot;$PATH:$HOME/.platformio/penv/bin&quot;' &gt;&gt; ~/.bashrc
$ source ~/.bashrc

# Check the version of the pio program
$ pio --version
# output: PlatformIO Core, version 6.1.18
</code></pre>
<p>ตัวอย่างการใช้งานงาน <code>pio</code> สำหรับโปรเกจต์ <strong>Arduino</strong> </p>
<p>1) สร้างโปรเจกต์ใหม่ โดยมีโครงการในไดเรกทอรี ตามรูปแบบต่อไปนี้</p>
<pre><code>./arduino-lcd-helloworld-pio
├── platformio.ini
├── diagram.json
├── lib
│   └── LiquidCrystal_I2C
│       ├── LiquidCrystal_I2C.cpp
│       └── LiquidCrystal_I2C.h
├── src
│   └── arduino-lcd-helloworld.ino
└── wokwi.toml
</code></pre>
<p>2) สร้างไฟล์ <code>platformio.ini</code> ภายในโปรเจกต์ เพื่อใช้กับ <code>pio</code> และมีเนื้อหาภายใน ดังนี้</p>
<pre><code class="language-yaml">[env:uno]
platform = atmelavr
board = uno
framework = arduino
</code></pre>
<p>3) สร้างหรือแก้ไขไฟล์ <code>wokwi.toml</code> ภายในโปรเจกต์ สำหรับการทำงานของ <strong>Wokwi Simulator</strong></p>
<pre><code class="language-yaml">[wokwi]
version=1
firmware='.pio/build/uno/firmware.hex'
elf='.pio/build/uno/firmware.elf'
</code></pre>
<p>4) ทำคำสั่ง <code>pio run</code> เพื่อทำขั้นตอน <strong>Build</strong> และไฟล์เอาต์พุตที่ได้จะถูกจัดเก็บไว้ภายใต้ <code>.pio/build</code></p>
<p>5) เปิดโปรเจกต์ใน <strong>VS Code IDE</strong> และจำลองการทำงานของโค้ด</p>
<p><img alt="" src="pio-1.jpg" /></p>
<p><img alt="" src="pio-2.jpg" /></p>
<p>รูป:  ตัวอย่างการทำคำสั่ง <code>pio run</code></p>
<p><img alt="" src="pio-3.jpg" /></p>
<p>รูป: ไฟล์เอาต์พุตที่ได้จากขั้นตอน <strong>Build</strong> ซึ่งถูกจัดเก็บไว้ภายใต้ <code>.pio/build</code></p>
<p><img alt="" src="pio-4.jpg" /></p>
<p>รูป: ตัวอย่างการจำลองการทำงานสำหรับไฟล์เฟิร์มแวร์ที่ได้จากการคอมไพล์ด้วย <code>pio</code></p>
<p>&nbsp;</p>
<hr />
<h2 id="avr-libc-arduino-uno">&#9655; <strong>ตัวอย่างการใช้งานและเขียนโค้ด AVR LibC สำหรับบอร์ด Arduino Uno</strong><a class="headerlink" href="#avr-libc-arduino-uno" title="Permanent link">#</a></h2>
<p>เริ่มต้นด้วยการติดตั้งโปรแกรมที่เกี่ยวข้องกับการคอมไพล์โค้ดสำหรับ <strong>AVR</strong>
เช่น <strong>GCC-AVR Toolchain</strong> และ <strong>AVRdude</strong></p>
<pre><code>$ sudo apt install -y gcc-avr binutils-avr avr-libc avrdude
</code></pre>
<p>สร้างไดเรกทอรีสำหรับโปรเจกต์ ในตัวอย่างนี้ตั้งชื่อว่า <code>uno_adc_pwm</code></p>
<pre><code># Create a new directory for the project
$ mkdir -p uno_adc_pwm &amp;&amp; cd uno_adc_pwm
</code></pre>
<p>สร้างไฟล์ <code>./src/main.c</code> ตามโค้ดตัวอย่างต่อไปนี้ ซึ่งสาธิตการใช้งานวงจร <strong>Timer1</strong>
เพื่อสร้างสัญญาณ <strong>PWM</strong> จำนวน 1 ช่อง ที่ขา <strong>Arduino D9 pin</strong> และนำไปใช้ในกับวงจร <strong>LED</strong>
สามารถปรับความสว่างของ <strong>LED</strong> ได้</p>
<p>นอกจากนั้นแล้วยังมีการอ่านค่าจากสัญญาณแอนะล็อก ที่ช่องอินพุต <strong>A0</strong> และแปลงให้เป็นข้อมูลดิจิทัล
ขนาด 10 บิต โดยใช้วงจร <strong>ADC</strong> ภายในชิป <strong>ATmega328P</strong>
ค่าอินพุตแบบแอนะล็อกในช่วง 0V ถึง 5V ซึ่งได้จากวงจรแบ่งแรงดัน (<strong>Potentiometer</strong>)
จะใช้ในการกำหนดค่า <strong>Duty Cycle</strong> ของสัญญาณ <strong>PWM</strong> เพื่อปรับความสว่างของ <strong>LED</strong> </p>
<pre><code># Create a ./build subdirectory for output files.
$ mkdir -p build

# Compile the source code.
$ avr-gcc -mmcu=atmega328p -DF_CPU=16000000UL \
  -Os -Wall \
  -o ./build/main.elf src/main.c

# Generate a .hex file from the main.elf file. 
$ avr-objcopy -O ihex -R .eeprom \
  ./build/main.elf ./build/main.hex
</code></pre>
<p>สร้างไฟล์ <code>wokwi.toml</code> <strong>Wokwi Simulator</strong></p>
<pre><code class="language-yaml">[wokwi]
version=1
firmware='build/main.hex'
elf='build/main.elf'
</code></pre>
<p>สร้างไฟล์ <code>diagram.json</code> สำหรับ <strong>Wokwi Simulator</strong></p>
<pre><code class="language-json">{
  &quot;version&quot;: 1,
  &quot;author&quot;: &quot;Anonymous&quot;,
  &quot;editor&quot;: &quot;wokwi&quot;,
  &quot;parts&quot;: [
    { &quot;type&quot;: &quot;wokwi-arduino-uno&quot;, &quot;id&quot;: &quot;uno&quot;, 
     &quot;top&quot;: 0, &quot;left&quot;: 0, &quot;attrs&quot;: {} },
    { &quot;type&quot;: &quot;wokwi-led&quot;, &quot;id&quot;: &quot;led1&quot;, 
     &quot;top&quot;: -100, &quot;left&quot;: 140, &quot;attrs&quot;: { &quot;color&quot;: &quot;red&quot; } },
    {
      &quot;type&quot;: &quot;wokwi-resistor&quot;,
      &quot;id&quot;: &quot;r1&quot;,
      &quot;top&quot;: -32,
      &quot;left&quot;: 96,
      &quot;attrs&quot;: { &quot;value&quot;: &quot;1000&quot; }
    },
    { &quot;type&quot;: &quot;wokwi-potentiometer&quot;, &quot;id&quot;: &quot;pot1&quot;, 
     &quot;top&quot;: 100, &quot;left&quot;: 300, &quot;attrs&quot;: {} },
    { &quot;type&quot;: &quot;wokwi-logic-analyzer&quot;, &quot;id&quot;: &quot;logic1&quot;, 
     &quot;top&quot;: -100, &quot;left&quot;: 300, &quot;attrs&quot;: {} }
  ],
  &quot;connections&quot;: [
    [ &quot;uno:9&quot;, &quot;led1:A&quot;, &quot;green&quot;, [ &quot;v-30&quot;, &quot;h-30&quot; ] ],
    [ &quot;led1:C&quot;, &quot;r1:2&quot;, &quot;green&quot;, [ &quot;v0&quot; ] ],
    [ &quot;uno:GND.1&quot;, &quot;r1:1&quot;, &quot;black&quot;, [ &quot;v-20&quot;, &quot;h-20&quot; ] ],
    [ &quot;uno:5V&quot;, &quot;pot1:VCC&quot;, &quot;red&quot;, [ &quot;v50&quot;, &quot;h-20&quot; ] ],
    [ &quot;uno:GND.3&quot;, &quot;pot1:GND&quot;, &quot;black&quot;, [ &quot;v30&quot;, &quot;h100&quot; ] ],
    [ &quot;uno:A0&quot;, &quot;pot1:SIG&quot;, &quot;gold&quot;, [ &quot;v40&quot;, &quot;h130&quot;, &quot;v-20&quot; ] ],
    [ &quot;logic1:GND&quot;, &quot;uno:GND.1&quot;, &quot;black&quot;, [ &quot;h-100&quot; ] ],
    [ &quot;logic1:D0&quot;, &quot;led1:A&quot;, &quot;green&quot;, [ &quot;h-30&quot;, &quot;v30&quot; ] ]
  ],
  &quot;dependencies&quot;: {}
}
</code></pre>
<p><img alt="" src="avr-1.jpg" /></p>
<p>รูป: การคอมไพล์โค้ดด้วยคำสั่ง <code>avr-gcc</code></p>
<p><img alt="" src="avr-2.jpg" /></p>
<p>รูป: การจำลองการทำงานด้วย <strong>Wokwi Simulator</strong></p>
<p><img alt="" src="gtkwave-1.jpg" /></p>
<p>รูป: การแสดงรูปคลื่นสัญญาณจากข้อมูลไฟล์ <strong>VCD Waveform File</strong> (<code>wokwi-logic.vcd</code>)
โดยใช้โปรแกรม <strong>GTKWave</strong></p>
<p>&nbsp;</p>
<hr />
<h2 id="arduino-esp32">&#9655; <strong>ตัวอย่างการใช้งานและเขียนโค้ด Arduino สำหรับบอร์ด ESP32</strong><a class="headerlink" href="#arduino-esp32" title="Permanent link">#</a></h2>
<p>สำหรับการเขียนโปรแกรมสำหรับ <strong>ESP32</strong> โดยใช้ <strong>Arduino Framework</strong>
จะต้องติดตั้งซอฟต์แวร์สำหรับการคอมไพล์โค้ด ในตัวอย่างนี้ เป็นการสาธิตการใช้งาน <code>pio</code></p>
<p>เริ่มต้นด้วยการสร้างโปรเจกต์ใหม่ (ในตัวอย่างนี้ใช้ชื่อว่า <code>esp32-lcd-i2c</code>) โดยใช้คำสั่ง <code>pio project init</code> 
เลือก <code>esp32dev</code> สำหรับบอร์ด <strong>ESP32 Dev. Kit</strong> ที่ต้องการใช้งาน</p>
<pre><code># Check the version of the installed pio program.
$ pio --version
PlatformIO Core, version 6.1.18

# Create a directory for the new project.
$ mkdir -p esp32-lcd-i2c &amp;&amp; cd esp32-lcd-i2c

# Create a new Platformio project using the ESP32 Dev. Kit board.
$ pio project init --board esp32dev

# Clean up unused PlatformIO system resources
$ pio system prune --dry-run
</code></pre>
<p>การสร้างไฟล์ในไดเรกทอรีของโปรเจกต์ มีลักษณะดังนี้</p>
<pre><code>.
├── diagram.json
├── platformio.ini
├── include
├── lib
├── test
├── src
│   └── main.cpp
└── wokwi.toml
</code></pre>
<p>ตัวอย่างไฟล์ <code>platformio.ini</code></p>
<pre><code class="language-yaml">[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200

lib_deps =
    marcoschwartz/LiquidCrystal_I2C@^1.1.4
</code></pre>
<p>ตัวอย่างไฟล์ <code>src/main.cpp</code> ซึ่งสาธิตการใช้งาน <strong>FreeRTOS</strong> มีการสร้างทาสก์ (<strong>Task</strong>)
เพื่อทำให้ <strong>LED</strong> กระพริบ และแสดงข้อความบนโมดูลแสดงผล <strong>LCD 16x2</strong> ที่เชื่อมต่อด้วยบัส <strong>I2C</strong>
และมีการใช้งานไลบรารี <code>LiquidCrystal_I2C</code></p>
<pre><code class="language-c++">#include &lt;Arduino.h&gt;
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;

LiquidCrystal_I2C lcd(0x27, 16, 2); // I2C address 0x27 for LCD 16x2

// Onboard LED is usually GPIO 2 on most ESP32 DevKits
#define LED_PIN 2

// Task Handles (Optional)
TaskHandle_t TaskLEDHandle = NULL, TaskLCDHandle = NULL;

// Task 1: Blink the LED
void TaskBlink(void *pvParameters) {
  pinMode(LED_PIN, OUTPUT);
  int state = 0;
  for (;;) { // Infinite loop for the task
    digitalWrite(LED_PIN, state ^=1 );
    vTaskDelay(500 / portTICK_PERIOD_MS); // 500ms
  }
}

//Task 2: Update the LCD
void TaskUpdateLCD(void *pvParameters) {
  int counter = 0;
  for (;;) {
    lcd.setCursor(0, 1); // Move to the second row
    lcd.print(&quot;Count: &quot;);
    lcd.print(counter++);
    vTaskDelay(1000 / portTICK_PERIOD_MS); // Wait 1 second
  }
}

void setup() {
  Serial.begin(115200);
  Serial.println(&quot;\n\nWokwi ESP32 Demo...&quot;);
  Wire.begin(21, 22);
  lcd.init();
  lcd.backlight();
  lcd.setCursor(0, 0);
  lcd.print(&quot;FreeRTOS Running&quot;);

  // Create Tasks
  xTaskCreatePinnedToCore(
    TaskBlink,      // Task entry function
    &quot;BlinkTask&quot;,    // Task name
    1024,           // Task stack size   
    NULL,        
    1,              // Task priority       
    &amp;TaskLEDHandle, // Task handle
    0               // Run on Core 0
  );

  xTaskCreatePinnedToCore(
    TaskUpdateLCD,  // Task entry function
    &quot;LCDTask&quot;,      // Task name
    2048,           // Task stack size
    NULL,
    1,              // Task priority 
    &amp;TaskLCDHandle, // Tass handle
    1               // Run on Core 1
  );
}

void loop() {
}
</code></pre>
<p>ตัวอย่างไฟล์ <code>diagram.json</code></p>
<pre><code class="language-json">{
  &quot;version&quot;: 1,
  &quot;author&quot;: &quot;Anonymous&quot;,
  &quot;editor&quot;: &quot;wokwi&quot;,
  &quot;parts&quot;: [
    { &quot;type&quot;: &quot;wokwi-esp32-devkit-v1&quot;, &quot;id&quot;: &quot;esp&quot;, 
       &quot;top&quot;: 0, &quot;left&quot;: -150, &quot;attrs&quot;: {} },
    {
      &quot;type&quot;: &quot;wokwi-lcd1602&quot;,
      &quot;id&quot;: &quot;lcd1&quot;,
      &quot;top&quot;: 10,
      &quot;left&quot;: 40,
      &quot;attrs&quot;: { &quot;pins&quot;: &quot;i2c&quot; }
    },
    { &quot;type&quot;: &quot;wokwi-vcc&quot;, &quot;id&quot;: &quot;vcc1&quot;, 
      &quot;top&quot;: -30, &quot;left&quot;: 0, &quot;attrs&quot;: {} }
  ],
  &quot;connections&quot;: [
    [ &quot;esp:TX0&quot;, &quot;$serialMonitor:RX&quot;, &quot;&quot;, [] ],
    [ &quot;esp:RX0&quot;, &quot;$serialMonitor:TX&quot;, &quot;&quot;, [] ],
    [ &quot;esp:GND.1&quot;, &quot;lcd1:GND&quot;, &quot;black&quot;, [ &quot;h20&quot;, &quot;v-105&quot;, &quot;h0&quot; ] ],
    [ &quot;vcc1:VCC&quot;, &quot;lcd1:VCC&quot;, &quot;red&quot;, [ &quot;v55&quot;, &quot;h0&quot; ] ],
    [ &quot;esp:D22&quot;, &quot;lcd1:SCL&quot;, &quot;green&quot;, [ &quot;h10&quot;, &quot;v30&quot; ] ],
    [ &quot;esp:D21&quot;, &quot;lcd1:SDA&quot;, &quot;magenta&quot;, [ &quot;h0&quot; ] ]
  ],
  &quot;dependencies&quot;: {}
}
</code></pre>
<p>ตัวอย่างไฟล์ <code>wokwi.toml</code></p>
<pre><code class="language-yaml">[wokwi]
version = 1
firmware = '.pio/build/esp32dev/firmware.bin'
elf = '.pio/build/esp32dev/firmware.elf'
</code></pre>
<p>เมื่อได้ไฟล์ของโปรเจกต์ครบแล้ว ให้ทำขั้นตอน <strong>Build</strong> ด้วยคำสั่ง <code>pio run</code>
และเอาต์พุตไฟล์ <code>.bin</code> และ <code>.elf</code> จะถูกเก็บไว้ภายใต้ <code>.pio/build/esp32dev/</code></p>
<p><img alt="" src="wokwi-esp32-1.jpg" /></p>
<p>รูป: ตัวอย่างการทำคำสั่ง <code>pio run</code></p>
<p><img alt="" src="wokwi-esp32-2.jpg" /></p>
<p>รูป: การจำลองการทำงานสำหรับบอร์ด <strong>ESP32</strong> ด้วย <strong>Wokwi Simulator</strong></p>
<p>&nbsp;</p>
<hr />
<h2 id="_1">&#9655; <strong>กล่าวสรุป</strong><a class="headerlink" href="#_1" title="Permanent link">#</a></h2>
<p>บทความนี้นำเสนอตัวอย่างการใช้งาน <strong>Wokwi</strong> ร่วมกับ <strong>VS Code IDE</strong> เพื่อเขียนโค้ด <strong>Arduino Sketch</strong>
โดยใช้บอร์ด <strong>Arduino Uno</strong> เป็นตัวอย่าง และจำลองการทำงานของระบบ โดยใช้ <strong>Wokwi Simulator</strong></p>
<p><strong>บทความที่เกี่ยวข้อง</strong></p>
<ul>
<li>การเขียนโปรแกรม <strong>Arduino-ESP32</strong> ด้วย <strong>Wokwi Simulator</strong>: 
<a href="../../esp32/arduino-esp32-wokwi-part1/">ตอนที่ 1</a> |
<a href="../../esp32/arduino-esp32-wokwi-part2/">ตอนที่ 2</a></li>
<li><a href="../../esp32/esp32_vscode_pio/">การใช้งาน PlatformIO ร่วมกับ VS Code IDE สำหรับบอร์ด ESP32</a></li>
<li><a href="../../arduino/vscode_pio_arduino/">VS Code IDE + PlatformIO Extension for Arduino Programming</a></li>
</ul>
<p>&nbsp;</p>
<hr />
<p><em>This work is licensed under a</em> <strong><em>Creative Commons Attribution-ShareAlike 4.0 International License</em></strong>.</p>
<p>Created: 2026-01-07 | Last Updated: 2026-01-08</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2021-2026 IoT Engineering Education, Bangkok/Thailand</a></p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
