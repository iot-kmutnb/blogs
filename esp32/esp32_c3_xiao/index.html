<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="RSP">
        <link rel="canonical" href="https://iot-kmutnb.github.io/blogs/esp32/esp32_c3_xiao/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>การเริ่มต้นใช้งานบอร์ด Seeed Studio XIAO ESP32-C3 - IoT Engineering Education</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../css/extra.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/c.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/cpp.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/arduino.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/typescript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/vhdl.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/verilog.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/text.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/plaintext.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/matlab.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/julia.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script>
        <script>hljs.highlightAll();</script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-966FQ6RN6W"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', "G-966FQ6RN6W");
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">IoT Engineering Education</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#seeed-studio-xiao-esp32-c3" class="nav-link">การเริ่มต้นใช้งานบอร์ด Seeed Studio XIAO ESP32-C3</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#seeeduino-xiao-esp32-c3" class="nav-link">&#9655; Seeeduino XIAO ESP32-C3</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#arduino-esp32-core" class="nav-link">&#9655; Arduino ESP32 Core</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#arduino-sketch-demo-1" class="nav-link">&#9655; Arduino Sketch Demo 1</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#arduino-sketch-demo-2" class="nav-link">&#9655; Arduino Sketch Demo 2</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#arduino-sketch-demo-3" class="nav-link">&#9655; Arduino Sketch Demo 3</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#arduino-sketch-demo-4" class="nav-link">&#9655; Arduino Sketch Demo 4</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#arduino-sketch-demo-5" class="nav-link">&#9655; Arduino Sketch Demo 5</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_1" class="nav-link">&#9655; กล่าวสรุป</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="seeed-studio-xiao-esp32-c3">การเริ่มต้นใช้งานบอร์ด Seeed Studio XIAO ESP32-C3<a class="headerlink" href="#seeed-studio-xiao-esp32-c3" title="Permanent link">#</a></h1>
<ul>
<li><a href="#seeeduino-xiao-esp32-c3"><strong>Seeeduino XIAO ESP32-C3</strong></a></li>
<li><a href="#arduino-esp32-core"><strong>Arduino ESP32 Core</strong></a></li>
<li><a href="#arduino-sketch-demo-1"><strong>Arduino Sketch Demo 1</strong></a></li>
<li><a href="#arduino-sketch-demo-2"><strong>Arduino Sketch Demo 2</strong></a></li>
<li><a href="#arduino-sketch-demo-3"><strong>Arduino Sketch Demo 3</strong></a></li>
<li><a href="#arduino-sketch-demo-4"><strong>Arduino Sketch Demo 4</strong></a></li>
<li><a href="#arduino-sketch-demo-5"><strong>Arduino Sketch Demo 5</strong></a></li>
</ul>
<hr />
<h2 id="seeeduino-xiao-esp32-c3">&#9655; <strong>Seeeduino XIAO ESP32-C3</strong><a class="headerlink" href="#seeeduino-xiao-esp32-c3" title="Permanent link">#</a></h2>
<p>บทความนี้กล่าวถึง การทดลองใช้งานบอร์ดไมโครคอนโทรลเลอร์ 
<a href="https://wiki.seeedstudio.com/XIAO_ESP32C3_Getting_Started/"><strong>XIAO ESP32-C3</strong></a>
ของบริษัท  <strong>Seeed Studio</strong> ในเบื้องต้น</p>
<p>&#8594; แนะนำให้อ่านบทความที่เกี่ยวข้อง: <a href="../esp32-c3_intro/">การเริ่มต้นใช้งานชิป <strong>Espressif ESP32-C3 (RISC-V CPU Core)</strong></a> </p>
<p><img alt="" src="seeeduino_xiao_esp32c3.png" /></p>
<p>รูป: บอร์ด <strong>Seeeduino XIAO ESP32-C3</strong> (มุมมองจากด้านหน้าและด้านหลัง)</p>
<p><img alt="" src="xiao_esp32c3_pinout.png" /></p>
<p>รูป: แผนผังแสดงตำแหน่งขา (<strong>PinOut</strong>) ของบอร์ด <strong>Seeeduino XIAO ESP32-C3</strong></p>
<p><strong>ข้อมูลเกี่ยวกับบอร์ด</strong></p>
<ul>
<li>เริ่มจำหน่ายในเดือนกรกฎาคม ค.ศ. 2022</li>
<li>มีตัวประมวลผลหลักคือ ชิป <strong>Espressif ESP32-C3FN4 SoC</strong> <ul>
<li><strong>32-bit RISC-V (single-core, 160MHz)</strong></li>
<li><strong>RV32IMC ISA, Four-stage Pipeline, 32-bit Multiplier/Divider</strong></li>
<li><strong>On-chip Memory: 400KB SRAM, 384KB ROM</strong></li>
<li>มีชิปหน่วยความจำแฟลชภายในชิป ขนาด <strong>4MB</strong> (<strong>QSPI Flash</strong>)</li>
</ul>
</li>
<li>รองรับการสื่อสารข้อมูลไร้สาย <strong>2.4GHz Wi-Fi (IEEE 802.11 b/g/n)</strong> และ <strong>Bluetooth / BLE 5.0, Bluetooth Mesh</strong> </li>
<li>ทำงานที่ระดับแรงดันไฟเลี้ยง <strong>+3.3V</strong></li>
<li>มีปุ่มกด <strong>BOOT / GPIO-9 (Active-low, 10k Pullup)</strong> 
สำหรับการเลือกเข้าสู่โหมด <strong>USB-Serial Bootloader</strong> และ <strong>CHIP_EN (Active-low, 10k Pullup)</strong> สำหรับรีเซตการทำงานของชิป<ul>
<li>ขาของชิป <strong>ESP32-C3</strong> จำนวนหนึ่ง จะถูกใช้งานเป็นขาที่เรียกว่า <strong>Strapping Pins</strong>
และจะต้องมีสถานะลอจิกตามที่กำหนดไว้เมื่อชิปถูกรีเซต แล้วหลังจากนั้นจึงใช้เป็นขา <strong>GPIO</strong> ตามปรกติได้
เช่น ขาสำหรับเลือกโหมดการทำงานหลังจากรีเซต (<a href="https://docs.espressif.com/projects/esptool/en/latest/esp32c3/advanced-topics/boot-mode-selection.html"><strong>Boot Mode Selection</strong></a>)</li>
<li>ถ้าขา <strong>GPIO-9</strong> มีลอจิกเป็น <strong>LOW (0)</strong> และขา <strong>GPIO-8</strong> เป็น <strong>HIGH (1)</strong>
จะเข้าสู่ <strong>ROM Serial Bootloader</strong> หลังจากรีเซต และสามารถใช้โปรแกรม <strong>esptool.py</strong>
ในการอัปโหลดโปรแกรมได้ แต่ถ้า <strong>GPIO-9</strong> เป็น <strong>HIGH (1)</strong> จะเข้าสู่การทำงานและรันคำสั่งของโปรแกรมตามปรกติ (<strong>Normal Execution Mode</strong>)</li>
</ul>
</li>
<li>เชื่อมต่อกับคอมพิวเตอร์ของผู้ใช้ด้วยคอนเนกเตอร์ <strong>USB Type-C</strong><ul>
<li>ไม่มีชิป <strong>USB-to-Serial Converter / Bridge</strong> ดังนั้นจะต้องเลือกใช้ <strong>USB CDC on Boot: Enabled</strong> 
สำหรับการสื่อสารข้อมูลแบบอนุกรมผ่านบัส <strong>USB</strong> เมื่อเขียนโปรแกรมด้วย <a href="https://github.com/espressif/arduino-esp32"><strong>Arduino-ESP32 Core</strong></a></li>
</ul>
</li>
<li>มีไอซี <strong>XC6210B332MR</strong> ควบคุมแรงดันไฟฟ้าให้เป็น <strong>+3.3V (700mA max.)</strong></li>
<li>มีวงจร <strong>Crystal Oscillator</strong> สร้างสัญญาณ <strong>Clock</strong>  ที่มีความถี่ <strong>40MHz</strong> และ <strong>32.768kHz</strong> ให้ <strong>ESP32C3</strong></li>
<li>แรงดันไฟเลี้ยงของบอร์ดได้จาก <strong>USB (VBUS=+5V)</strong> ต่อผ่านไดโอดไปยังขา <strong>VIN</strong> 
และมีฟิวส์แบบ <strong>Polyfuse</strong> ป้องกันการใช้กระแสเกิน (ขนาด <strong>500mA</strong>)</li>
<li>ในกรณีที่ต่อกับแบตเตอรรี่ชาร์จประจุได้แบบ <strong>LiPo (+3.7V</strong>) แรงดันที่ขา <strong>VBAT</strong>
จะถูกนำไปป้อนให้ไอซีแปลงแรงดันให้เป็น <strong>+3.3V</strong> (ถ้าไม่มีแรงดันไฟเลี้ยงจาก <strong>VUSB</strong> หรือไม่ได้เชื่อมต่อพอร์ต <strong>USB</strong>)</li>
<li>ความแตกต่างจากบอร์ดอื่นที่ใช้ชิป <strong>ESP32-C3</strong><ul>
<li>โมดูลมีขนาดเล็ก (<strong>20x17.5mm</strong>, <strong>XIAO Series Form Factor</strong>) และมีจำนวนขา <strong>I/O</strong> ค่อนข้างจำกัด</li>
<li>มีวงจรชาร์จประจุสำหรับแบตเตอรี่ (<strong>LiPo Battery, Single-cell, 3.7V</strong>) + <strong>Charging LED</strong></li>
<li>มีคอนเนกเตอร์สำหรับเชื่อมต่อสายอากาศภายนอก (<strong>U.FL Antenna Connector</strong>)</li>
<li>ไม่มี <strong>On-board User LED</strong></li>
</ul>
</li>
<li>ไฟล์ <a href="seeeduino_xiao_esp32c3_schematic.pdf"><strong>Schematic (.pdf)</strong></a></li>
</ul>
<p><img alt="" src="xiao_esp32c3_schematic.png" /></p>
<p>รูป: ผังวงจรของบอร์ด <strong>Seeeduino XIAO ESP32-C3</strong></p>
<p>&nbsp;</p>
<hr />
<h2 id="arduino-esp32-core">&#9655; <strong>Arduino ESP32 Core</strong><a class="headerlink" href="#arduino-esp32-core" title="Permanent link">#</a></h2>
<p>ถัดไปเป็นการสาธิตขั้นตอนใช้งานซอฟต์แวร์ <strong>Arduino IDE v2.2.x</strong>
โดยได้ติดตั้ง <a href="https://github.com/espressif/arduino-esp32"><strong>Arduino ESP32 Core</strong></a> 
ใน <strong>Arduino IDE</strong> ไว้แล้ว เพื่อทดลองคอมไพล์ และอัปโหลดโปรแกรมที่ได้ไปยังบอร์ดไมโครคอนโทรลเลอร์ </p>
<p>การติดตั้ง <strong>Arduino ESP32 Core</strong> ใน <strong>Arduino IDE</strong> ทำได้ง่าย โดยไปที่เมนู
<strong>"File -&gt; Preferences -&gt; Additional Boards Manager URLs"</strong>
แล้วเพิ่มรายการ ซึ่งเป็น <strong>URL</strong> ของไฟล์ <strong>.json</strong> ดังต่อไปนี้</p>
<p><code>https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_dev_index.json</code></p>
<p>จากนั้นใน <strong>Boards Manager</strong> ให้ค้นหาและติดตั้งแพ็กเกจต่าง ๆ สำหรับ <strong>esp32</strong> เวอร์ชันล่าสุด </p>
<p><strong>คำแนะนำ:</strong> ในการใช้งานบอร์ด <strong>ESP32-C3</strong> ซึ่งไม่มีชิป <strong>USB-to-Serial Bridge</strong>
ให้กดปุ่ม <strong>BOOT</strong> ค้างไว้ แล้วกดปุ่ม <strong>EN</strong> แล้วปล่อย เพื่อทำการรีเซตการทำงานของบอร์ด
ให้เข้าสู่โหมด <strong>ROM Serial Bootloader</strong> จากนั้นใน <strong>Arduino IDE</strong>
จึงสามารถมองเห็นหมายเลขพอร์ตอนุกรมของบอร์ด แล้วเลือกพอร์ตดังกล่าวในขั้นตอนการอัปโหลด
เมื่ออัปโหลด <strong>Arduino Sketch</strong> ครั้งแรกได้สำเร็จแล้ว ครั้งถัดไป ไม่จำเป็นต้องกดปุ่มใด ๆ เพื่อเข้าสู่
<strong>Serial Bootloader</strong> แต่ต้องเลือกหมายเลขพอร์ตให้ถูกต้องตรงกับที่ใช้งานจริง</p>
<p>&nbsp;</p>
<hr />
<h2 id="arduino-sketch-demo-1">&#9655; <strong>Arduino Sketch Demo 1</strong><a class="headerlink" href="#arduino-sketch-demo-1" title="Permanent link">#</a></h2>
<p>โค้ดตัวอย่างแรกสาธิตการแสดงข้อมูลเชิงฮาร์ดแวร์เกี่ยวกับชิป <strong>ESP32C3</strong> 
และเวอร์ชันของ <strong>Espressif ESP-IDF</strong> ที่ได้ใช้ในการคอมไพล์โค้ด</p>
<p>ตัวอย่างการใช้คำสั่งจากคลาส <code>ESP</code>
(<a href="https://github.com/espressif/arduino-esp32/blob/master/cores/esp32/Esp.h"><code>cores/esp32/Esp.h</code></a>) เช่น</p>
<ul>
<li><code>ESP.getSdkVersion()</code>: เวอร์ชันของซอฟต์แวร์ <strong>Espressif ESP-IDF</strong> ที่ใช้</li>
<li><code>ESP.getChipRevision()</code>: เวอร์ชันการแก้ไขชิป <strong>SoC</strong></li>
<li><code>ESP.getCpuFreqMHz()</code>: ความถี่ของซีพียูสำหรับการทำงาน (MHz)</li>
<li><code>ESP.getHeapSize()</code>: ขนาดของหน่วยความจำที่ใช้งานสำหรับ <strong>Heap</strong> ของ <strong>SRAM</strong> </li>
<li><code>ESP.getFreeHeap()</code>: ความจุที่ยังใช้ได้สำหรับการใช้งานของ <strong>SRAM</strong> ในส่วนที่เป็น <strong>Heap</strong></li>
<li><code>ESP.getPsramSize()</code>: ขนาดความจุของหน่วยความจำ <strong>PSRAM</strong> (<strong>SPI SRAM</strong>)</li>
<li><code>ESP.getFreePsram()</code>: ความจุที่ยังใช้ได้สำหรับการเก็บข้อมูลใน <strong>PSRAM</strong></li>
<li><code>ESP.getFlashChipSize()</code>: ขนาดความจุของหน่วยความจำแฟลช</li>
<li><code>ESP.getFlashChipSpeed()</code>: ความเร็วหรือความถี่สำหรับการทำงานของหน่วยความจำแฟลซ (MHz)</li>
</ul>
<pre><code class="language-c++">void setup() {
  Serial.begin(115200);
  while(!Serial);
  delay(1000);
  Serial.println(&quot;\nESP32 C3 Demo...\n&quot;);
}

void loop() {
  Serial.println(&quot;=========================================&quot;);
  Serial.printf( &quot;Arduino ESP32 Core v%u.%u.%u\n&quot;,
     ESP_ARDUINO_VERSION_MAJOR, 
     ESP_ARDUINO_VERSION_MINOR, 
     ESP_ARDUINO_VERSION_PATCH );

  Serial.printf(&quot;Espressif IDF: %s\n&quot;, ESP.getSdkVersion() );
  Serial.printf(&quot;Chip Revision %lu\n&quot;, ESP.getChipRevision() );
  Serial.printf(&quot;Cpu Freq. %lu MHz\n&quot;, ESP.getCpuFreqMHz() );
  Serial.printf(&quot;Heap (total/free): %lu / %lu bytes\n&quot;, 
         ESP.getHeapSize(), ESP.getFreeHeap());
  Serial.printf(&quot;PSRAM (toal/free): %lu / %lu bytes\n&quot;, 
         ESP.getPsramSize(), ESP.getFreePsram());
  Serial.printf(&quot;Flash Size: %lu MB, Flash Speed: %lu MHz\n&quot;,
         ESP.getFlashChipSize()/(1024*1024UL), 
         ESP.getFlashChipSpeed()/(uint32_t) 1e6 );

  // more info...
  Serial.printf(&quot;Espressif chip model: %s\n&quot;,
         ESP.getChipModel() );
  Serial.printf(&quot;Number of CPU Cores: %d\n&quot;, 
         ESP.getChipCores() );
  String str;
  switch(ESP.getFlashChipMode()) {
     case FM_QIO:  str = &quot;QIO&quot;;  break;
     case FM_QOUT: str = &quot;QOUT&quot;; break;
     case FM_DIO:  str = &quot;DIO&quot;;  break;
     case FM_DOUT: str = &quot;DOUT&quot;; break;
     default:      str = &quot;Unknown&quot;; break;
  }
  Serial.printf(&quot;Flash model: %s\n&quot;, str.c_str() );
  Serial.println(&quot;=========================================\n&quot;);
  delay(4000);
}
</code></pre>
<p><img alt="" src="arduino_esp32c3_demo-1.png" /></p>
<p>รูป: ตัวอย่างข้อความเอาต์พุตใน <strong>Arduino IDE - Serial Monitor</strong></p>
<p>&nbsp;</p>
<hr />
<h2 id="arduino-sketch-demo-2">&#9655; <strong>Arduino Sketch Demo 2</strong><a class="headerlink" href="#arduino-sketch-demo-2" title="Permanent link">#</a></h2>
<p>โค้ดตัวอย่างที่สองสาธิตการปรับความถี่ในการทำงานของซีพียู 
และทดสอบความเร็วในการทำงานของซีพียูเมื่อใช้ความถี่ที่แตกต่างกัน
เช่น <strong>10MHz</strong>, <strong>20MHz</strong>, <strong>40MHz</strong>, <strong>80MHz</strong>
และ <strong>160MHz</strong> (<em>default</em>)</p>
<pre><code class="language-c++">uint32_t saved_freq;

void setup() {
  Serial.begin(115200);
  while(!Serial);
  delay(1000);
  Serial.println(&quot;\n\nESP32 C3 Demo...\n&quot;);
  // Get the current CPU frequency (in MHz).
  saved_freq = getCpuFrequencyMhz();
}

#define SEP_LINE  &quot;=====================================&quot;

void speed_test() {
  const uint32_t repeat_times = 1e6;
  Serial.println( SEP_LINE SEP_LINE );
  uint32_t frequencies_mhz[] = {20,40,80,160};
  int n = sizeof(frequencies_mhz)/sizeof(uint32_t);

  for ( uint32_t i=0; i &lt; n; i++ ) {
    uint32_t freq = frequencies_mhz[i]; 
    setCpuFrequencyMhz( freq );
    Serial.printf(&quot;Freq. (CPU/XTAL/APB): %3lu/%lu/%lu MHz&quot;, 
                  getCpuFrequencyMhz(), 
                  getXtalFrequencyMhz(), 
                  getApbFrequency()/(uint32_t)1e6);
    uint32_t ts = micros(); // Get the start ime in usec.
    // Simple counting loop
    for ( volatile uint32_t j=0; j &lt; repeat_times; j++);
    ts =  micros() - ts;  // Compute the time difference.
    Serial.printf( &quot;, Exec. time: %6lu usec\n&quot;, ts );
  }
  Serial.println( SEP_LINE SEP_LINE &quot;\n&quot; );
  // Restore the CPU frequency.
  setCpuFrequencyMhz( saved_freq );
}

void loop() {
  static uint32_t ts = 0;
  if ( millis() - ts &gt;= 5000 ) {
    ts = millis();
    speed_test();
  }
}
</code></pre>
<p>จากข้อความเอาต์พุตใน <strong>Arduino Serial Monitor</strong> จะเห็นได้ว่า
ความถี่ของซีพียูมีผลต่อระยะเวลาในการทำคำสั่ง ถ้าเพิ่มความถี่ของซีพียู ก็จะใช้ระยะเวลาน้อยลง</p>
<p><img alt="" src="arduino_esp32c3_demo-2.png" /></p>
<p>รูป: ตัวอย่างข้อความเอาต์พุต</p>
<p>&nbsp;</p>
<hr />
<h2 id="arduino-sketch-demo-3">&#9655; <strong>Arduino Sketch Demo 3</strong><a class="headerlink" href="#arduino-sketch-demo-3" title="Permanent link">#</a></h2>
<p>ตัวอย่างถัดไปเป็นการสาธิตการรับส่งข้อมูลระหว่างวงจร <strong>USB-CDC</strong> 
กับวงจร <strong>Hardware Serial</strong> ภายในชิป <strong>ESP32-C3</strong> ซึ่งมีสองตัวเลือกคือ</p>
<ul>
<li><code>Serial0</code> (ใช้ขา <strong>TX=GPIO-21</strong> / <strong>RX=GPIO-20</strong>) และ </li>
<li><code>Serial1</code> (ใช้ขา <strong>TX=GPIO-9</strong> / <strong>RX=GPIO-10</strong>)</li>
</ul>
<p>ในตัวอย่างนี้ ถ้าทดลองกับบอร์ด <strong>ESP32-C3</strong> จะต้องมีการใช้ลวดสายไฟ
เชื่อมต่อขา <strong>TX</strong> กับ <strong>RX</strong> ที่ใช้กับวงจร <strong>Hardware Serial</strong>
เมื่อมีข้อมูส่งมาจากคอมพิวเตอร์ผู้ใช้ โดยใช้ <strong>USB-CDC</strong> ข้อมูลดังกล่าว จะถูกส่งต่อไปยังขา <strong>TX</strong>
ของ <strong>Hardware Serial</strong> และมีการรับข้อมูลกลับเข้ามาทางขา <strong>RX</strong> 
แล้วส่งกลับไปยังคอมพิวเตอร์ของผู้ใช้</p>
<pre><code class="language-c++">#include &lt;HardwareSerial.h&gt;

#define HW_SERIAL_ID  (0)  // 0 or 1
HardwareSerial MySerial( HW_SERIAL_ID );

void setup() {
  if (HW_SERIAL_ID==0) {
    MySerial.begin(115200, SERIAL_8N1, 21 /*Tx*/, 20 /*Rx*/ ); 
  } else {
    MySerial.begin(115200, SERIAL_8N1, 9 /*Tx*/, 10 /*Rx*/ ); 
  }
  MySerial.setDebugOutput(false);
  while (MySerial.available()) { (void)MySerial.read(); }

  Serial.begin(921600); //  USB-CDC
  while(!Serial);
  Serial.flush();
  delay(1000);
  Serial.println(&quot;ESP32C3 Serial Bridge Test...&quot;);
}

void loop() {
  // Read data bytes from Serial and send them to MySerial.
  while( Serial.available()) {
    char ch = Serial.read();
    MySerial.write(ch);
  }
  // Read data bytes from MySerial and send them to Serial.
  while( MySerial.available()) {
    char ch = MySerial.read();
    Serial.write(ch);
  }
}
</code></pre>
<p><img alt="" src="arduino_esp32c3_demo-3.png" /></p>
<p>รูป: ตัวอย่างข้อความที่ถูกส่งจากคอมพิวเตอร์ของผู้ใช้ผ่านทาง <strong>Arduino Serial Monitor</strong> และได้รับกลับมา</p>
<p>&nbsp;</p>
<hr />
<h2 id="arduino-sketch-demo-4">&#9655; <strong>Arduino Sketch Demo 4</strong><a class="headerlink" href="#arduino-sketch-demo-4" title="Permanent link">#</a></h2>
<p>ชิป <strong>ESP32-C3</strong> มีวงจรแปลงสัญญาณแอนะล็อกให้เป็นข้อมูลดิจิทัล
(<strong>ADC</strong>: <em>Analog-to-Digital Converter</em>) จำนวน  2 ชุด (<strong>ADC1 &amp; ADC2</strong>)
ซึ่งเป็นประเภทที่เรียกว่า <strong>SAR</strong> (<em>Successive Approximation Register</em>)
และให้ข้อมูลที่มีขนาด 12 บิต (<strong>ADC Sampling Resolution</strong>)</p>
<ul>
<li>วงจร <strong>ADC1</strong> ใช้กับขา <strong>GPIO0 .. GPIO4</strong>
(ซึ่งตรงกับช่องอินพุต <strong>ADC1_CHANNEL_0 .. ADC1_CHANNEL_4</strong> ตามลำดับ)</li>
<li>วงจร <strong>ADC2</strong> ใช้กับขาอินพุต <strong>GPIO5</strong> (ช่องอินพุต <strong>ADC2_CHANNEL_0</strong>) </li>
</ul>
<p>วงจร <strong>ADC</strong> ใช้แรงดันไฟเลี้ยงภายในเป็นแรงดันอ้างอิงซึ่งคงที่ (<strong>Vref</strong>) สำหรับการแปลงข้อมูล
ซึ่งปรกติแล้ว <strong>Vref</strong> จะมีค่าโดยประมาณ <strong>1100mV</strong> (ชิปแต่ละตัวอาจมีค่า
<strong>Vref</strong> แตกต่างกันได้ และอยู่ในช่วงประมาณ <strong>1100mV +/- 100mV</strong>)
ดังนั้นสัญญาณแอนะล็อก ก็ควรจะมีแรงดันไฟฟ้าไม่เกิน <strong>Vref</strong>
แต่ถ้าต้องการจะรับแรงดันไฟฟ้าให้สูงกว่า ก็สามารถทำได้โดยการตั้งค่าลดทอนสัญญาณ
หรือ <strong>Attenuation</strong> เพื่อลดขนาดของสัญญาณอินพุตก่อนป้อนให้วงจร <strong>ADC</strong>
และมีค่าที่เลือกได้ดังนี้</p>
<ul>
<li><code>ADC_ATTEN_DB_0</code>: ช่วงแรงดัน <strong>0mV .. 750mV</strong></li>
<li><code>ADC_ATTEN_DB_2_5</code>: ช่วงแรงดัน <strong>0mV .. 1050mV</strong></li>
<li><code>ADC_ATTEN_DB_6</code>: ช่วงแรงดัน <strong>0mV .. 1300mV</strong></li>
<li><code>ADC_ATTEN_DB_11</code>: ช่วงแรงดัน <strong>0mV .. 2500mV</strong></li>
</ul>
<p>ถ้าพิจารณาค่า <code>ADC_ATTEN_DB_0</code> หรือ <strong>0dB</strong> ก็หมายความว่า ไม่มีการลดทอนสัญญาณ
หรือมีอัตรา <strong>1:1</strong> และมีแรงดันไม่เกิน <strong>750mV</strong> ซึ่งน้อยกว่า <strong>Vref=1100mV</strong>
แต่ถ้าเลือกค่า <code>ADC_ATTEN_DB_11</code> เนื่องจากมีการลดทอนสัญญาณ ก็จะรับแรงดันอินพุตได้สูงขึ้น 
แต่ไม่เกิน <strong>2500mV</strong> (เป็นค่าโดยประมาณ) ถ้าคำนวณอัตราส่วนระหว่าง <strong>750mV : 2500mV</strong>
แล้วแปลงเป็นหน่วยเป็น <strong>dB</strong> ก็จะได้ <script type="math/tex">20\,log_{10}(750/2500) \approx -10.46\, dB</script>
</p>
<p>ในกรณีที่มีการอ่านค่าด้วย <strong>ADC</strong> แล้วเลือกใช้ค่าความละเอียดจำนวน 12 บิต
ซึ่งจะได้ค่าในช่วง <strong>0..4095</strong> (หรือ ค่าสูงสุด <script type="math/tex">2^{12} - 1</script>) และถ้านำมาคำนวณเป็นแรงดันไฟฟ้าในหน่วยมิลลิโวลต์ (<strong>mV</strong>)
โดยใช้ความสัมพันธ์แบบเชิงเส้น ก็มีสูตรคำนวณดังนี้ </p>
<p>
<script type="math/tex; mode=display">
  Voltage\, (mV) = \frac{ADC\,value \times V_{max}}{4095}
</script>
โดยที่ <script type="math/tex">V_{max}</script> คือ ค่าแรงดันสูงสุดสำหรับการเลือกอัตราการลดทอนสัญญาณอินพุตในแต่ละกรณี</p>
<p>อย่างไรก็ตาม จากเอกสารของผู้ผลิต ได้มีการแนะนำให้ทำการปรับค่าและชดเชยค่าความผิดพลาด
(<strong>ADC Calibration</strong>) จากการอ่านค่าด้วย <strong>ADC</strong>
ภายในชิป <strong>ESP32C3</strong> </p>
<p>รูปตัวอย่างต่อไปนี้ แสดงรูปกราฟความสัมพันธ์ของข้อมูลระหว่างค่าแรงดันไฟฟ้าที่ใช้เป็นอินพุตและค่าที่อ่านได้
โดยใช้ค่าลดทอนสัญญาณเป็น <code>ADC_ATTEN_DB_11</code> และควรจะมีค่าแรงดันอินพุตได้ไม่เกิน <strong>2500mV</strong></p>
<p>เมื่อมีการปรับชดเชยค่าความผิดพลาด โดยให้มีการเริ่มต้นค่าที่ <strong>0mV</strong> ก็จะได้รูปกราฟทางขวามือ
และค่า <script type="math/tex">V_{max}</script> จะได้ประมาณ <strong>2700mV</strong> ในกรณีที่อ่านค่าได้ <strong>4095</strong> (สูงสุด) 
และถ้ามีการเพิ่มแรงดันอินพุตให้สูงกว่าค่าดังกล่าว  (แต่ต้องไม่เกิน <strong>VCC=+3.3V</strong>)
การแปลงค่าด้วย <strong>ADC</strong> ก็จะให้ค่าคงเดิม ไม่เพิ่มตามแรงดันอินพุต</p>
<p><img alt="" src="esp32c3_adc_calibration.png" /></p>
<p>รูป: การแสดงความสัมพันธ์ระหว่างค่าแรงดันไฟฟ้าที่ใช้เป็นอินพุตและค่าที่อ่านได้
โดยเปรียบเทียบ 2 กรณี คือ ไม่มีการชดเชยค่าความผิดพลาดที่อ่านได้
(รูปซ้ายมือ) กับมีการชดเชยค่าความผิดพลาด (รูปขวามือ)</p>
<p>คำสั่งสำหรับการใช้งาน <strong>ADC1</strong> และ <strong>ADC2</strong> มีอยู่หลายคำสั่ง และสามารถดูได้จาก
<a href="https://docs.espressif.com/projects/esp-idf/en/v4.4.5/esp32c3/api-reference/peripherals/adc.html"><strong>ESP-IDF v4.4.5 - ADC API Reference</strong></a>
และคำสั่งสำหรับ <strong>Arduino-ESP32 Core</strong> ดูได้จากไฟล์ของซอร์สโค้ดต่อไปนี้</p>
<ul>
<li><a href="https://github.com/espressif/arduino-esp32/blob/master/cores/esp32/esp32-hal-adc.h"><code>cores/esp32/esp32-hal-adc.h</code></a></li>
<li><a href="https://github.com/espressif/arduino-esp32/blob/master/cores/esp32/esp32-hal-adc.c"><code>cores/esp32/esp32-hal-adc.c</code></a></li>
</ul>
<p>โค้ดตัวอย่างถัดไปสาธิตการอ่านค่าจากขาแอนะล็อก-อินพุต
โดยใช้วงจร <strong>ADC1 (Analog-to-Digital Converter</strong>) ภายในชิป <strong>ESP32C3</strong>
 ซึ่งมีขาให้เลือกใช้ได้สำหรับบอร์ด <strong>XIAO ESP32-C3</strong></p>
<table>
<thead>
<tr>
<th style="text-align: center;">XIAO Pin</th>
<th style="text-align: left;">ESP32C3 Pin</th>
<th style="text-align: left;">GPIO / ADC Channel</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">A0</td>
<td style="text-align: left;">Pin 6</td>
<td style="text-align: left;">GPIO2 / ADC1_CHANNEL_2</td>
</tr>
<tr>
<td style="text-align: center;">A1</td>
<td style="text-align: left;">Pin 8</td>
<td style="text-align: left;">GPIO3 / ADC1_CHANNEL_3</td>
</tr>
<tr>
<td style="text-align: center;">A2</td>
<td style="text-align: left;">Pin 9</td>
<td style="text-align: left;">GPIO4 / ADC1_CHANNEL_4</td>
</tr>
<tr>
<td style="text-align: center;">A3</td>
<td style="text-align: left;">Pin 10</td>
<td style="text-align: left;">GPIO5 / ADC2_CHANNEL_0</td>
</tr>
</tbody>
</table>
<p>ในโค้ดตัวอย่างนี้มีการเลือกใช้ขา <strong>GPIO2 / XIAO A0 Pin</strong> 
โดยนำไปต่อกับวงจรแบ่งแรงดัน (<strong>Voltage Divider</strong>) ที่สร้างขึ้นโดยใช้ตัวต้านทานปรับค่าได้
(<strong>Potentiometer</strong>) ขนาด <strong>10k</strong>
ใช้แรงดันไฟเลี้ยง <strong>3.3V</strong> จากบอร์ด </p>
<p>นอกจากนั้นแล้ว ก็มีการตั้งค่า <code>ADC_11db</code> สำหรับ <strong>ADC Attenuation</strong>
และความละเอียดของข้อมูลเท่ากับ 12 บิต
มีการใช้คำสั่ง <code>analogRead(...)</code> และ <code>analogReadMilliVolts(...)</code>
เพื่ออ่านค่าจากขา <strong>A0</strong> ทุก ๆ 100 มิลลิวินาที</p>
<p>ค่าที่อ่านได้จากคำสั่ง <code>analogRead(...)</code> จะเป็นเลขจำนวนเต็ม อยู่ในช่วง <strong>0 .. 4095</strong>
ถ้าต้องการจะแปลงให้เป็นค่านี้ให้เป็นแรงดันไฟฟ้า ก็จะต้องนำไปคำนวณแบบเชิงเส้น
โดยเทียบกับค่าแรงดันสูงสุด <script type="math/tex">V_{max}</script> ซึ่งได้กำหนดไว้เท่ากับ <strong>2735mV</strong> ในตัวอย่างนี้</p>
<p>ค่าที่อ่านได้ด้วยคำสั่ง <code>analogReadMilliVolts(...)</code> จะได้เป็นค่าตัวเลข มีหน่วยเป็นมิลลิโวลต์
และมีการชดเชยความผิดพลาดมาให้แล้ว โดยใช้ค่าที่เก็บไว้ในหน่วยความจำ <strong>eFuse</strong> สำหรับ <strong>ADC Calibration</strong>
มาคำนวณ</p>
<pre><code class="language-c++">#define AIN_PIN  (A0)     // Use XIAO A0 pin (GPIO2)
#define ADC_BITS (12)     // ADC reading resolution: 9..12 bits
#define VREF     (1100)   // Internal ADC reference voltage (in mV)
#define DMAX     ((1UL&lt;&lt;ADC_BITS)-1)
#define VMAX     (2735)   /// max. voltage for ADC attenuation of 11dB

void setup() {
  Serial.begin(115200);
  pinMode(AIN_PIN, ANALOG);
  delay(2000);

  // Set the ADC attenuation to -11dB
  analogSetPinAttenuation( AIN_PIN, ADC_11db ); // default
  // Set the ADC resolution to 12 bits 
  analogReadResolution( ADC_BITS ); // default
}

void loop() {
  static uint32_t ts_saved = 0;
  static String str;
  uint32_t ts_now = millis();
  if ( ts_now - ts_saved &gt;= 100 ) {
    ts_saved = ts_now;
    uint32_t value   = analogRead(AIN_PIN);
    uint32_t voltage = analogReadMilliVolts(AIN_PIN);
    str = &quot;mV(1):&quot;;
    str += value*VMAX/DMAX;
    str += &quot;,mV(2):&quot;;
    str += voltage;
    Serial.println( str.c_str() );
  }
}
</code></pre>
<p><img alt="" src="esp32c3_adc_reading.png" /></p>
<p>รูป:  ตัวอย่างข้อความเอาต์พุตที่ได้รับมาจากบอร์ด</p>
<p><img alt="" src="adc_plot-1.png" /></p>
<p>รูป: ตัวอย่างการแสดงกราฟของข้อมูลที่ได้รับมาจากบอร์ด
โดยใช้ <strong>Arduino Serial Plotter</strong> ในขณะที่มีการหมุนปรับค่าแรงดันอินพุต-แอนะล็อก</p>
<p>จากรูปกราฟ ข้อมูล <strong>mV(1)</strong> ได้จากการอ่านค่า <strong>ADC</strong>
โดยใช้คำสั่ง <code>analogRead(...)</code>
แล้วนำมาคำนวณให้เป็นแรงดันไฟฟ้า และ <strong>mV(2)</strong> ได้จากการใช้คำสั่ง
<code>analogReadMilliVolts(...)</code> โดยตรง</p>
<p><img alt="" src="adc_plot-2.png" /></p>
<p>รูป: การเปรียบเทียบค่า <strong>mV(1)</strong> และ <strong>mV(2)</strong> 
ที่ได้จากการอ่านค่าสัญญาณแอนะล็อกในช่องอินพุตเดียวกัน</p>
<p>&nbsp;</p>
<p>โค้ดตัวอย่างถัดไปเป็นการเปรียบเทียบการใช้คำสั่ง
<code>analogReadMilliVolts(...)</code> ของ <strong>Arduino-ESP32 API</strong>
กับการใช้คำสั่งต่อไปนี้ของ <strong>Espressif ESP-IDF API</strong>
เพื่อค่าจาก <strong>ADC</strong> แล้วนำไปแปลงให้เป็นตัวเลขสำหรับแรงดันไฟฟ้า</p>
<ul>
<li><code>esp_adc_cal_characterize(...)</code></li>
<li><code>adc1_get_raw(...)</code></li>
<li><code>esp_adc_cal_raw_to_voltage(...)</code></li>
</ul>
<pre><code class="language-c++">#include &quot;esp_adc_cal.h&quot;

// ADC characteristics structure used for ADC calibration.
esp_adc_cal_characteristics_t adc_chars;

void setup() {
  Serial.begin(115200);
  delay(2000);

  // ADC Single Read mode
  // Set the ADC resolution to 12 bits 
  adc1_config_width( ADC_WIDTH_12Bit );
  // Set the ADC attenuation level (11dB) for ADC1 Channel 2 (GPIO2)
  adc1_config_channel_atten(ADC1_CHANNEL_2, ADC_ATTEN_DB_11);

  // ADC calibration can be based on Two Point values
  if (esp_adc_cal_check_efuse(ESP_ADC_CAL_VAL_EFUSE_TP) == ESP_OK) {
    Serial.println( &quot;Two-point values calibration is supported in eFuse.&quot; );
  }

  // Initialize the ADC1 characteristics structure.
  esp_adc_cal_value_t cal_value = esp_adc_cal_characterize( ADC_UNIT_1,
                  ADC_ATTEN_DB_11, ADC_WIDTH_BIT_12, 1100, &amp;adc_chars );
  switch (cal_value) {
    case ESP_ADC_CAL_VAL_EFUSE_VREF: 
       Serial.println( &quot;eFuse Vref used for characterization&quot; ); break;
    case ESP_ADC_CAL_VAL_EFUSE_TP:
       Serial.println( &quot;Two-point values used for characterization&quot; ); break;
    case ESP_ADC_CAL_VAL_DEFAULT_VREF:
       Serial.println( &quot;Default Vref used for characterization&quot; ); break;
    default:
       Serial.println( &quot;Unknown ADC calibration method.. error&quot; ); break;
  }  
}

void loop() {
  static uint32_t ts_saved = 0;
  static String str;
  uint32_t ts_now = millis();
  if ( ts_now - ts_saved &gt;= 100 ) {
    ts_saved = ts_now;
    // read millivolts from XIAO A0 pin (ADC1 channel 2)
    uint32_t mV  = analogReadMilliVolts(A0); 
    // Read a raw value from the ADC1 channel 2.
    uint32_t raw = adc1_get_raw(ADC1_CHANNEL_2); 
    // Convert the raw value to voltage using the built-in ADC calibration 
    uint32_t voltage = esp_adc_cal_raw_to_voltage(raw, &amp;adc_chars);
    str = &quot;mV(1):&quot;;
    str += mV;
    str += &quot;,mV(2):&quot;;
    str += voltage;
    Serial.println( str.c_str() );
  }
}
</code></pre>
<p><img alt="" src="esp32c3_adc_esp_idf.png" /></p>
<p>รูป:  ตัวอย่างข้อความเอาต์พุต แสดงค่าแรงดันที่วัดได้ (ได้ค่า <strong>1596 mV</strong> เมื่อวัดแรงดันอินพุตด้วยมัลติมิเตอร์)</p>
<p><img alt="" src="adc_plot-3.png" /></p>
<p>รูป: กราฟข้อมูลเปรียบเทียบระหว่าง <strong>mV(1)</strong> และ <strong>mV(2)</strong> ที่มีการเปลี่ยนแปลงในเชิงเวลา</p>
<hr />
<h2 id="arduino-sketch-demo-5">&#9655; <strong>Arduino Sketch Demo 5</strong><a class="headerlink" href="#arduino-sketch-demo-5" title="Permanent link">#</a></h2>
<p>โค้ดตัวอย่างถัดไปสาธิตการทำให้ <strong>ESP32-C3</strong> เข้าสู่โหมด 
<a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/system/sleep_modes.html"><strong>Deep Sleep</strong></a>
เพื่อประหยัดพลังงาน และสามารถปลุกให้ซีพียูกลับมาทำงานได้ตามปรกติโดยการกดปุ่ม (<strong>Wakeup Pin</strong>)
ซึ่งในตัวอย่างนี้ได้เลือกใช้ขา <strong>GPIO-5</strong>
ดังนั้นจะต้องมีการต่อวงจรปุ่มกดเพิ่มที่ขาดังกล่าว และต่อตัวต้านทานแบบ <strong>Pullup (10k)</strong></p>
<p>เมื่อชิปถูกปลุกให้ทำงานในแต่ละครั้ง จะทำให้ <strong>LED</strong> ที่ขา <strong>GPIO-8</strong> กระพริบ 3 ครั้ง
ก่อนจะเข้าสู่โหมด <strong>Deep Sleep</strong> ถ้าไม่มีการกดปุ่มค้างไว้ 
ซึ่งจะเห็นได้ว่า <strong>LED</strong> จะไม่กระพริบ ดังนั้นซีพียูจะไม่ทำงานในขณะนั้น และรอการปลุกด้วยปุ่มกดในครั้งถัดไป</p>
<pre><code class="language-c++">#define LED_PIN     (8)
#define WAKEUP_PIN  (5)
#define LED_ON      (0)
#define LED_OFF     (!LED_ON)

void setup() {
  int state = LED_OFF;
  pinMode( LED_PIN, OUTPUT );
  digitalWrite( LED_PIN, LED_OFF );
  pinMode( WAKEUP_PIN, INPUT_PULLUP );

  for (int i=0; i &lt; 6; i++) { // Blink the LED.
    digitalWrite( LED_PIN, state^=1 );
    delay(500);
  }

  if ( digitalRead(WAKEUP_PIN) ) {
    // Enable deep sleep with GPIO wakeup.
    esp_deep_sleep_enable_gpio_wakeup( 
         (1&lt;&lt; WAKEUP_PIN), ESP_GPIO_WAKEUP_GPIO_LOW );
    // Enter the deep sleep mode.
    esp_deep_sleep_start();

    // The following statements will be not reached.
    while(1) { // Blink the LED repeatedly.
      digitalWrite( LED_PIN, state^=1 );
      delay(50);
    }
  } 
  else { // The button is hold pressed.
    Serial.begin( 115200 );
    delay(2000);
    Serial.println( &quot;ESP32C3 is running normally.&quot; );
    digitalWrite( LED_PIN, LED_ON );
  }
}

void loop(){
}
</code></pre>
<p>&nbsp;</p>
<hr />
<h2 id="_1">&#9655; <strong>กล่าวสรุป</strong><a class="headerlink" href="#_1" title="Permanent link">#</a></h2>
<p>บทความนี้ได้นำเสนอรายละเอียดในเบื้องต้นสำหรับการเริ่มต้นใช้งานบอร์ด
<strong>Seeeduino XIAO ESP32-C3</strong>
และได้สาธิตการทำงานของบอร์ดโดยการเขียนโปรแกรม <strong>Arduino Sketch</strong> เป็นตัวอย่าง</p>
<p>&nbsp;</p>
<hr />
<p>This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.</p>
<p>Created: 2023-09-16 | Last Updated: 2024-01-07</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2021-2026 IoT Engineering Education, Bangkok/Thailand</a></p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
