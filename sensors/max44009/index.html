<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="RSP">
        <link rel="canonical" href="https://iot-kmutnb.github.io/blogs/sensors/max44009/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>MAX44009 Ambient Ligiht Sensor Module - IoT Engineering Education</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../css/extra.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/c.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/cpp.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/arduino.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/typescript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/vhdl.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/verilog.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/text.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/plaintext.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/matlab.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/julia.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script>
        <script>hljs.highlightAll();</script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-966FQ6RN6W"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', "G-966FQ6RN6W");
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">IoT Engineering Education</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#max44009-ambient-ligiht-sensor-module" class="nav-link">MAX44009 Ambient Ligiht Sensor Module</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#maxim-max44009" class="nav-link">&#9655; Maxim MAX44009</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#gy-49-module" class="nav-link">&#9655; GY-49 Module</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#arduino" class="nav-link">&#9655; ตัวอย่างการเขียนโค้ด Arduino</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_1" class="nav-link">&#9655; กล่าวสรุป</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="max44009-ambient-ligiht-sensor-module">MAX44009 Ambient Ligiht Sensor Module<a class="headerlink" href="#max44009-ambient-ligiht-sensor-module" title="Permanent link">#</a></h1>
<hr />
<h2 id="maxim-max44009">&#9655; <strong>Maxim MAX44009</strong><a class="headerlink" href="#maxim-max44009" title="Permanent link">#</a></h2>
<p>ไอซี <strong>MAX44009</strong> (<a href="max44009_datasheet.pdf"><strong>Datasheet</strong></a>) 
ผลิตโดยบริษัท <strong>Maxim Integrated</strong> เป็นเซนเซอร์แสงที่ทำงานและให้เอาต์พุตแบบดิจิทัล (<strong>Digital Ambient Light Sensor</strong>) และสามารถวัดความเข้มแสงที่มองเห็นด้วยตาเปล่าได้ในสภาวะแวดล้อมโดยรอบ</p>
<p>คุณสมบัติของ <strong>MAX44009</strong> </p>
<ul>
<li>ทำงานได้โดยใช้พลังงานต่ำ (โดยทั่วไปแล้ว ปริมาณกระแสไฟฟ้าอยู่ในระดับต่ำกว่า  <strong>1μA</strong>)</li>
<li>สามารถวัดค่าความเข้มแสงได้ในช่วง  <strong>0.045 Lux</strong> ถึง <strong>188,000 Lux</strong>
  สำหรับความยาวคลื่นของแสงในช่วง  <strong>400nm ~ 700nm</strong> </li>
<li>ใช้แรงดันไฟเลี้ยง (<strong>VCC</strong>) ในช่วง <strong>1.7V ~ 3.6V</strong></li>
<li>ทำงานได้ในช่วงอุณหภูมิ <strong>-40 ~ +85 °C</strong>  </li>
<li>สื่อสารข้อมูลด้วยบัส <strong>I2C</strong> ความเร็วได้ถึง <strong>400kHz</strong></li>
<li>มีขา <strong>A0 (Address Select)</strong> จำนวนหนึ่งขา  (อินพุต)</li>
<li>มีขา <strong>/INT (Active-Low)</strong> สำหรับการตั้งค่า <strong>Threadhold</strong>
และเอาไว้เปรียบเทียบกับค่าที่วัดได้ สามารถเปิดการสร้างสัญญาณอินเทอร์รัพท์เป็นเอาต์พุตได้โดยอัตโนมัติ
ตามเงื่อนไขการเปรียบเทียบค่า <strong>Threadhold</strong></li>
</ul>
<p>ภายใน <strong>MAX44009</strong> มีวงจรที่ประกอบด้วยโฟโต้ไดโอด (<strong>Photodiode</strong>) และมีวงจรสำหรับการชดเชยหรือตัดส่วนที่เกิดจากอินฟราเรดออกไป (<strong>IR compensation / IR rejection</strong>) </p>
<p>เมื่อได้รับแสง จะทำให้เกิดกระแสไฟฟ้าไหลที่ตัวโฟโต้ไดโอด และนำไปผ่านวงจรแปลงกระแสให้เป็นแรงดันไฟฟ้า (<strong>OpAmp-based Current-to-Voltage Converter</strong>) แล้วแปลงสัญญาณแอนะล็อกให้เป็นข้อมูลดิจิทัล สำหรับการประมวลผลและสื่อสารข้อมูลผ่านบัส <strong>I2C</strong> ในลำดับถัดไป</p>
<p><img alt="" src="max44009_block_diagram.png" /> </p>
<p>รูป: <strong>Block Diagram</strong> ของไอซี <strong>MAX44009</strong></p>
<p>การทำงานของ <strong>MAX44009</strong> มีให้เลือกหลายโหมด ซึ่งขึ้นอยู่กับการตั้งค่าบิต <strong>Bit 7 CONTINUOUS</strong>
และ <strong>Bit 6 MANUAL</strong>ในรีจิสเตอร์ <strong>Configuration Register (Address 0x02)</strong></p>
<ul>
<li><strong>Default Mode:</strong>  เป็นโหมดการวัดค่าที่เกิดขึ้นซ้ำทุก ๆ 800 มิลวินาที </li>
<li><strong>Automatic Mode:</strong> เป็นโหมดการวัดค่าที่มีระยะเวลาในการวัดถูกเลือกโดยอัตโนมัติ (<strong>Integration time: TIM)</strong> อยู่ในช่วง 100 มิลลิวินาที ถึง 800 มิลลิวินาที ซึ่งขึ้นอยู่กับปริมาณแสงที่ได้รับในขณะทำการวัด</li>
<li><strong>Manual Mode:</strong> เป็นโหมดที่มีการเลือกระยะเวลาในการวัดได้ ตั้งแต่ 6.25 มิลลิวินาที ถึง 50 มิลลิวินาที</li>
<li><strong>Continuous Mode:</strong> เป็นโหมดการวัดต่อเนื่องซ้ำไปเรื่อย ๆ และเลือกระยะเวลาในการวัดได้</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: center;">Bit 7 CONTINUOUS</th>
<th style="text-align: center;">Bit 6 MANUAL</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: left;">Default, integration time 800 msec</td>
</tr>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: left;">Manual (one-shot), integration time selected by TIM[2:0] bits</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: left;">Continuous, automatic integration time: 100 .. 800 msec</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: left;">Continuous, manual integration time selected by TIM[2:0] bits</td>
</tr>
</tbody>
</table>
<p><img alt="" src="internal_register_map.png" /> </p>
<p>รูป: รายการรีจิสเตอร์ที่มีอยู่ภายใน <strong>MAX44009</strong> สำหรับการอ่านหรือเขียนข้อมูลไบต์ด้วยบัส <strong>I2C</strong></p>
<p><img alt="" src="integration_time_tim.png" /> </p>
<p>รูป: การเลือกค่าบิตสำหรับ <strong>Integration Time (TIM)</strong></p>
<p><img alt="" src="i2c_write_or_read_register.png" /></p>
<p>รูป: การเขียนหรืออ่านหนึ่งไบต์ลงในรีจิสเตอร์ (<strong>Write or Read Register</strong>) ภายใน <strong>MAX44009</strong></p>
<p>การเขียนค่าลงในรีจิสเตอร์ขนาดหนึ่งไบต์ มีลำดับดังนี้</p>
<ul>
<li>ไมโครคอนโทรลเลอร์เริ่มต้นด้วยการส่งสัญญาณเริ่มต้น (<strong>Start Signal: S</strong>)</li>
<li>ส่งไบต์แอดเดรสของอุปกรณ์ + บิตสำหรับการเขียน (<strong>R/W Bit: 0</strong>) แล้วตรวจสอบบิต <strong>Acknowledge: A</strong></li>
<li>ส่งไบต์ข้อมูลที่ระบุแอดเดรสของรีจิสเตอร์ (<strong>Register Address</strong>) แล้วตรวจสอบบิต <strong>ACK</strong> จากอุปกรณ์ </li>
<li>ส่งไบต์ข้อมูล (<strong>Data Byte</strong>) ที่ต้องการเขียนลงในรีจิสเตอร์ดังกล่าว แล้วตรวจสอบบิต <strong>ACK</strong> จากอุปกรณ์</li>
<li>จบท้ายด้วยการส่งสัญญาณจบ (<strong>Stop Signal: P</strong>)</li>
</ul>
<p>การอ่านค่าลงในรีจิสเตอร์ขนาดหนึ่งไบต์ </p>
<ul>
<li>เริ่มต้นด้วยการส่งสัญญาณเริ่มต้น (<strong>Start Signal: S</strong>)</li>
<li>ส่งไบต์แอดเดรสของอุปกรณ์ + บิตสำหรับการอ่าน (<strong>R/W Bit: 1</strong>) แล้วตรวจสอบบิต <strong>Acknowledge: A</strong> จากอุปกรณ์</li>
<li>ส่งไบต์ข้อมูลที่ระบุแอดเดรสของรีจิสเตอร์ (<strong>Register Address</strong>) แล้วตรวจสอบบิต <strong>ACK</strong> จากอุปกรณ์ </li>
<li>ส่งสัญญาณเริ่มต้นอีกครั้ง (<strong>Repeated Start: R</strong>) ข้อมูลที่ต้องการเขียนลงในรีจิสเตอร์ 
แล้วตรวจสอบบิต <strong>ACK</strong> จากอุปกรณ์</li>
<li>อ่านข้อมูลหนึ่งไบต์ จากอุปกรณ์ แล้วส่ง <strong>No Ack (/A)</strong> ไปยังอุปกรณ์</li>
<li>จบท้ายด้วยการส่งสัญญาณจบ (<strong>Stop Signal: P</strong>)</li>
</ul>
<p><img alt="" src="i2c_read_two_bytes.png" /></p>
<p>รูป: การอ่านข้อมูลไบต์จากรีจิสเตอร์ที่มีแอดเดรสต่างกัน (<strong>Register Address 1, 2</strong>) ตามลำดับ</p>
<hr />
<h2 id="gy-49-module">&#9655; <strong>GY-49 Module</strong><a class="headerlink" href="#gy-49-module" title="Permanent link">#</a></h2>
<p>เนื่องจากไอซี <strong>MAX44009</strong> มีขนาดเล็ก จึงนิยมใช้โมดูล <strong>Breakout</strong> เช่น โมดูล <strong>GY-49</strong></p>
<p>โมดูล <strong>GY-49</strong> มี 4 ขา ได้แก่</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Pin</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">VCC</td>
<td style="text-align: left;">Voltage Supply (+3.3V ~ +5V)</td>
</tr>
<tr>
<td style="text-align: left;">GND</td>
<td style="text-align: left;">Ground</td>
</tr>
<tr>
<td style="text-align: left;">SCL</td>
<td style="text-align: left;">I2C Clock</td>
</tr>
<tr>
<td style="text-align: left;">SDA</td>
<td style="text-align: left;">I2C Data</td>
</tr>
</tbody>
</table>
<p>ไอซี <strong>MAX44009</strong> มีขา <strong>A0 (Address Select)</strong> ให้กำหนดค่าแอดเดรสของอุปกรณ์ได้เป็น <code>0x4A</code> และ <code>0x4B</code>) แต่โมดูล <strong>GY-49</strong> ไม่มีขาสำหรับ <strong>ADDR</strong> แต่จะมี <strong>Solder Jumper</strong> 
สำหรับบัดกรี เพื่อกำหนดค่าบิต (และมีค่า Default เป็น <code>0x4A</code>)</p>
<p><img alt="" src="gy-49_module.png" /></p>
<p>รูป: โมดูล <strong>GY-49</strong> จากมุมมองด้านที่มีไอซี <strong>662K</strong>
(<strong>3.3V LDO Voltage Regulator</strong>)
และด้านที่รับแสงซึ่งมีไอซี <strong>MAX44009</strong> และมีการบัดกรีตรงตำแหน่ง <strong>Solder Jumper</strong> เอาไว้</p>
<p><img alt="" src="gy-49_schematic.png" /> </p>
<p>รูป: ผังวงจรของโมดูล <strong>GY-49</strong> (Source: <a href="http://wiki.sunfounder.cc/">wiki.sunfounder.cc</a>)</p>
<p>จากตัวอย่างผังวงจรจะเห็นได้ว่า โมดูล <strong>GY-49</strong> มีไอซี <strong>MAX44009</strong> และมีวงจร
แปลงแรงดันไฟเลี้ยง (<strong>LDO Voltage Regulator</strong> เช่น ใช้ไอซี <strong>622K</strong>) 
แปลงจากไฟเลี้ยง <strong>+5V</strong> ให้เป็น <strong>+3.3V</strong> และมีวงจรที่ทำหน้าที่แปลงระดับแรงดันลอจิก
(<strong>Logic Level Shifter</strong>) โดยใช้ทรานซิสเตอร์แบบ <strong>MOSFET</strong> 
(ใช้ไอซีเบอร์ <strong>K27 / 702 / 2N7002KDW: Dual N-Channel MOSFET, SOT3-6-3</strong>)</p>
<p>ตัวอย่างไลบรารีสำหรับการเขียนโค้ดด้วย <strong>Arduino</strong> และ <strong>MicroPython</strong> และมีการแชร์ไว้ใน <strong>Github</strong> ได้แก่</p>
<ul>
<li><a href="https://github.com/RobTillaart/Max44009">RobTillaart/Max44009</a></li>
<li><a href="https://github.com/dantudose/MAX44009">dantudose/MAX44009</a></li>
<li><a href="https://github.com/mcauser/micropython-max44009">mcauser/micropython-max44009</a></li>
</ul>
<hr />
<h2 id="arduino">&#9655; <strong>ตัวอย่างการเขียนโค้ด Arduino</strong><a class="headerlink" href="#arduino" title="Permanent link">#</a></h2>
<p>โค้ด <strong>Arduino Sketch</strong> สาธิตการอ่านค่าจากโมดูล <strong>GY-49</strong> โดยการเชื่อมต่อระหว่างไมโครคอนโทรลเลอร์
<strong>Arduino Uno / Nano</strong> หรือ <strong>ESP32</strong> ด้วยบัส <strong>I2C</strong> ความเร็ว <strong>400kHz</strong>
ถ้าใช้บอร์ด <strong>Arduino Nano</strong> ให้ใช้ขา <strong>A4</strong> และ <strong>A5</strong> สำหรับสัญญาณ <strong>SDA</strong> และ <strong>SCL</strong> 
ตามลำดับ แต่ถ้าเป็นบอร์ด <strong>ESP32</strong> สามารถเลือกใช้ขาได้ตามความเหมาะสม </p>
<pre><code class="language-cpp">//-------------------------------------------------------------------
// Author: RSP @ KMUTNB
// Date: 2022-08-23
// Target: Arduino ESP32 or Uno/Nano
//-------------------------------------------------------------------
#include &lt;Wire.h&gt;

// Select I2C Pins for ESP32
#define I2C_SDA_PIN  (33)
#define I2C_SCL_PIN  (32)
// Note: For arduino Uno or Nano, use A4 and A5 pins for SDA and SCL.

// Set the I2C address for the MAX44009 device
#define MAX44009_ADDR  (0x4a) // 0x4a or 0x4b

void setup() {
  Serial.begin( 115200 );
#if defined(ESP32)
  // set I2C Pins for ESP32
  Serial.println( &quot;Set I2C pins for ESP32&quot; );
  Wire.begin( I2C_SDA_PIN, I2C_SCL_PIN );
#else
  Wire.begin();
#endif
  Wire.setClock( 400000 ); // set I2C speed to 400kHz
  Wire.beginTransmission( MAX44009_ADDR );
  if ( Wire.endTransmission() &gt; 0 ) {
    Serial.println( &quot;MAX44009 not found! [error]&quot; );
  } else {
    Serial.println( &quot;MAX44009 found! [ok]&quot; );    
  }
}

void loop() {
  float lux = -1.0;
  if ( MAX44009_read( MAX44009_ADDR, &amp;lux ) ) {
#if defined(ESP32)
     Serial.printf( &quot;Light: %.1f lx\n&quot;, lux );
#else
     Serial.print( &quot;Light: &quot; );
     Serial.print( lux, 1 ); // only 1 digit after the decimal point
     Serial.println( &quot; lx&quot; ); 
#endif
  } else {
     Serial.println( &quot;Sensor reading error!&quot; );
  }
}

bool MAX44009_read( uint8_t addr, float *lux ) {
  uint8_t buf[2];
  *lux = 0.0;
  Wire.beginTransmission( addr );
  Wire.write( 0x02 ); // select the configuration register
  Wire.write( 0x44 );   // use manual mode, TIM[2:0]=0b100 (50 msec) or
  //Wire.write( 0x80 ); // use automatic mode
  if ( Wire.endTransmission() &gt; 0 ) {
    Serial.println( &quot;No sensor response!&quot; );
    return false;
  }
  delay(800); // wait for 800 msec
  uint8_t reg_addr[] = {0x03,0x04};
  for ( int i=0; i &lt; 2; i++ ) {
    Wire.beginTransmission( addr );
    Wire.write( reg_addr[i] ); // specify the register address 
    Wire.endTransmission( false ); // no stop, followed by repeated start
    Wire.requestFrom( addr, 1 );
    if ( Wire.available() == 1 ) {
      buf[i] = Wire.read(); // data from the selected register 
    } else {
      return false;
    }
  }
  Wire.endTransmission();
  // Convert the data to lux
  int exponent =  (buf[0] &amp; 0xf0) &gt;&gt; 4; // 4-bit exponent (E)
  int mantissa = ((buf[0] &amp; 0x0f) &lt;&lt; 4) | (buf[1] &amp; 0x0f); // 8-bit mantissa (M)
  *lux = (1UL &lt;&lt; exponent) * mantissa * 0.045;
  return true;
}
</code></pre>
<p>อีกตัวอย่างหนึ่งเป็นการสาธิตการใช้ไลบรารี <strong>Arduino MAX4409</strong> </p>
<p>โค้ดตัวอย่างการใช้ไลบรารี <a href="https://github.com/RobTillaart/Max44009/">https://github.com/RobTillaart/Max44009/</a></p>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;
#include &quot;Max44009.h&quot; // https://github.com/RobTillaart/Max44009/

Max44009 light( 0x4A );

void setup()  {
  Serial.begin( 115200 );
  Wire.begin();
  Wire.setClock( 400000 ); 
  delay(100);  
  light.setAutomaticMode(); // use automatic mode
}

void loop() {
  float lux = light.getLux();
  if ( light.getError() ) {
    Serial.println( &quot;Sensor reading failed! [error]&quot; );
  }
  else {
    Serial.print( &quot;Light: &quot; );
    Serial.print( lux, 1 );
    Serial.println( &quot; lx&quot; );
  }
  delay(1000);
}
</code></pre>
<p><img alt="" src="arduino_nano_gy49.jpg" /> </p>
<p>รูป: การต่อวงจรทดลองโดยใช้บอร์ดไมโครคอนโทรลเลอร์ <strong>Arduino Nano (5V)</strong></p>
<p><img alt="" src="esp32_gy49.jpg" /> </p>
<p>รูป: การต่อวงจรทดลองโดยใช้บอร์ดไมโครคอนโทรลเลอร์ <strong>ESP32 (3.3V)</strong></p>
<p>&nbsp;</p>
<hr />
<h2 id="_1">&#9655; <strong>กล่าวสรุป</strong><a class="headerlink" href="#_1" title="Permanent link">#</a></h2>
<p>บทความนี้ได้นำเสนอการใช้งานโมดูลที่มีไอซี <strong>MAX44009</strong> ซึ่งเป็นเซนเซอร์แบบดิจิทัลสำหรับการวัดความเข้มแสงในสภาวะแวดล้อมโดยรอบ โดยนำมาทดลองใช้งานร่วมกับบอร์ดไมโครคอนโทรลเลอร์ <strong>ESP32</strong> และ <strong>Arduino Nano</strong> และเขียนโปรแกรมด้วย <strong>Arduino IDE</strong> </p>
<p>&nbsp;</p>
<hr />
<p><em>This work is licensed under a</em> <strong><em>Creative Commons Attribution-ShareAlike 4.0 International License</em></strong>.</p>
<p>Created: 2022-08-23 | Last Updated: 2022-08-24</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2021-2026 IoT Engineering Education, Bangkok/Thailand</a></p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
