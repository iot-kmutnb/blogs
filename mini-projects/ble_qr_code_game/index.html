<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="RSP">
        <link rel="canonical" href="https://iot-kmutnb.github.io/blogs/mini-projects/ble_qr_code_game/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Treasure-Hunt Game using Bluetooth LE &amp; QR Code Technologies - IoT Engineering Education</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../css/extra.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/c.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/cpp.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/arduino.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/typescript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/vhdl.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/verilog.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/text.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/plaintext.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/matlab.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/julia.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script>
        <script>hljs.highlightAll();</script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-966FQ6RN6W"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', "G-966FQ6RN6W");
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">IoT Engineering Education</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#treasure-hunt-game-using-bluetooth-le-qr-code-technologies" class="nav-link">Treasure-Hunt Game using Bluetooth LE &amp; QR Code Technologies</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#project-overview" class="nav-link">&#9655; Project Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#game-design-development" class="nav-link">&#9655; Game Design &amp; Development</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#arduino-esp32-demo-code-for-ibeacon-broadcasting" class="nav-link">&#9655; Arduino-ESP32 Demo Code for iBeacon Broadcasting</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#conclusion" class="nav-link">&#9655; Conclusion</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="treasure-hunt-game-using-bluetooth-le-qr-code-technologies">Treasure-Hunt Game using Bluetooth LE &amp; QR Code Technologies<a class="headerlink" href="#treasure-hunt-game-using-bluetooth-le-qr-code-technologies" title="Permanent link">#</a></h1>
<p><strong>Keywords:</strong> <em>ESP32</em>, <em>Arduino-ESP32 Programming</em>, <em>Bluetooth Low Energy (BLE)</em>, <em>QR Code</em></p>
<hr />
<h2 id="project-overview">&#9655; <strong>Project Overview</strong><a class="headerlink" href="#project-overview" title="Permanent link">#</a></h2>
<p>This is an educational <strong>treasure-hunt game</strong> designed to teach kids or students
about <strong>Bluetooth Low Energy (BLE)</strong> and <strong>QR Code</strong> through interactive exploration.</p>
<p><strong>Goal</strong></p>
<ul>
<li>Find as many BLE beacon boxes (each with a valid QR code label) as possible.</li>
<li>Once they find one, they take a photo of its QR code label on the box as proof.</li>
<li>The instructor later uses a QR code scanner and the Web app developed for this game
to scan the collected photos, verify the codes and score the players.</li>
</ul>
<p>This is a hands-on learning game that teaches kids the following concepts:</p>
<ul>
<li>BLE advertising concepts and application of iBeacon protocol </li>
<li>BLE received signal strength and proximity detection</li>
<li>QR code application</li>
</ul>
<hr />
<h2 id="game-design-development">&#9655; <strong>Game Design &amp; Development</strong><a class="headerlink" href="#game-design-development" title="Permanent link">#</a></h2>
<ol>
<li>
<p><strong>BLE Beacon Devices</strong></p>
<ul>
<li>BLE-capable microcontroller boards such as <strong>ESP32/ESP32-C3</strong> 
(and other BLE-capable, Arduino-programmable MCU boards) are used for this game.</li>
<li>Each device is programmed to periodically advertises <strong>iBeacon packets</strong> with a fixed UUID and a unique name like "<code>ECE-&lt;Hex string&gt;</code>" such as "<code>ECE-24A1F01234AB</code>".</li>
<li>Each device can be powered by a rechargeable battery (LiPo 3.7V) and enclosed in a small plastic box.</li>
</ul>
</li>
<li>
<p><strong>Game Environment</strong></p>
<ul>
<li>The beacon boxes are placed at different locations in lab space, or outdoor space.</li>
<li>Each box has a QR code printed on it that encodes its beacon name or UUID.</li>
</ul>
</li>
<li>
<p><strong>Players</strong></p>
<ul>
<li>Each player (or team) uses a Smartphone with nRF Connect app (or any BLE scanning app).</li>
<li>They open the app and scan for nearby BLE beacons whose names start with the "ECE-" prefix.</li>
<li>By observing the RSSI (signal strength), they can estimate how close they are to a device.</li>
<li>Note: RSSI (received signal strength indication) is an approximation, affected by walls and orientation.</li>
</ul>
</li>
<li>
<p><strong>ESP32 / ESP32-C3 devices</strong></p>
<ul>
<li>Arduino-ESP32 coding uses the BLE library provided by Espressif ESP-IDF.<ul>
<li>Note: Remove the <code>ArduinoBLE</code> library by Arduino to avoid library conflicts.</li>
</ul>
</li>
<li>Each ESP32 advertises as an iBeacon using provided Arduino code.<ul>
<li>Advertisement Interval = 100 ms (default)</li>
</ul>
</li>
<li>Power-up and deep-sleep cycle:<ul>
<li>Beacon starts advertising.</li>
<li>LED flashes for a short time.</li>
<li>The device enters deep sleep to save battery.</li>
</ul>
</li>
<li>BLE power level (<code>ESP_PWR_LVL_P9</code> is the highest TX power) could be 
  reduced to balance range and lifetime.</li>
</ul>
</li>
<li>
<p><strong>Using Smartphone or BLE Beacon Scanning</strong></p>
<ul>
<li>Players have to install and use a BLE scanner app such as 
"<strong>nRF Connect</strong>" or "<strong>LightBlue Explorer</strong>" to scan BLE advertisements.</li>
<li>Players manually open the BLE scanner app and keep it in the foreground. They filter by name prefix "ECE".</li>
<li>As they walk around, the RSSI value increases when closer to a beacon box.</li>
<li>Recommended BLE Scanning Apps:<ul>
<li><a href="https://play.google.com/store/apps/details?id=no.nordicsemi.android.mcp"><strong>nRF Connect for Mobile</strong></a></li>
<li><a href="https://play.google.com/store/apps/details?id=com.punchthrough.lightblueexplorer"><strong>LightBlue Explorer</strong></a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>QR Code Verification</strong></p>
<ul>
<li>Each beacon box has a QR code label containing the beacon name.</li>
<li>Players take photos as "proof of discovery".</li>
<li>The game instructor later use a USB-HID QR code scanner to scan those QR codes to verify which beacons were found.</li>
<li>The game instructor can use a small Python or web app to scan all QR code photos quickly and match against a known list of beacons.</li>
</ul>
</li>
</ol>
<p><img alt="" src="esp32c3_modules.jpg" /></p>
<p><strong>Figure:</strong> Examples of ESP32-C3 modules </p>
<p><img alt="" src="web_app_demo-init.jpg" /></p>
<p><strong>Figure:</strong> Web App GUI demo before any QR codes are scanned</p>
<p><img alt="" src="web_app_demo-1.jpg" /></p>
<p><strong>Figure:</strong> Web App GUI Demo showing both valid and invalid QR codes </p>
<p><img alt="" src="web_app_demo-2.jpg" /></p>
<p><strong>Figure:</strong> Web App GUI demo showing only valid QR codes after invalid entries are removed.</p>
<p>The following is the web app demo code (HTML, CSS, and JavaScript) that demonstrates the main concept of the game.</p>
<p><strong>File:</strong> index.html</p>
<pre><code class="language-HTML">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;Treasure-Hunt Game using Bluetooth LE &amp; QR Code&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class=&quot;container&quot;&gt;
    &lt;h1&gt;BLE QR Code Image Checker&lt;/h1&gt;
    &lt;p id=&quot;validCount&quot;&gt;Valid QR Codes: 0&lt;/p&gt;
    &lt;p&gt;Type or scan a QR code and press ENTER.&lt;/p&gt;

    &lt;input type=&quot;text&quot; id=&quot;hiddenInput&quot; autocomplete=&quot;off&quot;&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;#&lt;/th&gt;
          &lt;th&gt;QR Code&lt;/th&gt;
          &lt;th&gt;Scan Date/Time&lt;/th&gt;
          &lt;th&gt;Valid&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody id=&quot;qrTableBody&quot;&gt;&lt;/tbody&gt;
    &lt;/table&gt;

    &lt;button id=&quot;clearInvalidBtn&quot; class=&quot;btn-blue&quot;&gt;Remove Invalid&lt;/button&gt;
    &lt;button id=&quot;clearAllBtn&quot; class=&quot;btn-red&quot;&gt;Clear All&lt;/button&gt;
  &lt;/div&gt;

  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>File:</strong> style.css</p>
<pre><code class="language-CSS">body {
  font-family: Arial, sans-serif;
  background-color: #f9fafb;
  color: #1f2937;
  padding: 2rem;
}

.container {
  max-width: 750px;
  margin: 0 auto;
  background-color: #fff;
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

h1 {
  text-align: center;
  margin-bottom: 1rem;
}

#validCount {
  font-weight: bold;
  margin-bottom: 0.5rem;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 0.5rem;
}

th, td {
  border: 1px solid #d1d5db;
  padding: 0.5rem;
  text-align: center;
}

th {
  background-color: #e5e7eb;
}

.valid-mark {
  color: green;
  font-weight: bold;
}

.invalid-mark {
  color: red;
  font-weight: bold;
}

button {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 0.5rem;
  cursor: pointer;
  margin-top: 0.5rem;
  margin-right: 0.5rem;
  color: white;
}

button:hover {
  opacity: 0.9;
}

.btn-blue {
  background-color: #3b82f6;
}

.btn-red {
  background-color: #ef4444;
}

#hiddenInput {
  position: absolute;
  left: -9999px;
}
</code></pre>
<p><strong>File:</strong> script.js</p>
<pre><code class="language-JavaScript">const scannedQRs = new Map();
const tableBody  = document.getElementById('qrTableBody');
const hiddenInput = document.getElementById('hiddenInput');
const clearAllBtn = document.getElementById('clearAllBtn');
const clearInvalidBtn = document.getElementById('clearInvalidBtn');
const validCountLabel = document.getElementById('validCount');

let validQRCodes = [];
let validCount = 0;

// Load valid QR codes from JSON file
fetch('valid_codes.json')
  .then(res =&gt; res.json())
  .then(data =&gt; { validQRCodes = data; })
  .catch(err =&gt; console.error('Failed to load valid QR codes:', err));

// Keep input focused for scanner
hiddenInput.focus();
document.addEventListener('click', () =&gt; hiddenInput.focus());

// Beep sound
function playBeep(frequency = 1000, duration = 0.1) {
  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  const oscillator = audioCtx.createOscillator();
  oscillator.type = 'square';
  oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);
  oscillator.connect(audioCtx.destination);
  oscillator.start();
  oscillator.stop(audioCtx.currentTime + duration);
}

// Update row indices
function updateRowIndices() {
  const rows = tableBody.querySelectorAll('tr');
  rows.forEach((row, index) =&gt; row.cells[0].textContent = index + 1);
}

// Update valid count
function updateValidCount() {
  validCountLabel.textContent = `Valid QR Codes: ${validCount}`;
}

// Add or update a QR code entry
function addOrUpdateRow(qr) {
  const now = new Date().toLocaleString();
  const isValid = validQRCodes.includes(qr);

  if (scannedQRs.has(qr)) {
    const row = scannedQRs.get(qr);
    row.cells[2].textContent = now;
    const wasValid = row.cells[3].textContent === '✔';

    if (isValid) {
      row.cells[3].textContent = '✔';
      row.cells[3].classList.add('valid-mark');
      row.cells[3].classList.remove('invalid-mark');
      if (!wasValid) validCount++;
      playBeep(1000, 0.1);
    } else {
      row.cells[3].textContent = '✖';
      row.cells[3].classList.add('invalid-mark');
      row.cells[3].classList.remove('valid-mark');
      if (wasValid) validCount--;
      playBeep(400, 0.1);
    }
  } else {
    const row = tableBody.insertRow();
    const indexCell = row.insertCell(0);
    const qrCell    = row.insertCell(1);
    const timeCell  = row.insertCell(2);
    const validCell = row.insertCell(3);

    qrCell.textContent = qr;
    timeCell.textContent = now;

    if (isValid) {
      validCell.textContent = '✔';
      validCell.classList.add('valid-mark');
      playBeep(1000, 0.1);
      validCount++;
    } else {
      validCell.textContent = '✖';
      validCell.classList.add('invalid-mark');
      playBeep(400, 0.1);
    }
    scannedQRs.set(qr, row);
    updateRowIndices();
  }

  updateValidCount();
}

// Handle Enter key
hiddenInput.addEventListener('keydown', (e) =&gt; {
  if (e.key === 'Enter') {
    e.preventDefault();
    const qr = hiddenInput.value.trim();
    if (qr) addOrUpdateRow(qr);
    hiddenInput.value = '';
  }
});

// Handle paste
document.addEventListener('paste', (e) =&gt; {
  const qr = (e.clipboardData || window.clipboardData).getData('text').trim();
  if (qr) addOrUpdateRow(qr);
});

// Clear all rows
clearAllBtn.addEventListener('click', () =&gt; {
  tableBody.innerHTML = '';
  scannedQRs.clear();
  validCount = 0;
  updateValidCount();
});

// Remove invalid rows
clearInvalidBtn.addEventListener('click', () =&gt; {
  const rows = Array.from(tableBody.querySelectorAll('tr'));
  rows.forEach(row =&gt; {
    const markCell = row.cells[3];
    if (markCell.textContent === '✖') {
      const qr = row.cells[1].textContent;
      scannedQRs.delete(qr);
      row.remove();
    }
  });
  updateRowIndices();
  updateValidCount();
});
</code></pre>
<p>&nbsp;</p>
<p>A JSON file named <code>valid_codes.json</code> is also required.
This file contains a list of all valid QR codes that the web app will recognize.
A sample JSON file is shown below:</p>
<pre><code class="language-json">[
  &quot;ECE-24A1F01234AB&quot;,
  &quot;ECE-FAE19C01A7B3&quot;,
  &quot;ECE-0A1B2C3D4E5F&quot;,
  &quot;ECE-112233445566&quot;,
  &quot;ECE-82A15086EC9B&quot;,
  &quot;ECE-CB745B11C682&quot;,
  &quot;ECE-6F2344DF1AB9&quot;
]
</code></pre>
<p>&nbsp;</p>
<p>The following Python code generates a sequence of QR code images for the strings 
listed in the <code>valid_codes.json</code> file by utilizing the <strong>qrcode</strong>, 
<strong>OpenCV</strong>, <strong>NumPy</strong> and <strong>Pillow</strong> libraries.</p>
<pre><code class="language-python">import json
import time
import qrcode
import cv2
import numpy as np
from PIL import Image, ImageDraw, ImageFont

# Load list of valid QR codes from JSON file
with open(&quot;valid_codes.json&quot;, &quot;r&quot;) as f:
    qr_strings = json.load(f)

if not qr_strings:
    print(&quot;No QR codes found in the JSON file.&quot;)
    exit()

def generate_qr_image(data, box_size=5, border=4):
    &quot;&quot;&quot;
    Generate a QR code with text displayed below.
    Returns the image in OpenCV format.
    &quot;&quot;&quot;
    # Create QR code
    qr = qrcode.QRCode(
        version=1,
        error_correction=qrcode.constants.ERROR_CORRECT_H,
        box_size=box_size,
        border=border,
    )
    qr.add_data(data)
    qr.make(fit=True)
    qr_img = qr.make_image(fill_color=&quot;black&quot;, 
                           back_color=&quot;white&quot;).convert(&quot;RGB&quot;)

    # Load font
    font_size = 2*box_size + 4
    try:
        font = ImageFont.truetype(&quot;arial.ttf&quot;, font_size)
    except OSError:
        font = ImageFont.load_default()

    # Measure text size
    draw = ImageDraw.Draw(qr_img)
    bbox = draw.textbbox((0, 0), data, font=font)
    text_width = bbox[2] - bbox[0]
    text_height = bbox[3] - bbox[1]

    # Create new image with extra space for text
    img_width = qr_img.width
    total_height = qr_img.height + text_height + 10
    final_img = Image.new(&quot;RGB&quot;, (img_width, total_height), &quot;white&quot;)
    final_img.paste(qr_img, (0, 0))

    # Draw centered text below QR code
    draw = ImageDraw.Draw(final_img)
    text_x = (img_width - text_width) // 2
    text_y = qr_img.height - font_size // 2
    draw.text((text_x, text_y), data, fill=&quot;black&quot;, font=font)
    # Convert PIL image to OpenCV format
    cv_img = cv2.cvtColor(np.array(final_img), cv2.COLOR_RGB2BGR)
    return cv_img

# --- Main display loop ---
cv2.namedWindow(&quot;QR Code Display&quot;, cv2.WINDOW_AUTOSIZE)
SHOW_INTERVAL_SEC = 2

try:
    print(&quot;Press ESC to exit...\n&quot;)
    count = 1

    while True:
        for data in qr_strings:
            print(f&quot;Showing QR code {count}: {data}&quot;)
            count += 1

            img = generate_qr_image(data)
            cv2.imshow(&quot;QR Code Display&quot;, img)

            # Show image for a few seconds or until ESC is pressed
            start_time = time.time()
            while time.time() - start_time &lt; SHOW_INTERVAL_SEC:
                key = cv2.waitKey(100)
                if key == 27:  # ESC key
                    raise KeyboardInterrupt

except KeyboardInterrupt:
    print(&quot;\nStopped by user.&quot;)
finally:
    cv2.destroyAllWindows()
</code></pre>
<p><img alt="" src="qrcode_testing.jpg" /></p>
<p><strong>Figure:</strong> Generating QR code images with a Python script for testing with a USB-HID QR code scanner.</p>
<p>&nbsp;</p>
<hr />
<h2 id="arduino-esp32-demo-code-for-ibeacon-broadcasting">&#9655; <strong>Arduino-ESP32 Demo Code for iBeacon Broadcasting</strong><a class="headerlink" href="#arduino-esp32-demo-code-for-ibeacon-broadcasting" title="Permanent link">#</a></h2>
<p>The provided Arduino code implements an ESP32-based iBeacon for the treasure-hunt game.
The first version sets up a basic BLE advertisement using a fixed UUID, Major/Minor values, and device name. It continuously broadcasts iBeacon packets while the LED flashes briefly at startup, allowing players to detect the device using BLE scanner apps.</p>
<pre><code class="language-C++">// Arduino Sketch: Demo 1
// Date: 2025-10-28
#include &lt;BLEDevice.h&gt;
#include &lt;BLEBeacon.h&gt;
#include &lt;BLEUtils.h&gt;
#include &lt;BLE2902.h&gt;
#include &lt;BLEAdvertising.h&gt;

#define LED_PIN  (8) // onboard LED pin
//#define LED_PIN RGB_BUILTIN

#define DEVICE_NAME &quot;ECE-&quot;
#define BEACON_UUID &quot;2D7A9F0C-E0E8-4CC9-A71B-A21DB2D034A1&quot;

#define BEACON_POWER ESP_PWR_LVL_N12

// Static Major/Minor values
uint16_t STATIC_MAJOR = 1;
uint16_t STATIC_MINOR = 1;

// Helper function to process the string (uppercase and remove colons)
String formatName(String name) {
    name.toUpperCase(); // Convert to uppercase
    name.replace(&quot;:&quot;, &quot;&quot;); // Remove colons
    return name;
}

void init_BLE() {
  BLEDevice::init(DEVICE_NAME);

  // Set the actual hardware transmit power
  BLEDevice::setPower(BEACON_POWER);

  // 1. Set up iBeacon Payload
  BLEBeacon beacon;
  beacon.setManufacturerId(0x4c00); // Apple iBeacon ID
  beacon.setProximityUUID(BLEUUID(BEACON_UUID));
  beacon.setMajor(STATIC_MAJOR);  // Static Major
  beacon.setMinor(STATIC_MINOR);  // Static Minor
  beacon.setSignalPower(BEACON_POWER);

  // 2. Create Advertisement Data (iBeacon only)
  BLEAdvertisementData advData;
  advData.setFlags(0x06); // LE General Discoverable + BR/EDR Not Supported

  // Add ONLY the iBeacon Manufacturer Data - NO device name
  advData.setManufacturerData(beacon.getData());

  // 3. Create Scan Response Data (with device name) &lt;====
  BLEAdvertisementData scanResponse;

  String name = DEVICE_NAME;
  name += BLEDevice::getAddress().toString();
  scanResponse.setName(formatName(name).c_str());

  // 4. Start Advertising
  BLEAdvertising *pAdvertising = BLEDevice::getAdvertising();
  pAdvertising-&gt;setMinInterval(160);  // 100 ms
  pAdvertising-&gt;setMaxInterval(160);  // 100 ms

  // Set the primary advertisement data (iBeacon)
  pAdvertising-&gt;setAdvertisementData(advData);

  // Set the scan response data (device name)
  pAdvertising-&gt;setScanResponseData(scanResponse);

  // ADV_TYPE_SCAN_IND (0x02) - Scannable undirected advertising
  // This allows scan responses while remaining non-connectable
  pAdvertising-&gt;setAdvertisementType(0x02);  
  pAdvertising-&gt;start();

  // Print the BLE device address
  Serial.print(&quot;BLE Device Address: &quot;);
  Serial.println(BLEDevice::getAddress().toString().c_str());

  // Print the formatted name
  Serial.print(&quot;Device Name: &quot;);
  Serial.println(formatName(name));
}

void setup() {
  Serial.begin(115200);
  pinMode(LED_PIN, OUTPUT);
  for (int i = 0; i &lt; 10; i++) {
    digitalWrite(LED_PIN, !digitalRead(LED_PIN));
    delay(100);
  }
  Serial.println(&quot;Initializing iBeacon...&quot;);
  init_BLE();
  Serial.println(&quot;iBeacon broadcasting...&quot;);
}

void loop() {
  delay(1000);  // Simple loop, no dynamic changes
}
</code></pre>
<p>&nbsp;</p>
<p>Next, the extended version adds deep-sleep and wake-up functionality to save battery. 
It dynamically updates Major/Minor values based on boot count, toggles an LED for visual feedback, and controls BLE transmit power. This ensures energy-efficient beacon operation, while maintaining compatibility with BLE scanners for proximity-based treasure hunting.</p>
<pre><code class="language-C++">// Arduino Sketch: Demo 2
// Target board: ESP32-C3 Super Mini
#include &lt;Arduino.h&gt;

#include &lt;BLEDevice.h&gt;
#include &lt;BLEBeacon.h&gt;
#include &lt;BLEUtils.h&gt;
#include &lt;BLE2902.h&gt;
#include &lt;BLEAdvertising.h&gt;
#include &lt;esp_sleep.h&gt;
#include &lt;sys/time.h&gt;

#define BTN_PIN  (9)  // use the onboard BOOT button
#define LED_PIN  (8)  // use the onboard LED
//#define LED_PIN  (RGB_BUILTIN)

#define DEVICE_NAME &quot;ECE-&quot;

// Standard iBeacon UUID
#define BEACON_UUID &quot;2D7A9F0C-E0E8-4CC9-A71B-A21DB2D034A1&quot;  

#define DEEP_SLEEP_DURATION_SEC 10  // sleep x seconds and then wake up
// Use the desired power level (ESP_PWR_LVL_P9 is the highest)
#define BEACON_POWER ESP_PWR_LVL_P9

RTC_DATA_ATTR static time_t last; // remember last boot in RTC Memory
RTC_DATA_ATTR static uint32_t bootcount; // remember number of boots in RTC Memory

BLEAdvertising *pAdvertising;
struct timeval now;

// Task handles for inter-task communication
static TaskHandle_t ledTaskHandle = NULL;

// Global constants
const TickType_t FLASH_DELAY_MS = pdMS_TO_TICKS(100); // 100ms between toggles
const int FLASH_COUNT_MAX = 100;   // Number of times to flash

void LedToggleTask(void *pvParameters) {
    int count = 0;
    while (count &lt; FLASH_COUNT_MAX) {
        digitalWrite(LED_PIN, HIGH);
        vTaskDelay(1);
        digitalWrite(LED_PIN, LOW);
        vTaskDelay(499);
        count++;
    }
    digitalWrite(LED_PIN, LOW);
    vTaskDelete(NULL);
}

// Helper function to format the advertisement name
String formatName(String name) {
  name.toUpperCase();     // Convert to uppercase
  name.replace(&quot;:&quot;, &quot;&quot;);  // Remove colons
  return name;
}

void setBeacon() {
  // Use bootcount to set Major/Minor values
  uint16_t dynamicMajor = (uint16_t)(bootcount / 10);
  uint16_t dynamicMinor = (uint16_t)(bootcount % 10);

  // 1. Set up iBeacon Payload-
  BLEBeacon beacon;
  beacon.setManufacturerId(0x4c00); // Apple iBeacon ID
  beacon.setProximityUUID(BLEUUID(BEACON_UUID));

  // Set dynamic Major/Minor values based on bootcount
  beacon.setMajor(dynamicMajor);
  beacon.setMinor(dynamicMinor);

  // Transmit power setting inside the beacon frame (Informational)
  // The actual hardware power is set by BLEDevice::setPower() in setup()
  beacon.setSignalPower(BEACON_POWER);

  // 2. Create Advertisement Data
  BLEAdvertisementData advData;
  advData.setFlags(0x06); // LE General Discoverable + BR/EDR Not Supported

  // Create Scan Response Data (with device name)
  BLEAdvertisementData scanResponse;

  // Set the device name in the advertisement payload
  String name = DEVICE_NAME;
  name += BLEDevice::getAddress().toString();
  scanResponse.setName(formatName(name).c_str());

  // Add the iBeacon Manufacturer Data (this is the core iBeacon payload)
  advData.setManufacturerData(beacon.getData());

  // 3. Configure Advertising
  pAdvertising-&gt;setMinInterval(160); // 100 ms
  pAdvertising-&gt;setMaxInterval(160); // 100 ms

  // Set the primary advertisement data (iBeacon)
  pAdvertising-&gt;setAdvertisementData(advData);

  // Set the scan response data (device name)
  pAdvertising-&gt;setScanResponseData(scanResponse);

  pAdvertising-&gt;setAdvertisementData(advData);
  // Non-Connectable Undirected Advertising
  pAdvertising-&gt;setAdvertisementType(0x02); 

  Serial.printf(&quot;iBeacon Major: %d, Minor: %d\n&quot;, 
                dynamicMajor, dynamicMinor);
}

void setup() {
  Serial.begin(115200);
  gettimeofday(&amp;now, NULL);
  pinMode(LED_PIN, OUTPUT);
  pinMode(BTN_PIN, INPUT_PULLUP);

  xTaskCreate(
        LedToggleTask,         // Task function
        &quot;LED_TOGGLE&quot;,          // Name of task
        2048,                  // Stack size (bytes)
        NULL,                  // Parameter to pass
        1,                     // Priority (0 is lowest)
        &amp;ledTaskHandle         // Task handle to store
  );
  Serial.println(&quot;LED Toggle Task created...&quot;);

  // Check the last boot time and increment bootcount
  Serial.printf(&quot;Start ESP32 #%lu\n&quot;, bootcount);
  Serial.printf(&quot;Deep sleep (%llds since last reset, %llds since last boot)\n&quot;, 
                now.tv_sec, now.tv_sec - last);

  last = now.tv_sec;

  // Create the BLE Device
  BLEDevice::init(DEVICE_NAME);

  // Set the actual hardware transmit power
  BLEDevice::setPower(BEACON_POWER);
  pAdvertising = BLEDevice::getAdvertising();

  setBeacon();

  // Start advertising
  pAdvertising-&gt;start();
  // Advertise for approx. 2 seconds
  Serial.println(&quot;Advertising started...&quot;);
  // Print the BLE device address
  Serial.print(&quot;BLE Device Address: &quot;);
  String ble_mac_string = BLEDevice::getAddress().toString();
  ble_mac_string.toUpperCase();
  Serial.println(ble_mac_string.c_str());
  delay(2000);
  pAdvertising-&gt;stop();
  Serial.println(&quot;Advertising stopped...&quot;);

  if (ledTaskHandle != NULL &amp;&amp; eTaskGetState(ledTaskHandle) != eDeleted) { 
    vTaskDelete(ledTaskHandle);
    Serial.println(&quot;LED Toggle Task deleted&quot;);
  }
  ledTaskHandle = NULL;

  // Increment bootcount for the next wake cycle and enter deep sleep
  bootcount++;
  if (digitalRead(BTN_PIN) == HIGH) {
    Serial.println(&quot;Enter deep sleep...&quot;);
    delay(100);  // Give time for the Serial output to flush
    esp_deep_sleep(1000000LL * DEEP_SLEEP_DURATION_SEC);
  } else {
    pAdvertising-&gt;start();
    Serial.println(&quot;Advertising started (no deep sleep)...&quot;);
  }
}

void loop() {}
</code></pre>
<p>&nbsp;</p>
<p>The following Arduino sketch is a modified version of the previous example, enabling the ESP32 device to broadcast BLE beacons under three different beacon names.</p>
<pre><code class="language-C++">// Arduino Sketch: Demo 3
// Target board: ESP32-C3 Super Mini
#include &lt;Arduino.h&gt;

#include &lt;BLEDevice.h&gt;
#include &lt;BLEBeacon.h&gt;
#include &lt;BLEUtils.h&gt;
#include &lt;BLE2902.h&gt;
#include &lt;BLEAdvertising.h&gt;
#include &lt;esp_sleep.h&gt;
#include &lt;sys/time.h&gt;

#define BTN_PIN  (9)   // use the onboard BOOT button
#define LED_PIN  (8)   // use the onboard LED
//#define LED_PIN  (RGB_BUILTIN)

#define BEACON_UUID &quot;2D7A9F0C-E0E8-4CC9-A71B-A21DB2D034A1&quot;  // iBeacon UUID
#define DEEP_SLEEP_DURATION_SEC 5

#define BEACON_POWER ESP_PWR_LVL_N3

#define LED_ON  (LOW)
#define LED_OFF (!LED_ON)

// Beacon name list (up to 3)
const char *names[] = {
  &quot;ECE-24A1F01234AB&quot;,
  &quot;ECE-FAE19C01A7B3&quot;,
  &quot;ECE-0A1B2C3D4E5F&quot;
};

const int NUM_NAMES = sizeof(names) / sizeof(names[0]);

// Function to convert enum to string
const char* powerLevelToString(esp_power_level_t level) {
  switch (level) {
    case ESP_PWR_LVL_N24: return &quot;-24 dBm&quot;;
    case ESP_PWR_LVL_N21: return &quot;-21 dBm&quot;;
    case ESP_PWR_LVL_N18: return &quot;-18 dBm&quot;;
    case ESP_PWR_LVL_N15: return &quot;-15 dBm&quot;;
    case ESP_PWR_LVL_N12: return &quot;-12 dBm&quot;;
    case ESP_PWR_LVL_N9:  return &quot;-9 dBm&quot;;
    case ESP_PWR_LVL_N6:  return &quot;-6 dBm&quot;;
    case ESP_PWR_LVL_N3:  return &quot;-3 dBm&quot;;
    case ESP_PWR_LVL_N0:  return &quot;0 dBm&quot;;
    case ESP_PWR_LVL_P3:  return &quot;+3 dBm&quot;;
    case ESP_PWR_LVL_P6:  return &quot;+6 dBm&quot;;
    case ESP_PWR_LVL_P9:  return &quot;+9 dBm&quot;;
    case ESP_PWR_LVL_P12: return &quot;+12 dBm&quot;;
    case ESP_PWR_LVL_P15: return &quot;+15 dBm&quot;;
    case ESP_PWR_LVL_P18: return &quot;+18 dBm&quot;;
    case ESP_PWR_LVL_P20: return &quot;+20 dBm&quot;;
    default: return &quot;Invalid Power Level&quot;;
  }
};

// Store across sleep cycles
RTC_DATA_ATTR static time_t last;
RTC_DATA_ATTR static uint32_t bootcount = 0;

BLEAdvertising *pAdvertising;
struct timeval now;

// LED blink task
static TaskHandle_t ledTaskHandle = NULL;
const TickType_t FLASH_DELAY_MS = pdMS_TO_TICKS(100);
const int FLASH_COUNT_MAX = 20;

void LedToggleTask(void *pvParameters) {
  int count = 0;
  while (count &lt; FLASH_COUNT_MAX) {
    digitalWrite(LED_PIN, LED_ON);
    vTaskDelay(5);
    digitalWrite(LED_PIN, LED_OFF);
    vTaskDelay(500-5);
    count++;
  }
  digitalWrite(LED_PIN, LED_ON);
  vTaskDelete(NULL);
}

void setBeacon(const char *beaconName) {
  uint16_t dynamicMajor = (uint16_t)(bootcount / 10);
  uint16_t dynamicMinor = (uint16_t)(bootcount % 10);

  BLEBeacon beacon;
  beacon.setManufacturerId(0x4c00);  // Apple iBeacon ID
  beacon.setProximityUUID(BLEUUID(BEACON_UUID));
  beacon.setMajor(dynamicMajor);
  beacon.setMinor(dynamicMinor);
  beacon.setSignalPower(BEACON_POWER);

  BLEAdvertisementData advData;
  advData.setFlags(0x06);

  // Create Scan Response Data (with device name)
  BLEAdvertisementData scanResponse;
  scanResponse.setName(beaconName);

  advData.setManufacturerData(beacon.getData());

  // Advertising rate: 160 × 0.625 ms = 100 ms
  pAdvertising-&gt;setMinInterval(160);
  pAdvertising-&gt;setMaxInterval(160);

  // Set the primary advertisement data (iBeacon)
  pAdvertising-&gt;setAdvertisementData(advData);

  // Set the scan response data (device name)
  pAdvertising-&gt;setScanResponseData(scanResponse);

  // ADV_TYPE_SCAN_IND (0x02) - Scannable undirected advertising
  // This allows scan responses while remaining non-connectable
  pAdvertising-&gt;setAdvertisementType(0x02);

  Serial.printf(&quot;Broadcasting beacon: %s (Major=%d, Minor=%d)\n&quot;,
                beaconName, dynamicMajor, dynamicMinor);
}

void setup() {
  Serial.begin(115200);
  pinMode(LED_PIN, OUTPUT);
  pinMode(BTN_PIN, INPUT_PULLUP);
  gettimeofday(&amp;now, NULL);
  xTaskCreate(LedToggleTask, &quot;LED_TOGGLE&quot;, 2048, NULL, 1, &amp;ledTaskHandle);
  Serial.println(&quot;LED Toggle Task created...&quot;);

  Serial.printf(&quot;Start ESP32 #%lu\n&quot;, bootcount);
  Serial.printf(&quot;Deep sleep (%llds since last reset, %llds since last boot)\n&quot;,
                now.tv_sec, now.tv_sec - last);
  last = now.tv_sec;

  // Select beacon name based on bootcount
  int index = bootcount % NUM_NAMES;
  const char *currentName = names[index];
  Serial.printf(&quot;Selected beacon name: %s\n&quot;, currentName);

  // Initialize BLE
  BLEDevice::init(currentName);
  BLEDevice::setPower(BEACON_POWER);
  pAdvertising = BLEDevice::getAdvertising();

  // Configure and start beacon advertising
  setBeacon(currentName);
  pAdvertising-&gt;start();

  Serial.println(&quot;Advertising started...&quot;);
  delay(2000);
  pAdvertising-&gt;stop();
  Serial.println(&quot;Advertising stopped...&quot;);

  // Stop LED task
  if (ledTaskHandle != NULL &amp;&amp; eTaskGetState(ledTaskHandle) != eDeleted) {
    vTaskDelete(ledTaskHandle);
    Serial.println(&quot;LED Toggle Task deleted&quot;);
  }
  ledTaskHandle = NULL;

  // Increment bootcount
  bootcount++;
  if (digitalRead(BTN_PIN) == HIGH) { // Button is not pressed.
    // Enter deep sleep
    Serial.println(&quot;Entering deep sleep...&quot;);
    delay(100);
    esp_deep_sleep(1000000LL * DEEP_SLEEP_DURATION_SEC);
  } else {
     Serial.println(&quot;Exit the wakeup and deep-sleep cycle...&quot;);
  }
}

void loop() {
  Serial.printf(&quot;\nCompiled on: %s at %s\n&quot;,__DATE__, __TIME__);
  Serial.printf(&quot;Chip model: %s\n&quot;, ESP.getChipModel());
  String mac = BLEDevice::getAddress().toString();
  mac.toUpperCase();
  Serial.printf(&quot;BLE MAC: %s\n&quot;, mac.c_str() );
  Serial.printf(&quot;TX power: %s\n&quot;, powerLevelToString(BEACON_POWER) );
  for (int i=0; i &lt; NUM_NAMES; i++) {
    Serial.printf( &quot;%d) Beacon name: '%s'\n&quot;, i+1, names[i]);
  }
  delay(5000);
}
</code></pre>
<p>&nbsp;</p>
<p>The following figures show screenshots from the <strong>nRF Connect app</strong> on an Android smartphone, used to scan BLE beacons with name filtering. 
The screenshots display nearby BLE beacons, where the RSSI values in dBm indicate the approximate distance between the smartphone and each BLE box.
As the smartphone moves closer to a BLE box, the RSSI value increases.</p>
<p><img alt="" src="nrf_connect-1.jpg" /></p>
<p><strong>Figure:</strong> Using nRF Connect App to scan BLE beacons</p>
<p>&nbsp;</p>
<p>The following <strong>Python code</strong> can be used to scan BLE beacons.
It utilizes the <strong>Bleak</strong> library (<strong>version 0.22.2</strong>) for this purpose.</p>
<pre><code class="language-Python">import asyncio
from bleak import BleakScanner
from datetime import datetime
import importlib.metadata

version = importlib.metadata.version(&quot;bleak&quot;)
print(&quot;\n\n\n\nBleak version:&quot;, version)

SCAN_INTERVAL_SEC = 5

# Dictionary to store detected devices:
# { (MAC, Name): {&quot;rssi&quot;: int, &quot;last_seen&quot;: str} }
detected_devices = {}

def detection_callback(device, advertisement_data):
    name = device.name
    if name is None or not name.startswith(&quot;ECE&quot;):
        return

    mac = device.address
    rssi = advertisement_data.rssi  # Use RSSI from AdvertisementData
    now = datetime.now().strftime(&quot;%H:%M:%S&quot;)

    key = (mac, name)
    detected_devices[key] = {
        &quot;rssi&quot;: rssi,
        &quot;last_seen&quot;: now
    }

async def main():
    scanner = BleakScanner(detection_callback)
    print(&quot;Scanning for BLE devices (Press Ctrl+C to stop)...\n&quot;)
    await scanner.start()
    try:
        while True:
            await asyncio.sleep( SCAN_INTERVAL_SEC )
            print(f&quot;{'MAC Address':&lt;25} {'Name':&lt;30} {'RSSI':&lt;8} {'Last Seen'}&quot;)
            print(&quot;-&quot; * 80)
            for (mac, name), info in sorted(detected_devices.items()):
                rssi_str = f&quot;{info['rssi']} dBm&quot; if info['rssi'] is not None else &quot;N/A&quot;
                print(f&quot;{mac:&lt;25} {name:&lt;30} {rssi_str:&lt;8} {info['last_seen']}&quot;)
            print(&quot;\n&quot;)
    except KeyboardInterrupt:
        await scanner.stop()
        print(&quot;\nScan stopped by user.&quot;)

if __name__ == &quot;__main__&quot;:
    asyncio.run(main())
</code></pre>
<p><img alt="" src="python_qrcode_scan.jpg" /></p>
<p><strong>Figure:</strong> Running the Python script to scan and filter BLE beacons.</p>
<p>&nbsp;</p>
<hr />
<h2 id="conclusion">&#9655; <strong>Conclusion</strong><a class="headerlink" href="#conclusion" title="Permanent link">#</a></h2>
<p>This project provides a fun, hands-on way to learn about Bluetooth Low Energy and QR code technologies using affordable hardware like the ESP32. Through interactive exploration, students gain practical experience with BLE advertising, signal strength analysis, and QR code applications, making it an effective and engaging educational tool for introducing IoT concepts.</p>
<p>&nbsp;</p>
<hr />
<p><em>This work is licensed under a</em> <strong><em>Creative Commons Attribution-ShareAlike 4.0 International License</em></strong>.</p>
<p>Created: 2025-10-26 | Last Updated: 2025-10-29</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2021-2025 IoT Engineering Education, Bangkok/Thailand</a></p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
