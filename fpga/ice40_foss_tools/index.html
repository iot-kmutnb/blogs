<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="RSP">
        <link rel="canonical" href="https://iot-kmutnb.github.io/blogs/fpga/ice40_foss_tools/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>การใช้งานซอฟต์แวร์ Open Source FPGA Design Tools สำหรับบอร์ด Lattice iCE40 FPGA - IoT Engineering Education</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../css/extra.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/c.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/cpp.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/arduino.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/typescript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/vhdl.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/verilog.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/text.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/plaintext.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/matlab.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/julia.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/go.min.js"></script>
        <script>hljs.highlightAll();</script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-966FQ6RN6W"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', "G-966FQ6RN6W");
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">IoT Engineering Education</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#open-source-fpga-design-tools-lattice-ice40-fpga" class="nav-link">การใช้งานซอฟต์แวร์ Open Source FPGA Design Tools สำหรับบอร์ด Lattice iCE40 FPGA</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#fpga-lattice-semiconductor" class="nav-link">&#9655; ชิป FPGA ของบริษัท Lattice Semiconductor</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#ice40-fpga" class="nav-link">&#9655; ตัวอย่างบอร์ด iCE40 FPGA</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#lattice-ice40up5k-fpga" class="nav-link">&#9655; Lattice iCE40UP5K FPGA</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#foss-fpga-tool-ubuntu" class="nav-link">&#9655; การติดตั้งซอฟต์แวร์ FOSS FPGA Tool สำหรับ Ubuntu</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#ice-sugar" class="nav-link">&#9655; วงจรสาธิตการใช้งานสำหรับบอร์ด iCE-Sugar</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#hard-ip-ice40-ultraplus" class="nav-link">&#9655; การสาธิตการใช้วงจร Hard IP ภายในชิป iCE40 UltraPlus</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_1" class="nav-link">&#9655; แหล่งข้อมูลศึกษาเพิ่มเติม</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_2" class="nav-link">&#9655; กล่าวสรุป</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="open-source-fpga-design-tools-lattice-ice40-fpga">การใช้งานซอฟต์แวร์ Open Source FPGA Design Tools สำหรับบอร์ด Lattice iCE40 FPGA<a class="headerlink" href="#open-source-fpga-design-tools-lattice-ice40-fpga" title="Permanent link">#</a></h1>
<p><strong>Keywords</strong>: <em>Lattice iCE40 FPGA</em>, <em>Open Source Hardware</em>, 
<em>OSHW FPGA Boards</em>, <em>FOSS FPGA Design Tools</em></p>
<hr />
<h2 id="fpga-lattice-semiconductor">&#9655; <strong>ชิป FPGA ของบริษัท Lattice Semiconductor</strong><a class="headerlink" href="#fpga-lattice-semiconductor" title="Permanent link">#</a></h2>
<p><a href="https://www.latticesemi.com/"><strong>Lattice Semiconductor</strong></a>
เป็นอีกหนึ่งบริษัทที่เป็นผู้ผลิตชิป <strong>FPGA</strong> ซึ่งมีอยู่หลายตระกูล (<strong>FPGA Families</strong>)
แบ่งออกเป็นกลุ่มตามลักษณะการใช้งาน และความสามารถของชิป เช่น การใช้งานชิป <strong>FPGA</strong>
สำหรับการประมวลผลข้อมูลภาพและวิดีโอ อาจจำเป็นต้องเชื่อมต่อกับโมดูลกล้องด้วย <strong>LVDS / MIPI CSI Interface</strong>
และต้องสามารถเขียนอ่านข้อมูลลงในหน่วยความจำภายในขนาดใหญ่ (<strong>Embedded Large Memory</strong>)
และหน่วยความจำภายนอกได้ เช่น <strong>DDR3/DDR4 Memory</strong> เป็นต้น</p>
<ul>
<li><strong>General-Purpose FPGAs</strong><ul>
<li><strong>Lattice Avant FPGA Architecture</strong> (16nm FinFET)<ul>
<li><strong>Avant-E</strong> (LUT4: 196K - 477K )</li>
</ul>
</li>
<li><strong>Lattice Nexus FPGA Platform</strong> (28nm FD-SOI: <em>"fully depleted silicon-on-insulator"</em>)<ul>
<li><strong>Certus-NX</strong> (LUT4: 17K - 39K)</li>
<li><strong>CertusPro-NX</strong> (LUT4: 52K - 96K)</li>
</ul>
</li>
<li><strong>ECP5/ECP5-5G</strong> (40nm process, LUT4: 12K - 84K)</li>
<li><strong>LatticeECP3</strong> (65nm process, LUT4: 17K - 149K)</li>
<li><strong>LatticeECP2/M</strong> (LUT4: 6K - 68K)</li>
<li><strong>LatticeXP2</strong> (LUT4: 5K - 40K)</li>
</ul>
</li>
<li><strong>Video Bridging &amp; Processing FPGAs</strong><ul>
<li><strong>CrossLink-NX</strong>, <strong>CrossLinkPlus</strong>, <strong>CrossLink</strong> </li>
</ul>
</li>
<li><strong>Security FPGAs (with Crypto Hard IP Cores)</strong><ul>
<li><strong>MachXO5-NX</strong></li>
<li><strong>MachXO3</strong>, <strong>MachXO3D</strong></li>
<li><strong>MachXO2</strong></li>
<li><strong>MachXO</strong></li>
</ul>
</li>
<li><strong>Ultra-Low Power &amp; Form Factor FPGAs</strong> (40nm process)<ul>
<li><strong>iCE40 UltraPlus</strong> </li>
<li><strong>iCE40 Ultra</strong></li>
<li><strong>iCE40 LP/HX</strong></li>
</ul>
</li>
</ul>
<p>ซอฟต์แวร์ในการออกแบบวงจรสำหรับชิป <strong>Lattice FPGA</strong>
(มีเวอร์ชันสำหรับ <strong>Windows</strong> และ <strong>Linux</strong>) ได้แก่</p>
<ul>
<li><a href="https://www.latticesemi.com/Products/DesignSoftwareAndIP/FPGAandLDS/Radiant"><strong>Lattice Radiant Software</strong></a></li>
<li><a href="https://www.latticesemi.com/Products/DesignSoftwareAndIP/FPGAandLDS/LatticePropel"><strong>Lattice Propel Design Environment</strong></a></li>
<li><a href="https://www.latticesemi.com/Products/DesignSoftwareAndIP/FPGAandLDS/LatticeDiamond"><strong>Lattice Diamond Software</strong></a> </li>
<li><a href="https://www.latticesemi.com/Products/DesignSoftwareAndIP/FPGAandLDS/iCEcube2"><strong>iCEcube2 Design Software</strong></a></li>
</ul>
<p>ซอฟต์แวร์ <strong>Lattice Radiant</strong> จะใช้กับชิป <strong>Lattice FPGA</strong> หลายรุ่นที่ออกมาใหม่
เช่น <strong>Avant-E</strong>, <strong>Certus-NX / CertusPro-NX</strong>
แต่ถ้าชิปเป็นรุ่นอื่น ๆ โดยปรกติ ก็จะใช้ซอฟต์แวร์ <strong>Lattice Diamond</strong></p>
<p>ในกรณีที่มีการพัฒนาซอฟต์แวร์และการออกแบบวงจรที่มีซีพียูอยู่ภายในชิป <strong>FPGA</strong> 
(<strong>Lattice FPGA-based Processor System Design</strong>)
ก็จะต้องใช้ซอฟต์แวร์ <strong>Lattice Propel</strong> ร่วมด้วย</p>
<p>ข้อสังเกต: ซอฟต์แวร์ <strong>iCEcube2</strong> มีการใช้งานมาตั้งแต่ประมาณปีค.ศ. 2012
จะใช้ได้กับชิป <strong>FPGA</strong> รุ่นเก่า เช่น <strong>iCE40 LP/HX</strong> และ <strong>iCE40UP5K</strong> 
และอาจไม่มีการอัปเดทอีกต่อไป </p>
<p>ชิปในตระกูล <strong>iCE40</strong> แม้ว่าจะเป็นชิปรุ่นเก่าและมีความจุลอจิกไม่มากนัก 
แต่ก็สามารถนำไปใช้งานได้กับซอฟต์แวร์ <strong>FPGA Toolchain</strong>
ประเภท <strong>FOSS (Free &amp; Open Source Software)</strong> เช่น
<a href="https://clifford.at/icestorm"><strong>Project IceStorm</strong></a> โดย ** Clifford Wolf<strong>
โดยไม่จำเป็นต้องใช้ซอฟต์แวร์ของบริษัท </strong>Lattice Semiconductor**</p>
<p><img alt="" src="radiant_ice40up5k.png" /></p>
<p>รูป: ตัวอย่างการใช้งานซอฟต์แวร์ <strong>Lattice Radiant v2023.1</strong> สำหรับชิป <strong>iCE40 UltraPlus</strong></p>
<p><img alt="" src="radiant_rtl_viewer.png" /></p>
<p>รูป: การแสดงผังวงจรที่ได้จากการสังเคราะห์วงจร โดยใช้เครื่องมือที่มีชื่อว่า <strong>Lattice Radiant - Netlist Analyzer</strong></p>
<p>&nbsp;</p>
<hr />
<h2 id="ice40-fpga">&#9655; <strong>ตัวอย่างบอร์ด iCE40 FPGA</strong><a class="headerlink" href="#ice40-fpga" title="Permanent link">#</a></h2>
<p>ตัวอย่างบอร์ด <strong>FPGA</strong> ที่มีชิป <strong>iCE40HX-1K</strong> หรือ <strong>iCE40LP/HX-8K</strong> ได้แก่</p>
<ul>
<li><a href="https://www.latticesemi.com/icestick"><strong>iCEstick Evaluation Kit</strong></a><ul>
<li><strong>FPGA</strong>: iCE40HX-1K</li>
<li><strong>Bitstream Storage</strong>: Micron 32Mbits N25Q32 SPI Flash</li>
<li><strong>USB-SPI &amp; USB-Serial Bridge</strong>: FTDI FT2232H</li>
<li><strong>USB Type-A Connector</strong></li>
<li><strong>Onboard MEMS Oscillator</strong>: 12MHz</li>
<li><strong>1x 2x6-pin Digilent Pmod Connector</strong></li>
<li><strong>1x IrDA Transceiver</strong></li>
<li><strong>Release Date</strong>: August 2013</li>
</ul>
</li>
<li><a href="https://www.latticesemi.com/Products/DevelopmentBoardsAndKits/iCE40HX8KBreakoutBoard.aspx"><strong>Lattice iCE40HX-8K Breakout Board</strong></a><ul>
<li><strong>FPGA</strong>: iCE40HX-8K-CT256 (7,680 LUT4)<ul>
<li><strong>Core Voltage</strong>: 1.2V</li>
<li><strong>I/O Banks &amp; Voltage</strong>:  4x I/O Banks (3.3V)</li>
</ul>
</li>
<li><strong>Bitstream Storage</strong>: 16MBits SPI Flash</li>
<li><strong>USB-SPI &amp; USB-Serial Bridge</strong>: FTDI FT2232H</li>
<li><strong>Mini-USB Connector</strong></li>
<li><strong>Onboard MEMS Oscillator</strong>: 12MHz</li>
<li><strong>8x User LEDs</strong></li>
<li><strong>2x20 Pin Headers</strong></li>
<li><strong>Release Date</strong>: November 2013</li>
</ul>
</li>
<li><a href="https://www.olimex.com/wiki/ICE40HX1K-EVB"><strong>Olimex iCE40HX8K-EVB</strong></a><ul>
<li><strong>FPGA</strong>: iCE40HX-8K-CT256 (7,680 LUT4)</li>
<li><strong>Bitstream Storage</strong>: 16MBits SPI Flash</li>
<li><strong>Async. SRAM</strong>: Samsung 512KB K6R4016V1D (3.3V, 16-bit Data Bus)</li>
<li><strong>2x User Status LEDs</strong></li>
<li><strong>2x User Buttons + 1x Reset Button</strong></li>
<li><strong>Onboard Oscillator</strong>: 100 MHz</li>
<li><strong>Onboard FPGA Programmer</strong>: None<ul>
<li><strong>External iCE40 programmer</strong>: <a href="https://github.com/OLIMEX/iCE40HX1K-EVB/tree/master/programmer/olimexino-32u4%20firmware">Arduino ATmega32U4 as SPI Programmer</a></li>
</ul>
</li>
<li><strong>Programming Connector (SPI Mode)</strong>: 2x5 Pins</li>
<li><strong>Open-Source-Hardware (OSHW)</strong>: Apache-2.0-License</li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/OLIMEX/iCE40HX8K-EVB">https://github.com/OLIMEX/iCE40HX8K-EVB</a></li>
<li><strong>Release Date</strong>: August 2016</li>
</ul>
</li>
<li><a href="https://www.crowdsupply.com/tinyfpga/tinyfpga-bx"><strong>TinyFPGA-BX by TinyFPGA.com (USA)</strong></a><ul>
<li><strong>FPGA</strong>: iCE40LP-8K (7,680 LUT4)</li>
<li><strong>Bitstream Storage</strong>: 8MBits SPI Flash </li>
<li><strong>Onboard Oscillator</strong>: 16MHz</li>
<li><strong>Open-Source TinyFPGA-USB bootloader</strong>: <a href="https://github.com/tinyfpga/TinyFPGA-Bootloader">https://github.com/tinyfpga/TinyFPGA-Bootloader</a></li>
<li><strong>Open Source Hardware (OSHW) / CrowdSupply Project</strong></li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/tinyfpga">https://github.com/tinyfpga</a></li>
<li><strong>Price</strong>: $38.00 USD</li>
<li><strong>Release Date</strong>: March 2018</li>
</ul>
</li>
<li><a href="https://alchitry.com/boards/cu"><strong>Alchitry Cu FPGA Development Board from SparkFun / Alchitry Labs (USA)</strong></a><ul>
<li><strong>FPGA</strong>: iCE40HX-8K-CB132 (7,680 LUT4)</li>
<li><strong>USB Interface</strong>: FTDI FT2232HQ</li>
<li><strong>Bitstream Storage</strong>: SPI Flash</li>
<li><strong>Onboard Oscillator</strong>: 100MHz</li>
<li><strong>USB-C Connector</strong></li>
<li><strong>8x User LEDs</strong></li>
<li><strong>1x User Button</strong></li>
<li><strong>Release Date</strong>: July 2018</li>
<li><strong>Price</strong>: $53.50 USD
-<a href="https://github.com/wuxx/icesugar-nano"><strong>iCESugar-Nano from Muse Lab (China)</strong></a></li>
<li><strong>FPGA</strong>: Lattice iCE40LP1K-CM36 (1,280 LUT4)</li>
<li><strong>Bitstream Storage</strong>: SPI Flash W25Q16 (2MB)</li>
<li><strong>Onboard FPGA Programmer / Debugger</strong>: iCELink (APM32F1-based)<ul>
<li><strong>Drap &amp; Drop Programming</strong> (based on ARM Mbed DAPLink)</li>
<li><strong>MCO Clock Sources for FPGA</strong>: 8 / 12 /36 / 72 MHz</li>
</ul>
</li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/wuxx/icesugar-nano">https://github.com/wuxx/icesugar-nano</a></li>
<li><strong>Release Date</strong>: May 2022</li>
</ul>
</li>
<li><a href="http://icoboard.org/about-icoboard.html"><strong>icoBOARD Gamma FPGA v1.1 Shield for RPi</strong></a><ul>
<li><strong>FPGA</strong>: Lattce iCE40HX-8K</li>
<li><strong>Serial-to-SPI Interface</strong>: Lattice MachXO2</li>
<li><strong>Storage</strong><ul>
<li><strong>16MB SPI Flash</strong> (for Configuration Bitstream</li>
<li><strong>64Mbits HyperRAM</strong> (8-bit data wide)</li>
<li><strong>8MBits SRAM</strong> (16-bit data wide)</li>
</ul>
</li>
<li><strong>3x User LEDs</strong></li>
<li><strong>2x User Buttons</strong></li>
<li><strong>4x 16-pin 100mil I/O Connectors</strong></li>
<li><strong>Release Date</strong>: January 2016</li>
</ul>
</li>
</ul>
<p><img alt="" src="ice40hx_icestick_board.png" /></p>
<p>รูป: <strong>Lattice iCEstick Evaluation Kit (iCE40HX-1K)</strong></p>
<p><img alt="" src="lattice_ice40_hx8k_breakout_board.jpg" /></p>
<p>รูป: <strong>Lattice iCE40HX-8K Breakout Board</strong></p>
<p><img alt="" src="ice40hx8k_evb.png" /></p>
<p>รูป: <strong>Olimex iCE40HX-8K-EVB (iCE40HX-8K)</strong></p>
<p><img alt="" src="tiny_bx_board.png" /></p>
<p>รูป: <strong>TinyFPGA BX (iCE40LP-8K)</strong></p>
<p>&nbsp;</p>
<p>ในบทความนี้ได้เลือกใช้ชิป <strong>Lattice FPGA</strong> รุ่น <strong>iCE40UP5K</strong>
ในตระกูล <a href="https://www.latticesemi.com/en/Products/FPGAandCPLD/iCE40UltraPlus"><strong>iCE40 UltraPlus Low-Power FPGA</strong></a> (<a href="https://www.latticesemi.com/-/media/LatticeSemi/Documents/DataSheets/iCE/iCE40-UltraPlus-Family-Data-Sheet.ashx"><strong>Datasheet</strong></a>)
เพื่อนำมาทดลองใช้งานกับซอฟต์แวร์ประเภท <strong>Open Source</strong> ของโปรเจกต์ที่มีชื่อว่า
<a href="https://clifford.at/icestorm"><strong>iCEStorm</strong></a></p>
<p>ตัวอย่างบอร์ด <strong>FPGA</strong> ที่มีชิป <strong>iCE40UP5K</strong> ได้แก่</p>
<ul>
<li><a href="https://1bitsquared.com/products/icebreaker"><strong>iCEBreaker FPGA Board from BitSquared (Oregon, USA)</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K-SG48 (5,280 LUT4)</li>
<li><strong>USB Interface</strong>: FTDI FT2232H</li>
<li><strong>Bitstream Storage</strong>: 128MBits QSPI Flash (Winbond W25Q128JVSIM)</li>
<li><strong>Onboard Oscillator</strong>: 12MHz </li>
<li><strong>Micro-USB Connector</strong></li>
<li><strong>1x RGB LED</strong></li>
<li><strong>1x Push Button</strong></li>
<li><strong>Open Source Hardware (OSHW) / CrowdSupply Project</strong></li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/icebreaker-fpga/icebreaker">https://github.com/icebreaker-fpga/icebreaker</a></li>
<li><strong>Price</strong>: $79.95 USD</li>
<li><strong>Release Date</strong>: December 2018</li>
<li><a href="icebreaker_1.0e_schematic.pdf"><strong>Schematic (.pdf)</strong></a></li>
</ul>
</li>
<li><a href="https://www.crowdsupply.com/1bitsquared/icebreaker-bitsy-fpga"><strong>iCEBreaker-Bitsy FPGA Board from BitSquared (Oregon, USA)</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K-SG48 (5,280 LUT4)</li>
<li><strong>Onboard Oscillator</strong>: 12MHz</li>
<li><strong>Storage</strong>:<ul>
<li>128MBits QSPI Flash</li>
<li>64MBits QPI Pseudo-SRAM</li>
</ul>
</li>
<li><strong>USB-C Connector</strong></li>
<li><strong>Built-in DFU Bootloader</strong></li>
<li><strong>2x LEDs</strong></li>
<li><strong>1x Push Button</strong></li>
<li><strong>1x RGB LED</strong></li>
<li><strong>Open Source Hardware (OSHW) / CrowdSupply Project</strong></li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/icebreaker-fpga/icebreaker">https://github.com/icebreaker-fpga/icebreaker</a></li>
<li><strong>Release Date</strong>: June 2020</li>
</ul>
</li>
<li><a href="https://www.crowdsupply.com/sutajio-kosagi/fomu"><strong>Tomu FPGA (Fomu) Board</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K-SG48 (5,280 LUT4) </li>
<li><strong>Storage</strong>: 1MB SPI Flash</li>
<li><strong>Onboard Oscillator</strong>: 48MHz</li>
<li><strong>Connectivity</strong>: USB 2.0 FS (12 Mbps) </li>
<li><strong>4x Push Buttons</strong></li>
<li><strong>1x RGB LED</strong></li>
<li><strong>Open Source Hardware (OSHW) / CrowdSupply Project</strong></li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/im-tomu">https://github.com/im-tomu</a></li>
<li><strong>Release Date</strong>: Feb 2019</li>
</ul>
</li>
<li><a href="https://tinyvision.ai/pages/pico-ice"><strong>Pico Ice from TinyVision.ai</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K (5,280 LUT4) </li>
<li><strong>MCU</strong>: RP2040 with 4MB SPI Flash (used for FPGA Programmer)</li>
<li><strong>Storage</strong>:<ul>
<li>4MB SPI Flash (for Bitstream Storage)</li>
<li>8MB QSPI Pseudo-SRAM</li>
</ul>
</li>
<li><strong>1x RGB LED</strong></li>
<li><strong>Open Source Hardware (OSHW)</strong></li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/tinyvision-ai-inc/pico-ice">https://github.com/tinyvision-ai-inc/pico-ice</a></li>
<li><strong>Documentation</strong>: <a href="https://pico-ice.tinyvision.ai/">https://pico-ice.tinyvision.ai/</a></li>
<li><strong>Price</strong>: $35.00 USD</li>
<li><a href="pico-ice_rev-c_schematic.pdf"><strong>Schematic (.pdf)</strong></a></li>
</ul>
</li>
<li><a href="https://github.com/wuxx/icesugar"><strong>iCESugar FPGA Board (v1.5) from Muse Lab (China)</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K (5,280 LUT4) </li>
<li><strong>Bitstream Storage</strong>: 8MB SPI Flash W25Q64FV, programmable by iCELink</li>
<li><strong>Onboard FPGA Programmer</strong>: iCELink (STM32F103C8T6-based)<ul>
<li><strong>Drag &amp; Drop Programming</strong> (based on ARM Mbed DAPLink Firmware)</li>
</ul>
</li>
<li><strong>USB Type-C Connector</strong></li>
<li><strong>Clock Source for FPGA</strong>: 12MHz (from iCELink via a jumper)</li>
<li><strong>Open Source Hardware (OSHW)</strong></li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/wuxx/icesugar/blob/master/README_en.md">https://github.com/wuxx/icesugar/</a></li>
<li><strong>Price</strong>: ‎$32.00 USD</li>
<li><a href="icesugar-v1.5_schematic.pdf"><strong>Schematic (.pdf)</strong></a></li>
</ul>
</li>
<li><a href="https://groupgets.com/campaigns/1036-ice-v-wireless"><strong>iCE-V Wireless FPGA Board from QWERTY Embedded Design, LLC (USA)</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K-SG48 (5,280 LUT4)</li>
<li><strong>MCU</strong>: ESpressif ESP32-C3-MINI-1 module (ESP32C3HN4 SoC, 4MB Flash) </li>
<li><strong>Storage</strong>:<ul>
<li>QSPI Pseudo-SRAM (PSRAM): 8Mbits</li>
</ul>
</li>
<li><strong>USB-C Connector</strong></li>
<li><strong>Onboard Oscillator</strong>: 12MHz</li>
<li><strong>1x RGB LED</strong></li>
<li><strong>Open Source Hardware (OSHW) / CrowdSupply Project</strong></li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/ICE-V-Wireless/ICE-V-Wireless">https://github.com/ICE-V-Wireless/ICE-V-Wireless</a></li>
<li><strong>Price</strong>: $75.00 USD</li>
<li><a href="ice-v_wireless_board_schematic.pdf"><strong>Schematic (.pdf)</strong></a></li>
</ul>
</li>
<li><a href="https://www.crowdsupply.com/hurley-research/nrfice"><strong>NRFICE Board from Hurley Research (USA)</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K-SG48 (5,280 LUT4)</li>
<li><strong>MCU</strong>: Nordic Semiconductor nRF5340 SoC (Arm Cortex-M33)</li>
<li><strong>Storage</strong>: 128MBits Flash</li>
<li><strong>USB Interface</strong>: Built-in SEGGER JLink-OB Programmer/Debugger</li>
<li><strong>2x USB-C Connector</strong><ul>
<li>USB-C for nRF5340</li>
<li>USB-C for SEGGER JLink-OB</li>
</ul>
</li>
<li><strong>Arduino form-factor</strong></li>
<li><strong>2x RGB LEDs</strong></li>
<li><strong>Open Source Hardware (OSHW) / CrowdSupply Project</strong></li>
<li><strong>Release Date</strong>: May 2023</li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/HurleyResearch/nRFICE">https://github.com/HurleyResearch/nRFICE</a></li>
<li><a href="nrfice_schematic.pdf"><strong>Schematic (.pdf)</strong></a></li>
</ul>
</li>
<li><a href="https://github.com/WiFiBoy/OK-iCE40Pro"><strong>OK:iCE40Pro from WiFiBoy Computing Lab (Taiwan)</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K-SG48 (5,280 LUT4)</li>
<li><strong>Bitstream Storage</strong>: 128Mbits Winbond W25Q128JV</li>
<li><strong>USB Interface</strong>: FTDI FT2232H</li>
<li><strong>LCD Display</strong>: SPI LCD 160x128 pixels + ST7735S Driver</li>
<li><strong>Sensor</strong>: 3-axis I2C Accelerometer LIS3DH</li>
<li><strong>Audio</strong>: 8-Ohm Speaker &amp; 2W Amplifier IC</li>
<li><strong>7x Push Buttons</strong></li>
<li><strong>2x User LEDs</strong></li>
<li><strong>RISC-V based Educational FPGA GamePad Console</strong></li>
<li><strong>Open Source Hardware (OSHW)</strong></li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/WiFiBoy/OK-iCE40Pro">https://github.com/WiFiBoy/OK-iCE40Pro</a></li>
<li><a href="okice40-pro-v1.3_schematic.pdf"><strong>Schematic (.pdf)</strong></a></li>
</ul>
</li>
<li><a href="https://dadamachines.com/products/doppler/"><strong>Doppler from dadamachines (Germany)</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K-SG48 (5,280 LUT4)</li>
<li><strong>MCU</strong>: Atmel ATSAMD51G19A (Arm Cortex-M0) + UF2 Bootloader </li>
<li><strong>Breadboard friendly (DIL-48)</strong></li>
<li><strong>Micro-USB Connector</strong></li>
<li><strong>1x LED</strong> (connected to SAMD51)</li>
<li><strong>4x4 LED Matrix</strong> (connected to FPGA)</li>
<li><strong>2x User Buttons</strong> (connected to FPGA)</li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/dadamachines/doppler/">https://github.com/dadamachines/doppler/</a></li>
</ul>
</li>
<li><a href="https://tinyvision.ai/products/upduino-v3-1"><strong>UPduino v3.0 / v3.1 from tinyVision.ai</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K (5,280 LUT4)</li>
<li><strong>Onboard Oscillator</strong>: 12MHz</li>
<li><strong>Onboard Programmer</strong>: FTDI FT2232H USB programmer</li>
<li><strong>Storage</strong>: 4MB QSPI Flash</li>
<li><strong>1x RGB LED</strong></li>
<li><strong>Open Source Hardware (OSHW)</strong></li>
<li><strong>GitHub Repo</strong>: <a href="https://github.com/tinyvision-ai-inc/UPduino-v3.0">https://github.com/tinyvision-ai-inc/UPduino-v3.0</a></li>
<li><strong>Price</strong>: $30.00 USD</li>
<li><a href="upduino_v3.0_schematic.pdf"><strong>Schematic (.pdf)</strong></a></li>
</ul>
</li>
<li><a href="https://www.eetree.cn/project/detail/131"><strong>iCE40UP5K FPGA Board from eetree.cn</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K-SG48 (5,280 LUT4)</li>
<li><strong>USB Interface / FPGA Programmer</strong>: NXP LPC11U35 MCU</li>
</ul>
</li>
<li><a href="https://www.eetree.cn/project/detail/7"><strong>iCE40UP5K FPGA + STM32G031 MCU Board from eetree.cn</strong></a><ul>
<li><strong>FPGA</strong>: Lattice iCE40UP5K-SG48 (5,280 LUT4)</li>
<li><strong>MCU</strong>: STM32G031G (Arm Cortex-M0+ @64MHz, 64KB Flash, 8KB SRAM)</li>
<li><strong>USB Interface / FPGA Programmer</strong>: NXP LPC11U35 MCU</li>
<li><strong>Bitstream Storage</strong>: 8Mbits AT25SF081</li>
<li><strong>1x RGB LED</strong></li>
<li><strong>Onboard Oscillator for FPGA</strong>: 12MHz</li>
<li><strong>Release Date</strong>: November 2020</li>
<li><a href="eetree_up5k_muc_v2_schematic.pdf"><strong>Schematic (.pdf)</strong></a></li>
</ul>
</li>
</ul>
<p>&nbsp;</p>
<p><img alt="" src="icebreaker_board.png" /></p>
<p>รูป: บอร์ด <strong>iCEBreaker</strong></p>
<p><img alt="" src="icebreaker-bitsy_pinout.png" /></p>
<p>รูป: บอร์ด <strong>iCEBreaker-Bitsy</strong></p>
<p><img alt="" src="pico_ice_board.png" /></p>
<p>รูป: บอร์ด <strong>Pico Ice (TinyVision.ai)</strong></p>
<p><img alt="" src="ice-v_wireless_board.png" /></p>
<p>รูป: บอร์ด <strong>iCE-V Wireless FPGA Board</strong></p>
<p><img alt="" src="upduino_v3.0_board.png" /></p>
<p>รูป: บอร์ด <strong>UPduino v3.0 (TinyVision.ai)</strong></p>
<p><img alt="" src="eetree_ice40up5k_stm32g031.png" /></p>
<p>รูป: บอร์ด <strong>iCE40UP5K FPGA + STM32G031</strong></p>
<p><img alt="" src="nrfice_board.png" /></p>
<p>รูป: บอร์ด <strong>NRFICE Board (Hurley Research)</strong></p>
<p><img alt="" src="ice_sugar_board.png" /></p>
<p>รูป: บอร์ด <strong>iCESugar FPGA Board (v1.5)</strong></p>
<p><img alt="" src="doppler_fpga.png" /></p>
<p>รูป: บอร์ด <strong>Doppler Board</strong></p>
<p><img alt="" src="icesugar_illustrated.png" /></p>
<p>รูป: การระบุองค์ประกอบบนบอร์ด <strong>iCESugar FPGA Board (v1.5)</strong></p>
<p><img alt="" src="icesugar_schematic.png" /></p>
<p>รูป: ผังวงจร <strong>Schematic</strong> ของบอร์ด <strong>iCESugar FPGA Board (v1.5)</strong></p>
<p>&nbsp;</p>
<hr />
<h2 id="lattice-ice40up5k-fpga">&#9655; <strong>Lattice iCE40UP5K FPGA</strong><a class="headerlink" href="#lattice-ice40up5k-fpga" title="Permanent link">#</a></h2>
<p><strong>ข้อมูลเชิงเทคนิคเกี่ยวกับชิป  iCE40UP5K</strong>
(<a href="ice40_ultraplus_family_datasheet_2017.pdf"><strong>Datasheet</strong></a>)</p>
<ul>
<li><strong>iCE40 UltraPlus Family</strong></li>
<li><strong>40nm Low-Power CMOS Process</strong></li>
<li><strong>Core Voltge</strong>: 1.2V</li>
<li><strong>Chip Package</strong>: QFN-48</li>
<li><strong>Logic Cells (LUT4 + Flip-Flop)</strong>: 5,280</li>
<li><strong>sysMEM Embedded Block RAM (EBR) Memory</strong>: 30 Blocks, 4Kbits per Block</li>
<li><strong>Single-Port RAM (SPRAM) Memory</strong>: 4 Blocks, 256 KBits per Block</li>
<li><strong>sysDSP DSP Blocks (16x16-bit Multiplier, 32-bit Accumulator)</strong>: 8 Blocks</li>
<li><strong>sysCLOCK PLL</strong>: 1</li>
<li><strong>I2C Controller (Hard IP)</strong>: 2</li>
<li><strong>SPI Controller (Hard IP)</strong>: 2</li>
<li><strong>On-board Oscillator</strong>: 48MHz (HF) &amp; 10kHz (LF)</li>
<li><strong>24mA PWM-based LED Driver (Current Sink)</strong>: 3</li>
<li><strong>Global Clock Input Pins</strong>: 6</li>
<li><strong>On-chip Configuration Data Storage</strong>:<ul>
<li><strong>Volatile Configuration RAM (CRAM)</strong></li>
<li><strong>Non-volatile "One-Time-Programmable" Configuration Memory (NVCM)</strong></li>
</ul>
</li>
<li><strong>SPI-based Device Programming</strong> (Configuring On-chip CRAM)<ul>
<li><strong>SPI Peripheral Mode</strong>: MCU as SPI Master, FPGA as SPI Slave</li>
<li><strong>SPI Flash Mode</strong>: FPGA as SPI Master, External Serial Flash as SPI Slave</li>
<li><strong>Technical Note</strong>: <a href="iCE40_Programming_Configuration_2022.pdf">"<strong>iCE40 Programming and Configuration</strong>"</a></li>
</ul>
</li>
<li><strong>IC Package</strong>: 48-pin QFN (39 I/Os max.)</li>
<li><strong>Software Support</strong>:<ul>
<li><strong>Lattice Diamond</strong></li>
<li><strong>iCEcube2</strong></li>
</ul>
</li>
</ul>
<p><img alt="" src="ice40up5k-1.png" /></p>
<p>รูป: แผนผังแสดงองค์ประกอบเชิงสถาปัตยกรรมภายในชิป <strong>iCE40UP5K</strong></p>
<p><img alt="" src="ice40up5k-2.png" /></p>
<p>รูป: โครงสร้างภายในของ <strong>4-Input LUT + Flip-Flop</strong> และ <strong>Logic Cells</strong></p>
<p><img alt="" src="ice40up5k-3.png" /></p>
<p>รูป: องค์ประกอบภายใน <strong>I/O Block</strong></p>
<p><img alt="" src="ice40up5k-4.png" /></p>
<p>รูป: องค์ประกอบภายในของ <strong>sysDSP DSP Block</strong></p>
<p>&nbsp;</p>
<hr />
<h2 id="foss-fpga-tool-ubuntu">&#9655; <strong>การติดตั้งซอฟต์แวร์  FOSS FPGA Tool สำหรับ Ubuntu</strong><a class="headerlink" href="#foss-fpga-tool-ubuntu" title="Permanent link">#</a></h2>
<p>การทำคำสั่งเพื่อทำขั้นตอนการติดตั้งโปรแกรมต่าง ๆ ที่เกี่ยวข้อง มีดังนี้</p>
<pre><code class="language-text">$ sudo apt install \
  build-essential git mercurial cmake clang pkg-config \
  bison flex gawk tcl-dev xdot graphviz \
  libffi-dev libreadline-dev \
  python3 python3-dev libftdi-dev \
  libboost-dev libboost-filesystem-dev \
  libboost-thread-dev libboost-program-options-dev \
  libboost-iostreams-dev libeigen3-dev
</code></pre>
<pre><code class="language-text">## Build / Install Yosys
$ mkdir -p ~/Tools &amp;&amp; cd ~/Tools
$ git clone https://github.com/YosysHQ/yosys.git
$ cd yosys
$ make -j $(nproc)
$ sudo make install

# Check the version
$ yosys --version
Yosys 0.31+45 (git sha1 ff3c7873f, clang 14.0.0...)

# see: https://github.com/YosysHQ/nextpnr/blob/master/README.md
</code></pre>
<pre><code class="language-text">## Build / Install IceStorm
$ mkdir -p ~/Tools &amp;&amp; cd ~/Tools
$ git clone https://github.com/YosysHQ/icestorm.git
$ cd icestorm
$ make -j $(nproc)
$ sudo make install
</code></pre>
<pre><code class="language-text">## Build / Install NextPNR
$ mkdir -p ~/Tools &amp;&amp; cd ~/Tools
$ git clone https://github.com/YosysHQ/nextpnr.git
$ cd nextpnr

# Option 1: No GUI 
$ cmake -DARCH=ice40 -DCMAKE_INSTALL_PREFIX=/usr/local .

# Option 2: with GUI
$ sudo apt install qtbase5-dev qt5-qmake
$ cmake -DBUILD_GUI=ON -DARCH=ice40 -DCMAKE_INSTALL_PREFIX=/usr/local . 

$ make -j $(nproc)
$ sudo make install
</code></pre>
<p>&nbsp;</p>
<p>ในกรณีที่ใช้บอร์ด <strong>Muse Lab iCE-Sugar FPGA Board</strong>
แนะนำให้ติดตั้งโปรแกรม <code>icesprog</code> ของ <strong>Muse Lab</strong></p>
<pre><code class="language-text">## Build / Install the 'iceprog' tool
$ sudo apt install libhidapi-dev libusb-1.0-0-dev
$ mkdir -p ~/Tools/icesprog &amp;&amp; cd ~/Tools/icesprog
$ wget https://github.com/wuxx/icesugar/raw/master/tools/src/icesprog.c
$ gcc -Wall icesprog.c -o icesprog \
   -I/usr/include/libusb-1.0 -I/usr/include/hidapi \
   -lusb-1.0 -lhidapi-libusb 
$ sudo cp icesprog /usr/local/bin/
</code></pre>
<p>&nbsp;</p>
<hr />
<h2 id="ice-sugar">&#9655; <strong>วงจรสาธิตการใช้งานสำหรับบอร์ด iCE-Sugar</strong><a class="headerlink" href="#ice-sugar" title="Permanent link">#</a></h2>
<p>ตัวอย่างวงจรสาธิตสำหรับบอร์ด <strong>iCE-Sugar</strong> ประกอบด้วย 3 ไฟล์</p>
<ul>
<li><code>leds.v</code>
เป็นโค้ด <strong>Verilog</strong> ที่สร้างวงจรตัวนับแบบไบนารี แล้วใช้ 3 บิต เป็นเอาต์พุตนำไปต่อกับขา <strong>RGB LED</strong> บนบอร์ดทดลอง</li>
<li><code>leds.pcf</code>
เป็นไฟล์ <strong>Physical Constraint File</strong> เพื่อกำหนดตำแหน่งขาของชิป สำหรับ <strong>I/O</strong> ของวงจร</li>
<li><code>Makefile</code>
เป็นไฟล์สำหรับใช้กับคำสั่ง <code>make</code> เพื่อคอมไพล์โค้ดให้เป็นไฟล์บิตสตรีม (<strong>.bin</strong>)</li>
</ul>
<p><strong>File</strong>: <a href="leds_demo/leds.v"><code>leds.v</code></a></p>
<pre><code class="language-verilog">module leds(
   input  wire clk,
   output wire led_r, 
   output wire led_g, 
   output wire led_b
);

localparam N = 24;

reg [N-1:0] counter = 0; // N-bit register
wire [1:0]  selected_bits;

assign selected_bits = { counter[N-1], counter[N-2] };
assign led_r = ~(selected_bits == 2'b01);
assign led_g = ~(selected_bits == 2'b10);
assign led_b = ~(selected_bits == 2'b11);

always @(posedge clk) begin
   counter &lt;= counter + 1'b1; // increment the counter value
end

endmodule
</code></pre>
<p><strong>File</strong>: <a href="leds_demo/leds.pcf"><code>leds.pcf</code></a></p>
<pre><code class="language-text"># For the iCE40 UltraPlus (iCE40UP5K-QFN): iCE-Sugar Board
# Pin35=CLK (12MHz), Pin41=Green, Pin40=Red, Pin39=Blue
set_io clk   35
set_io led_r 40
set_io led_g 41
set_io led_b 39

</code></pre>
<p><strong>File</strong>: <a href="./leds_demo/Makefile"><code>Makefile</code></a></p>
<pre><code class="language-text">filename = leds
pcf_file = $(filename).pcf

build:
    yosys -p 'synth_ice40 -top $(filename) -json $(filename).json' $(filename).v
    nextpnr-ice40 \
        --up5k --package sg48 \
        --json $(filename).json \
        --pcf $(pcf_file) \
        --asc $(filename).asc
    icepack $(filename).asc $(filename).bin

clean:
    rm -rf $(filename).blif $(filename).asc $(filename).bin $(filename).json
</code></pre>
<p><img alt="" src="ice-sugar_board.jpg" /></p>
<p>รูป: บอร์ด <strong>iCE-Sugar</strong> ที่ได้นำมาทดลอง</p>
<p>&nbsp; </p>
<p>เมื่อได้ไฟล์ <code>leds.bin</code> ก็สามารถนำไปโปรแกรมลงชิป <strong>FPGA</strong> ได้ ให้เชื่อมต่อบอร์ด <strong>iCE-Sugar</strong>
กับคอมพิวเตอร์ของผู้ใช้ทางพอร์ต <strong>USB</strong> แล้วจะมองเห็นไดรฟ์ปรากฎที่มีชื่อว่า <code>iCELink</code>
จากนั้นให้คลิกเลือกไฟล์ .bin แล้วลากไปยังไดรฟ์ดังกล่าว</p>
<p>&nbsp; </p>
<p>หากจะลองใช้คำสั่ง <code>icesprog</code> ก็มีตัวอย่างดังนี้</p>
<pre><code class="language-text">$ lsusb | grep &quot;ID 1d50:602b&quot;
Bus 001 Device 010: ID 1d50:602b OpenMoko, Inc. FPGALink

$ icesprog -p
probe chip
board: [iCESugar]
flash: [w25q64] (8MB)
done

$ icesprog -e -w leds.bin
flash offset: 0x00000000
write flash (104090 (0x1969a) Bytes)
write 0x00000000
write 0x00010000
done
</code></pre>
<p>ข้อสังเกต:</p>
<ul>
<li><code>iceprog</code> เป็นโปรแกรมของ <a href="https://github.com/YosysHQ/icestorm/"><strong>Project IceStorm</strong></a>
สำหรับการอัปโหลดไฟล์บิตสตรีม <strong>iCE40</strong> ที่ใช้กับอุปกรณ์ <strong>FT2232H-based Lattice iCE Programmer</strong></li>
<li><code>icesprog</code> เป็นโปรแกรมของ <strong>Muse Lab</strong>
ที่ใช้กับอุปกรณ์ <strong>STM32F1-based Programmer</strong>
เพื่อเขียนไฟล์บิตสตรีมไปยังชิป <strong>SPI Flash</strong> บนบอร์ด <strong>iCE-Sugar</strong></li>
</ul>
<p>&nbsp;</p>
<hr />
<h2 id="hard-ip-ice40-ultraplus">&#9655; <strong>การสาธิตการใช้วงจร Hard IP ภายในชิป  iCE40 UltraPlus</strong><a class="headerlink" href="#hard-ip-ice40-ultraplus" title="Permanent link">#</a></h2>
<p>อีกตัวอย่างหนึ่งเป็นโค้ด <strong>Verilog</strong> เพื่อสาธิตการใช้งานวงจร
<strong>On-Chip High-Freq. Oscillator (48MHz max.)</strong> (<code>SB_HFOSC</code>)
และวงจรควบคุม <strong>RGB LED Driver + 3x Open-Drain Outputs</strong> (<code>SB_RGBA_DRV</code>) ของชิป <strong>iCE40 UltraPlus</strong></p>
<p><img alt="" src="ice40_rgb_driver.png" /></p>
<p>รูป: วงจร <code>SB_RGBA_DRV</code> และ <strong>I/O</strong> สำหรับการเชื่อมต่อสัญญาณภายใน</p>
<p>ตัวอย่างวงจรสาธิตสำหรับบอร์ด <strong>iCE-Sugar</strong> ประกอบด้วย 3 ไฟล์</p>
<ul>
<li><code>rgb_leds.v</code>
เป็นโค้ด <strong>Verilog</strong> ที่สร้างวงจรตัวนับแบบไบนารี แล้วใช้ 3 บิต เป็นเอาต์พุตนำไปต่อกับขา <strong>RGB LED</strong> 
บนบอร์ดทดลอง แต่วงจรนี้ใช้วงจรสร้างสัญญาณ <strong>Clock</strong> ภายในชิป <strong>FPGA</strong></li>
<li><code>rgb_leds.pcf</code>
เป็นไฟล์ <strong>Physical Constraint File</strong> เพื่อกำหนดตำแหน่งขาของชิป สำหรับ <strong>I/O</strong> ของวงจร</li>
<li><code>Makefile</code>
เป็นไฟล์สำหรับใช้กับคำสั่ง <code>make</code> เพื่อคอมไพล์โค้ดให้เป็นไฟล์บิตสตรีม (<strong>.bin</strong>)</li>
</ul>
<p>&nbsp;</p>
<p><strong>File</strong>: <a href="rgb_leds/rgb_leds.v"><code>rgb_leds.v</code></a></p>
<pre><code class="language-verilog">module rgb_leds (
  output wire [2:0] rgb_leds
);

localparam N = 26; // the bit width of the counter

wire clk; // on-chip clock
reg  [N-1:0] counter;
wire [1:0]   selected_bits;
wire [2:0]   rgb_ctrl;

// Use the High-Frequency Internal Oscillator
SB_HFOSC osc(.CLKHFPU(1'b1), .CLKHFEN(1'b1), .CLKHF(clk));

defparam osc.CLKHF_DIV = &quot;0b01&quot;; 
// 00=48MHz, 01=24MHz, 10=12MHZ, 11=6MHz

// Counter
always @(posedge clk) begin
   counter &lt;= counter + 1'b1;
end

assign selected_bits = { counter[N-1], counter[N-2] };
// RGB control signals are active-high.
assign rgb_ctrl[0] = (selected_bits == 2'b01); // Blue
assign rgb_ctrl[1] = (selected_bits == 2'b10); // Red
assign rgb_ctrl[2] = (selected_bits == 2'b11); // Green

// Instantiate RGB_DRIVER primitive
SB_RGBA_DRV driver (
    .RGBLEDEN(1'b1),           // enable control for LEDs
    .RGB0PWM ( rgb_ctrl[0] ),  // RGB LED control signal 0
    .RGB1PWM ( rgb_ctrl[1] ),  // RGB LED control signal 1
    .RGB2PWM ( rgb_ctrl[2] ),  // RGB LED control signal 2
    .CURREN  ( 1'b1 ),         // power up
    .RGB0    ( rgb_leds[0] ),  // RGB_LED output 0 // Pin 39 (B)
    .RGB1    ( rgb_leds[1] ),  // RGB_LED output 1 // Pin 40 (R)
    .RGB2    ( rgb_leds[2] )   // RGB_LED output 2 // Pin 41 (G)
);

// Drive strength options:
//   &quot;0b000000&quot; = 0mA
//   &quot;0b000001&quot; = 4mA
//   &quot;0b000011&quot; = 8mA
//   &quot;0b000111&quot; = 12mA
//   &quot;0b001111&quot; = 16mA
//   &quot;0b011111&quot; = 20mA
defparam driver.RGB0_CURRENT = &quot;0b000011&quot;;
defparam driver.RGB1_CURRENT = &quot;0b000011&quot;;
defparam driver.RGB2_CURRENT = &quot;0b000011&quot;;
defparam driver.CURRENT_MODE = &quot;0b0&quot;; // &quot;0&quot;=full, &quot;1&quot;=half

endmodule
</code></pre>
<p><strong>File</strong>: <a href="rgb_leds/rgb_leds.pcf"><code>rgb_leds.pcf</code></a></p>
<pre><code class="language-text"># For the iCE40 UltraPlus (iCE40UP5K-QFN)
# Pin41=G, Pin40=R, Pin39=B
set_io rgb_leds[0] 40
set_io rgb_leds[1] 41
set_io rgb_leds[2] 39
</code></pre>
<p>อีกตัวอย่างหนึ่งเป็นโค้ด <strong>Verilog</strong> เพื่อสาธิตการใช้งานวงจร
<strong>iCE40 sysCLOCK PLL (Phase-Locked Loop)</strong> เพื่อสร้างสัญญาณ <strong>Clock</strong>
และวงจรควบคุม <strong>RGB LED Driver</strong> (<code>SB_RGBA_DRV</code>)
ของชิป <strong>iCE40 UltraPlus</strong></p>
<p>คำสั่ง <code>icepll</code> ใช้สำหรับการกำหนดค่าให้กับวงจร <strong>PLL</strong> เพื่อสร้างความถี่ที่ต้องการจากสัญญาณอินพุต
เช่น  ความถี่ที่ต้องการคือ <strong>48MHz</strong> และใช้สัญญาณอินพุต <strong>12MHz</strong>
โดยมีตัวอย่างการทำคำสั่งดังนี้</p>
<pre><code class="language-text">$ icepll -p -i 12 -o 48

F_PLLIN:    12.000 MHz (given)
F_PLLOUT:   48.000 MHz (requested)
F_PLLOUT:   48.000 MHz (achieved)

FEEDBACK: SIMPLE
F_PFD:   12.000 MHz
F_VCO:  768.000 MHz

DIVR:  0 (4'b0000)
DIVF: 63 (7'b0111111)
DIVQ:  4 (3'b100)

FILTER_RANGE: 1 (3'b001)
</code></pre>
<p>ตัวอย่างการเขียนโค้ด <strong>Verilog</strong> มีดังนี้</p>
<p><strong>File</strong>: <a href="pll_rgb_leds/pll_rgb_leds.v"><code>pll_rgb_leds.v</code></a></p>
<pre><code class="language-verilog">module pll_rgb_leds ( 
  input  wire clk,
  output wire [2:0] rgb_leds
);

localparam N = 26; // bit width of the counter

reg  [N-1:0] counter = 0;
wire [1:0]   selected_bits;
wire [2:0]   rgb_ctrl;
wire clk_in, clk_out, pll_locked;

assign clk_in = clk;

SB_PLL40_PAD #(
  .FEEDBACK_PATH(&quot;SIMPLE&quot;),
  .DIVR(0),        // DIVR =  0
  .DIVF(63),       // DIVF = 63
  .DIVQ(4),        // DIVQ =  4
  .FILTER_RANGE(1) // FILTER_RANGE = 1
) pll_inst ( 
  .LOCK(pll_locked),
  .RESETB(1'b1),
  .BYPASS(1'b0),
  .PACKAGEPIN(clk_in),
  .PLLOUTCORE(clk_out)
);

// Counter
always @(posedge clk_out) begin
   counter &lt;= counter + 1'b1;
end

assign selected_bits = { counter[N-1], counter[N-2] };
assign rgb_ctrl[0] = (selected_bits == 2'b01); // Red
assign rgb_ctrl[1] = (selected_bits == 2'b10); // Green
assign rgb_ctrl[2] = (selected_bits == 2'b11); // Blue

// All three LEDs are active-low.
assign rgb_leds = ~rgb_ctrl;

endmodule
</code></pre>
<p><strong>File</strong>: <a href="pll_rgb_leds/pll_rgb_leds.pcf"><code>pll_rgb_leds.pcf</code></a></p>
<pre><code class="language-text"># For the iCE40 UltraPlus (iCE40UP5K-QFN)
# Pin35=CLK (12MHz), Pin41=G, Pin40=R, Pin39=B
set_io clk         35
set_io rgb_leds[0] 40
set_io rgb_leds[1] 41
set_io rgb_leds[2] 39
</code></pre>
<p>&nbsp;</p>
<hr />
<h2 id="_1">&#9655; <strong>แหล่งข้อมูลศึกษาเพิ่มเติม</strong><a class="headerlink" href="#_1" title="Permanent link">#</a></h2>
<ul>
<li><strong>IceBreaker FPGA Board</strong><ul>
<li><a href="https://github.com/icebreaker-fpga/icebreaker">icebreaker-fpga/icebreaker</a></li>
<li><a href="https://github.com/icebreaker-fpga/icebreaker-workshop">icebreaker-fpga/icebreaker-workshop</a></li>
<li><a href="https://github.com/icebreaker-fpga/icebreaker-pmod">icebreaker-fpga/icebreaker-pmod</a></li>
<li><a href="https://github.com/icebreaker-fpga/icebreaker-examples">icebreaker-fpga/icebreaker-examples</a></li>
<li><a href="https://github.com/icebreaker-fpga/icebreaker-verilog-examples">icebreaker-fpga/icebreaker-verilog-examples</a></li>
<li><a href="https://github.com/icebreaker-fpga/wtfpga">icebreaker-fpga/wtfpga</a></li>
</ul>
</li>
<li><a href="https://projectf.io/posts/building-ice40-fpga-toolchain/"><strong>Project F - iCE40 FPGA Toolchain on Linux</strong></a></li>
<li><a href="https://github.com/projf/projf-explore"><strong>Project F - FPGA Development &amp; Examples</strong></a></li>
<li><a href="https://github.com/damdoy/ice40_ultraplus_examples"><strong>iCE40 UltraPlus Examples</strong></a></li>
<li><a href="https://github.com/osresearch/up5k"><strong>Upduino v2 FPGA Demos</strong></a></li>
<li><a href="https://projectf.io/posts/spram-ice40-fpga/"><strong>SPRAM on iCE40 FPGA</strong></a></li>
<li><a href="https://github.com/PulseRain/Reindeer"><strong>PulseRain Reindeer - RISCV RV32IM Soft CPU</strong></a></li>
<li><a href="https://hackaday.io/project/27550-the-hobbyists-guide-to-fpgas"><strong>The Hobbyists Guide to FPGAs</strong></a></li>
<li><a href="https://tomverbeure.github.io/2022/12/27/The-ICE-V-Wireless-FPGA-Board.html"><strong>An In-Depth Look at the ICE-V Wireless FPGA Development Board</strong></a></li>
<li><a href="https://icestudio.io/"><strong>IceStudio - An open source graphical design tool for iCE40 FPGA</strong></a></li>
<li><a href="https://gitee.com/eetree-git/ICE40_Training"><strong>UP5K Training by eetree.cn</strong></a></li>
</ul>
<p>&nbsp;</p>
<hr />
<h2 id="_2">&#9655; <strong>กล่าวสรุป</strong><a class="headerlink" href="#_2" title="Permanent link">#</a></h2>
<p>บทความนี้ได้นำเสนอเกี่ยวกับชิป <strong>FPGA</strong> ตระกูล <strong>iCE40</strong> ของบริษัท <strong>Lattice Semiconductor</strong>
และบอร์ด <strong>FPGA</strong> ที่มีจำหน่าย ซึ่งบอร์ดส่วนใหญ่ที่ได้มีการสำรวจมาเป็นตัวอย่างนั้น เป็นฮาร์ดแวร์ประเภท
<strong>Open Source Hardware (OSHW)</strong> ที่มีการเปิดเผยและแชร์ไฟล์ของวงจรและการออกแบบ <strong>PCB</strong>
จุดเด่นของบอร์ด <strong>iCE40 FPGA</strong> เหล่านี้คือ การใช้ซอฟต์แวร์ประเภท <strong>Open Source</strong> 
ภายใต้โครงการ <strong>IceStorm</strong> สำหรับการออกแบบวงจรดิจิทัลในชิป <strong>FPGA</strong> </p>
<p>&nbsp;</p>
<hr />
<p><em>This work is licensed under a</em> <strong><em>Creative Commons Attribution-ShareAlike 4.0 International License.</em></strong></p>
<p>Created: 2023-08-12 | Last Updated: 2023-08-19</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2021-2025 IoT Engineering Education, Bangkok/Thailand</a></p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
