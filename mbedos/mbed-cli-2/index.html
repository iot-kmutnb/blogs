<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="RSP">
        <link rel="canonical" href="https://iot-kmutnb.github.io/blogs/mbedos/mbed-cli-2/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>แนะนำการใช้งาน Arm Mbed CLI 2 - IoT Engineering Education</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../../css/extra.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/c.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/cpp.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/arduino.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/typescript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/vhdl.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/verilog.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/text.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/matlab.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/julia.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-966FQ6RN6W"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-966FQ6RN6W');
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">IoT Engineering Education</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#arm-mbed-cli-2" class="nav-link">แนะนำการใช้งาน Arm Mbed CLI 2</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#mbed-cli-2-linux" class="nav-link">&#9655; การติดตั้ง Mbed CLI 2 สำหรับ Linux</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#mbed-cli-2-windows" class="nav-link">&#9655; การติดตั้ง Mbed CLI 2 สำหรับ Windows</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#mbed-cli-2" class="nav-link">&#9655; การสร้างโปรเจกต์ใหม่โดยใช้ Mbed CLI 2</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#mbed-os" class="nav-link">&#9655; การดาวน์โหลด mbed-os แยกจากโปรเจกต์</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#github" class="nav-link">&#9655; การดาวน์โหลดและคอมไพล์โปรเจกต์ตัวอย่างจาก Github</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_1" class="nav-link">&#9655; กล่าวสรุป</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="arm-mbed-cli-2">แนะนำการใช้งาน Arm Mbed CLI 2<a class="headerlink" href="#arm-mbed-cli-2" title="Permanent link">#</a></h1>
<p>เนื้อหาในส่วนนี้อธิบายขั้นตอนการติดตั้งและใช้งานซอฟต์แวร์ <strong>Mbed CLI 2 Tools</strong> ซึ่งเป็น <strong>Python package</strong>
(และไม่ใช่ <strong>Mbed CLI v1</strong> ดังนั้นรูปแบบของคำสั่งที่ใช้งานจึงต่างกัน) และจะทดลองใช้งานกับระบบปฎิบัติการ <strong>Linux</strong> 
เช่น <strong>Ubuntu</strong> / <strong>Debian</strong> / <strong>Raspbian OS</strong> หรือจะใช้  <strong>WSL2 / Ubuntu</strong> 
สำหรับ <strong>Windows</strong> ก็ได้เช่นกัน</p>
<p>รายละเอียดเกี่ยวกับขั้นตอนการติดตั้ง <strong>Mbed CLI 2</strong> สามารถดูได้จาก
<a href="https://os.mbed.com/docs/mbed-os/latest/build-tools/install-or-upgrade.html"><strong>"Mbed CLI 2 Install or Upgrade"</strong></a>
และ <a href="https://os.mbed.com/docs/mbed-os/latest/build-tools/use.html"><strong>"Mbed CLI 2 Usage"</strong></a> สำหรับตัวอย่างการใช้คำสั่ง</p>
<hr />
<h2 id="mbed-cli-2-linux">&#9655; <strong>การติดตั้ง Mbed CLI 2 สำหรับ Linux</strong><a class="headerlink" href="#mbed-cli-2-linux" title="Permanent link">#</a></h2>
<p>ขั้นตอนแรกให้ผู้ใช้ติดตั้งโปรแกรมที่จำเป็นต้องใช้งานสำหรับ <strong>Mbed CLI 2</strong> ตามลำดับต่อไปนี้ </p>
<ul>
<li><strong>Python 3 &amp; Development Tools</strong> (<code>python3-dev</code>)</li>
<li><strong>ARM GNU Toolchain / GNU Arm Embedded Toolchain</strong></li>
<li><strong>CMake</strong> (<a href="https://cmake.org/">https://cmake.org/</a>)</li>
<li><strong>Ninja Build System</strong> (<a href="https://ninja-build.org/">https://ninja-build.org/</a>)</li>
</ul>
<p>&nbsp;</p>
<p>คำสั่งสำหรับ <strong>Bash Shell</strong> ในการติดตั้งโปรแกรมสำหรับ <strong>Linux / Ubuntu</strong> มีดังนี้</p>
<pre><code class="language-bash">$ sudo apt install python3-dev
$ sudo apt install ninja-build cmake tree
$ sudo apt install gcc-arm-none-eabi
</code></pre>
<p>จากนั้นให้ลองตรวจสอบเวอร์ชันของโปรแกรม เช่น <strong>Python 3</strong> / <strong>CMake</strong> / <strong>Ninja-Build</strong> 
/ <strong>GNU Arm Embedded Toolchain - Cross Compiler</strong> ดังนี้</p>
<pre><code class="language-bash">$ python3 -V
$ cmake --version
$ ninja --version
$ arm-none-eabi-gcc --version
</code></pre>
<p>&nbsp;</p>
<p>ขั้นตอนถัดไปเป็นการคำสั่งเพื่อติดตั้ง <strong>Mbed CLI 2 Tools</strong> 
และตรวจสอบเวอร์ชันที่ได้ติดตั้งใช้งาน</p>
<pre><code class="language-bash">$ sudo python3 -m pip install -U intelhex prettytable future
$ sudo python3 -m pip install -U mbed-tools
$ mbed-tools --version
</code></pre>
<p>&nbsp;</p>
<p>ลองมาดูเวอร์ชันของโปรแกรมที่ได้ติดตั้งเพื่อทดลองใช้งาน คือ</p>
<ul>
<li><strong>python 3.8.10</strong></li>
<li><strong>cmake version 3.19.8</strong></li>
<li><strong>ninja version 1.10.2</strong></li>
<li><strong>arm-none-eabi-gcc 10.2.1 20201103</strong></li>
<li><strong>mbed-tools version 7.44.0</strong></li>
</ul>
<p>&nbsp;</p>
<p><img alt="Ubuntu command lines" src="../images/mbed_cli2_tools-1.png" /></p>
<p>รูปภาพ: ตัวอย่างการทำคำสั่งใน Bash Shell ของ Ubuntu เพื่อตรวจสอบเวอร์ชันของโปรแกรม</p>
<p><img alt="Ubuntu command lines" src="../images/mbed_cli2_tools-2.png" /></p>
<p>รูปภาพ: ตัวอย่างการทำคำสั่งเพื่อติดตั้ง Mbed-CLI 2 Tools</p>
<p>&nbsp;</p>
<hr />
<h2 id="mbed-cli-2-windows">&#9655; <strong>การติดตั้ง Mbed CLI 2 สำหรับ Windows</strong><a class="headerlink" href="#mbed-cli-2-windows" title="Permanent link">#</a></h2>
<p>สำหรับผู้ใช้ <strong>Windows</strong> ถ้าไม่ใช้   <strong>Linux</strong> ด้วยวิธี <strong>WSL2</strong> หรือ <strong>Virtual Machine (VM)</strong> 
อีกทางเลือกหนึ่งคือ การดาวน์โหลดและติดตั้งใช้งานซอฟต์แวร์ต่อไปนี้ และนำมาใช้งานร่วมกับ <strong>Git Bash / MINGW64</strong> </p>
<ul>
<li><a href="https://git-scm.com/"><strong>Git for Windows</strong></a></li>
<li><a href="https://www.microsoft.com/en-us/p/python-39/9p7qfqmjrfp7"><strong>Python3 for Windows</strong></a></li>
<li><a href="https://xpack.github.io/"><strong>xPack Tools</strong></a> <ul>
<li><a href="https://github.com/xpack-dev-tools/arm-none-eabi-gcc-xpack/releases"><code>arm-none-eabi-gcc-xpack</code></a></li>
<li><a href="https://github.com/xpack-dev-tools/ninja-build-xpack/releases"><code>ninja-build-xpack</code></a></li>
<li><a href="https://github.com/xpack-dev-tools/cmake-xpack/releases"><code>cmake-xpack</code></a></li>
</ul>
</li>
</ul>
<p>อย่าลืมตั้งค่า <strong>System Environment Variables</strong>
เพื่อระบุ <code>PATH</code> สำหรับโปรแกรมเหล่านี้ เพื่อให้สามารถเรียกใช้งานแบบ <strong>Command Line</strong> ได้</p>
<p>&nbsp;</p>
<p><img alt="XPack Tools Arm Embedded GCC Toolchain" src="../images/xpack_tools_arm_embedded_gcc.png" /></p>
<p>รูปภาพ: รายการไฟล์สำหรับดาวน์โหลดเพื่อใช้งาน <code>arm-none-eabi-gcc-xpack</code> </p>
<p>&nbsp;</p>
<p><img alt="" src="../images/git_bash_commands_version.png" /></p>
<p>รูปภาพ: ตัวอย่างการทำคำสั่งใน Git Bash Shell เพื่อตรวจสอบเวอร์ชันของโปรแกรม</p>
<p>&nbsp;</p>
<hr />
<h2 id="mbed-cli-2">&#9655; <strong>การสร้างโปรเจกต์ใหม่โดยใช้ Mbed CLI 2</strong><a class="headerlink" href="#mbed-cli-2" title="Permanent link">#</a></h2>
<p>ถัดไปเป็นตัวอย่างการทำคำสั่งเพื่อสร้างโปรเจกต์ใหม่ โดยตั้งชื่อว่า <code>mbed-os-demo</code>
และสาธิตการเขียนโค้ดเพื่อทำให้วงจร <strong>LED</strong> บนบอร์ดไมโครคอนโทรลเลอร์ เช่น <strong>STM32 NUCLEO</strong> กระพริบได้</p>
<pre><code class="language-bash">$ mbed-tools new &quot;mbed-os-demo&quot;
</code></pre>
<p>คำสั่งนี้จะสร้างไดเรกทอรีใหม่ตามชื่อโปรเจกต์ และจะดาวน์โหลดไฟล์ <strong>Mbed repository</strong> มาจาก <strong>Github</strong>
ดังนั้นคอมพิวเตอร์ของผู้ใช้จะต้องเชื่อมต่ออินเทอร์เน็ต</p>
<p>เมื่อได้ดาวน์โหลดไฟล์และสร้างโปรเจกต์ใหม่ในไดเรกทอรี <code>mbed-os-demo</code> ได้แล้ว ให้ลองทำคำสั่ง <code>tree</code> 
เพื่อดูโครงสร้างและรายการไฟล์ (แสดงรายการเฉพาะสองระดับแรก) ภายในไดเรกทอรีดังกล่าว</p>
<pre><code class="language-bash">$ cd mbed-os-demo
$ tree -L 2
</code></pre>
<p><img alt="Ubuntu command lines" src="../images/mbed_cli2_tools-3.png" /></p>
<p>รูปภาพ: ตัวอย่างการทำคำสั่งเพื่อสร้างโปรเจกต์ใหม่ <code>mbed-os-demo</code></p>
<p>ตัวอย่างข้อความเอาต์พุตจากการทำคำสั่ง <code>tree -L 2</code> มีดังนี้</p>
<pre><code>.
├── CMakeLists.txt
├── main.cpp
├── mbed-os
│   ├── CMakeLists.txt
│   ├── CONTRIBUTING.md
│   ├── DOXYGEN_FRONTPAGE.md
│   ├── Jenkinsfile
│   ├── LICENSE-apache-2.0.txt
│   ├── LICENSE.md
│   ├── README.md
│   ├── TESTS
│   ├── UNITTESTS
│   ├── cmsis
│   ├── connectivity
│   ├── docker_images
│   ├── docs
│   ├── doxyfile_options
│   ├── doxygen_options.json
│   ├── drivers
│   ├── events
│   ├── extern
│   ├── features
│   ├── hal
│   ├── logo.png
│   ├── mbed.h
│   ├── platform
│   ├── requirements.txt
│   ├── rtos
│   ├── storage
│   ├── targets
│   └── tools
├── mbed-os.lib
└── mbed_app.json

17 directories, 16 files
</code></pre>
<p>&nbsp;</p>
<p>จากรายการไฟล์ จะเห็นได้ว่า มีไฟล์ <code>main.cpp</code> ได้ถูกสร้างมาให้แล้วโดยอัตโนมัติ และให้เปิดไฟล์เขียนโค้ดตามตัวอย่าง 
โดยจะเลือกใช้บอร์ด <strong>STM32 Nucleo</strong> เป็นบอร์ดเป้าหมาย เช่น</p>
<ul>
<li><strong>NUCLEO-F446RE</strong></li>
<li><strong>NUCLEO-L476RG</strong></li>
<li><strong>NUCLEO-L432KC</strong></li>
</ul>
<p>ข้อดีของบอร์ด <strong>STM32 Nucleo</strong> คือ การรองรับการอัปโหลดไฟล์แบบ 
<strong>Drag &amp; Drop Device Programming</strong>
เมื่อเชื่อมต่อบอร์ดกับคอมพิวเตอร์ของผู้ใช้จะมองเห็นเป็น <strong>USB Flash Drive</strong></p>
<p>&nbsp;</p>
<pre><code class="language-c++">#include &quot;mbed.h&quot;
#include &quot;platform/mbed_version.h&quot;

// Note: The LED1 pin on the NUCLEO-L476RG board is PA_5.
DigitalOut led( LED1 ); // use on-board LED (LED1)
// see: https://os.mbed.com/docs/mbed-os/latest/apis/digitalout.html

int main() {
   printf( &quot;Hello, Mbed OS!\n&quot; );
   printf( &quot;Mbed version: %d.%d.%d\n&quot;,
            MBED_MAJOR_VERSION,
            MBED_MINOR_VERSION,
            MBED_PATCH_VERSION );
   while (1) {
      led  = !led; // toggle the LED output
      printf( &quot;LED: %d\n&quot;, (int)led.read() ); // read LED state
      ThisThread::sleep_for( 500ms ); // sleep for 500 msec
   }
   return 0;
}
</code></pre>
<p>&nbsp;</p>
<p>ถัดไปให้ตรวจสอบเวอร์ชันของ <strong>CMake</strong> ที่ใช้งานจริง กับเวอร์ชันต่ำสุดที่มีการระบุไว้ในไฟล์ 
<code>./CMakeLists.txt</code> และ <code>./mbed-os/CMakeLists.txt</code> ภายในไดเรกทอรีของโปรเจกต์<br />
ตัวอย่างเช่น มีการระบุเวอร์ชันขั้นต่ำสุดเป็ <code>3.19.0</code> </p>
<p><code>cmake_minimum_required(VERSION 3.19.0)</code></p>
<p>ให้กำหนดค่า <strong>Baud Rate</strong> สำหรับการรับส่งข้อมูลทาง <strong>Serial</strong> 
ให้ตรงกับ <strong>115200</strong> (จากเดิมที่มีค่า <strong>Default</strong> เป็น <strong>9600</strong>) ในไฟล์ <code>./mbed_app.json</code> ดังนี้</p>
<pre><code class="language-yaml">{
    &quot;target_overrides&quot;: {
        &quot;*&quot;: {
            &quot;platform.stdio-baud-rate&quot;: 115200,
            &quot;platform.stdio-convert-newlines&quot;: true,
            &quot;target.printf_lib&quot;: &quot;std&quot;
        }
    }
}
</code></pre>
<p>จากนั้นทำขั้นตอน <strong>Build Project</strong> และจะต้องกำหนดบอร์ดหรือแพลตฟอร์มเป้าหมาย (<strong>TARGET</strong>)
ถ้าเลือกใช้บอร์ด <code>NUCLEO-L476RG</code> | <code>NUCLEO_F446RE</code> | <code>NUCLEO_L432KC</code> 
ก็ทำคำสั่งตามรูปแบบต่อไปนี้ </p>
<pre><code class="language-bash">$ mbed-tools compile -m NUCLEO_L476RG -t GCC_ARM
$ mbed-tools compile -m NUCLEO_F446RE -t GCC_ARM
$ mbed-tools compile -m NUCLEO_L432KC -t GCC_ARM
</code></pre>
<p>ไดเรกทอรีที่เป็นเอาต์พุต ซึ่งมีไฟล์ <code>.bin</code> และ <code>.hex</code> สำหรับบอร์ดเป้าหมายคือ
<code>./cmake_build/&lt;TARGET&gt;/develop/GCC_ARM/</code></p>
<p>แต่ถ้าต้องการคอมไพล์โปรเจกต์ใหม่ทั้งหมด (<strong>force rebuild</strong>) ให้เพิ่ม <code>--clean</code> ต่อท้ายคำสั่ง</p>
<p>เมื่อได้ไฟล์ <code>.bin</code> แล้ว ก็สามารถนำไปใช้กับบอร์ด <strong>STM32 NUCLEO</strong> ได้ง่าย โดยสำเนาไฟล์ <code>.bin</code> 
หรือคลิก <strong>Drag &amp; Drop</strong> ไปยังไดรฟ์ของบอร์ดดังกล่าวเมื่อเสียบสาย <strong>USB</strong> เชื่อมต่อกับคอมพิวเตอร์ </p>
<p>ในกรณีที่ใช้บอร์ด <code>NUCLEO_F446RE</code> จะมองเห็น <strong>USB Flash Drive</strong> ตรงกับชื่อ <code>NODE_F446RE</code></p>
<p><img alt="Ubuntu command lines" src="../images/mbed_cli2_tools-4.png" /></p>
<p>รูปภาพ: ตัวอย่างการทำคำสั่งคอมไพล์โค้ดในโปรเจกต์ <code>mbed-os-demo</code></p>
<p>&nbsp;</p>
<p>ถ้าลองทำคำสั่ง <code>mbed-tools detect</code> (ใน <strong>Git Bash for Windows</strong>) 
จะพบว่า มีรายการบอร์ด เช่น <code>NUCLEO-F446RE</code> และหมายเลขพอร์ตที่เชื่อมต่ออยู่</p>
<p>ถ้าทดสอบการทำงานของโปรแกรมที่ได้ แล้วรับข้อความจากบอร์ด <strong>NUCLEO</strong> 
(ผ่านทางวงจร <strong>ST-LINK/V2</strong> ที่อยู่บนบอร์ด) เช่น ใช้โปรแกรม <strong>Arduino IDE - Serial Monitor</strong>
เปิดรับข้อความจาก <strong>Serial COM port (baudrate: 115200)</strong> ก็จะมองเห็นข้อความตามตัวอย่างนี้</p>
<p><img alt="Ubuntu command lines" src="../images/mbed_os_output.png" /></p>
<p>รูปภาพ: ตัวอย่างข้อความเอาต์พุตจากบอร์ดไมโครคอนโทรลเลอร์</p>
<p><img alt="Ubuntu command lines" src="../images/stm32_nucleo_f446re_board.jpg" /></p>
<p>รูปภาพ: บอร์ด <a href="https://os.mbed.com/platforms/ST-Nucleo-F446RE/"><strong>NUCLEO-F446RE</strong></a> สำหรับการทดลองเขียนโปรแกรม</p>
<p>&nbsp;</p>
<hr />
<h2 id="mbed-os">&#9655; <strong>การดาวน์โหลด mbed-os แยกจากโปรเจกต์</strong><a class="headerlink" href="#mbed-os" title="Permanent link">#</a></h2>
<p>คำแนะนำสำหรับการสร้างโปรเจกต์ใหม่</p>
<ul>
<li>ให้ดาวน์โหลดไลบรารี <code>mbed-os</code> จาก <strong>Github</strong> (โดยทั่วไปก็เลือกเป็น <strong>master branch</strong>) 
มาเก็บไว้ก่อน เป็น <strong>local copy</strong> ซึ่งจะเก็บไว้ในไดเรกทอรีที่มีชื่อเหมือนกัน</li>
<li>สร้างโปรเจกต์ใหม่ในอีกไดเรกทอรี และภายใต้ไดเรกทอรีของโปรเจกต์นั้น 
ให้ทำคำสั่งเพื่อสร้าง <strong>soft-link</strong> ไปยัง <code>mbed-os</code> (local copy) จะได้ไม่ต้องดาวน์โหลดจาก 
<strong>URL</strong> ที่มีการระบุไว้ในไฟล์ <code>mbed-os.lib</code>
(<a href="https://github.com/ARMmbed/mbed-os#master">https://github.com/ARMmbed/mbed-os#master</a>)</li>
<li>ลองทำคำสั่งเพื่อคอมไพล์โค้ดของโปรเจกต์ ระบุชื่อ <strong>Toolchain</strong> เช่น <code>-t GCC_ARM</code> และบอร์ดเป้าหมายที่ต้องการใช้งาน 
เช่น <code>-m NUCLEO_F446RE</code> สำหรับบอร์ด <strong>STM32 NUCLEO-F446RE</strong> เป็นตัวอย่าง</li>
</ul>
<p>&nbsp;</p>
<pre><code class="language-bash"># clone the Github repository into 'mbed-os' (only once)
$ git clone https://github.com/ARMmbed/mbed-os

# create a new project without downloading the 'mbed-os' repository
$ mbed-tools new -c &quot;mbed-led-blink&quot;

# change to the project directory
$ cd &quot;mbed-led-blink&quot;

# create a softlink the local mbed-os repository 
$ ln -s ../mbed-os mbed-os

# compile the project using the specified target board
# and toolchain (e.g. NUCLEO-F446RE board and GCC_ARM)
$ mbed-tools compile -m NUCLEO_F446RE -t GCC_ARM

# upload firmware the target board attached to the host computer
$ mbed-tools compile -m NUCLEO_L432KC -t GCC_ARM --flash
</code></pre>
<p>&nbsp;</p>
<p><img alt="Git bash command lines" src="../images/mbed_cli2_git_bash-1.png" /></p>
<p>รูปภาพ: ตัวอย่างการทำคำสั่ง <code>mbed-tools</code> ใน <strong>Git Bash Shell for Windows</strong></p>
<p><img alt="Git bash command lines" src="../images/mbed_cli2_git_bash-2.png" /></p>
<p>รูปภาพ: ตัวอย่างการทำคำสั่ง <code>mbed-tools</code> ใน <strong>Git Bash Shell for Windows</strong></p>
<p>&nbsp;</p>
<hr />
<h2 id="github">&#9655; <strong>การดาวน์โหลดและคอมไพล์โปรเจกต์ตัวอย่างจาก Github</strong><a class="headerlink" href="#github" title="Permanent link">#</a></h2>
<p>หากต้องการทดลองคอมไพล์โค้ดโปรเจกต์ตัวอย่างที่มีการใช้ไว้ใน <strong>Github</strong>
เช่น <a href="https://github.com/ARMmbed/mbed-os-example-blinky"><code>mbed-os-example-blinky</code></a> ก็ทำคำสั่งตามตัวอย่างดังนี้</p>
<pre><code class="language-bash">$ git clone https://github.com/ARMmbed/mbed-os-example-blinky
$ cd ./mbed-os-example-blinky

# download the mbed-os library from github
$ mbed-tools deploy
</code></pre>
<p><strong>ข้อสังเกต:</strong> คำสั่ง <code>mbed-tools deploy</code> เป็นการดาวน์โหลดไลบรารีต่าง ๆ
และมีการระบุไว้ในไฟล์ <code>.lib</code> ภายในไดเรกทอรีของโปรเจกต์</p>
<p>หรือจะทำคำสั่งแบบนี้ ก็ได้เช่นกัน</p>
<pre><code class="language-bash">$ mbed-tools import https://github.com/ARMmbed/mbed-os-example-blinky
$ cd ./mbed-os-example-blinky

# compile the project using the specified target board
# and toolchain (e.g. NUCLEO-F446RE board and GCC_ARM)
$ mbed-tools compile -m NUCLEO_F446RE -t GCC_ARM
</code></pre>
<p>&nbsp;</p>
<hr />
<h2 id="_1">&#9655; <strong>กล่าวสรุป</strong><a class="headerlink" href="#_1" title="Permanent link">#</a></h2>
<p>เราได้เห็นขั้นตอนการติดตั้งและใช้งาน <strong>Mbed CLI 2</strong> และโปรแกรมต่าง ๆ ที่เกี่ยวข้อง 
เพื่อการทำคำสั่งแบบ <strong>Command Line</strong> เช่น การสร้างโปรเจกต์ใหม่ การคอมไพล์โค้ดในโปรเจกต์ เป็นต้น</p>
<p>&nbsp;</p>
<hr />
<p><em>This work is licensed under a</em> <strong><em>Creative Commons Attribution-ShareAlike 4.0 International License.</em></strong></p>
<p>Created: 2021-11-23 | Last Updated: 2021-11-29</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2021-2024 IoT Engineering Education, Bangkok/Thailand</a></p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
